(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{177:function(e,t,i){"use strict";i.r(t);var c=i(1),n=i(23),s=i.n(n),a=(i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(44),i(74),i(75),i(76),i(77),i(78),i(79),i(80),i(81),i(82),i(83),i(84),i(85),i(86),i(87),i(88),i(6)),l=i(27),r=i(7),o=i(11),d=i.n(o),j=i(43),u=i.n(j),h=i(55),b=i(5),m=i(10),O=i(0),p=function(e){Object(c.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("itemTable_MCBtn").click())};return document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").addEventListener("keydown",e),function(){document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").removeEventListener("keydown",e)}}),[]);var t=e.setItems,i=e.items,n=e.setDisplayAlert,s=e.mcTable,l=e.addMC,r=e.editMode,o=e.currentSU,d=e.currentMF,j=function(e,c){var n=Object(m.a)(i);0===e&&"asc"===c?n.sort((function(e,t){return e.mc_no>t.mc_no?1:-1})):0===e&&"desc"===c?n.sort((function(e,t){return e.mc_no<t.mc_no?1:-1})):1===e&&"asc"===c?n.sort((function(e,t){return e.item_no>t.item_no?1:-1})):1===e&&"desc"===c&&n.sort((function(e,t){return e.item_no<t.item_no?1:-1})),t(n)},u=Object(c.useState)(""),h=Object(a.a)(u,2),b=h[0],p=h[1],f=function(e){var t=e.target.value;p(t)},x=function(e){n({message:e,position:1,timeout:1500,color:"alert__red"})};return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"itemTable_Section",children:[Object(O.jsx)("div",{children:"Add MC:"}),"\xa0",Object(O.jsx)("div",{children:r?Object(O.jsx)("input",{type:"text",id:"itemTable_MC",name:"mc",justify:"left",placeholder:"Additional MC here",onChange:f}):Object(O.jsx)("input",{type:"text",id:"itemTable_MC",name:"mc",justify:"left",placeholder:"Include additional MC here",readOnly:!0,onChange:f})}),"\xa0\xa0",Object(O.jsx)("div",{children:r?Object(O.jsx)("i",{id:"itemTable_MCBtn",className:"fa fa-plus clickable",onClick:function(){!function(){var e=s.find((function(e){return e.mc_no===b})),t=i.find((function(e){return e.mc_no===b})),c=s.find((function(e){return e.mc_no===b&&e.su_no===o&&e.mf_no===d}));e?c?void 0===t?l(b):x("MC was already entered in the item list, please check ! "):x("This MC exists but not for this manufacturer!"):x("This MC doesn't exist")}()}}):null})]}),Object(O.jsxs)("div",{className:"itemTable_Header",children:[Object(O.jsxs)("div",{children:["By MC#\xa0",Object(O.jsx)("i",{className:"fa fa-chevron-circle-up",onClick:function(){j(0,"asc")}}),"\xa0",Object(O.jsx)("i",{className:"fa fa-chevron-circle-down",onClick:function(){j(0,"desc")}})]}),Object(O.jsxs)("div",{children:["Item\xa0",Object(O.jsx)("i",{className:"fa fa-chevron-circle-up",onClick:function(){j(1,"asc")}}),"\xa0",Object(O.jsx)("i",{className:"fa fa-chevron-circle-down",onClick:function(){j(1,"desc")}})]}),Object(O.jsx)("div",{align:"center",children:"Order"}),Object(O.jsx)("div",{})]}),Object(O.jsx)("div",{id:"itemTableScroller",className:"itemTable_GridContainer",children:i.length>0?i.map((function(e){return Object(O.jsxs)("div",{className:"itemTable_Detail",children:[Object(O.jsx)("div",{children:e.mc_no}),Object(O.jsx)("div",{children:e.item_no}),Object(O.jsx)("div",{align:"center",children:e.order_qty})]},e.id)})):null})]})},f=function(e){var t=e.setItemSearchString,i=e.itemsTotal,n=e.editMode,s=e.shippedTotal,a=e.sampleTotal,l=e.getSampleSize,r=e.aqlTable,o=e.setItemsTotal,d=e.setShippedTotal,j=e.setSampleTotal,u=e.inspectTotal,h=e.setInspectTotal,p=e.setAqlSampleTotal,f=e.aqlSampleTotal,x=e.undoTable,v=e.resetInspectQty,_=e.setDisplayAlert;Object(c.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("highLightItemBtn").click())},t=document.getElementById("itemTotal_searchString");if(t)return t.addEventListener("keydown",e),function(){t.removeEventListener("keydown",e)}}),[]),Object(c.useEffect)((function(){var e=Object(m.a)(i);if(0===e.length)d(0),j(0);else for(var t=function(){var t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0);d(t);var i=e.reduce((function(e,i){return e+l(r,i.ship_qty,t)}),0);j(i);var c=e.reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);h(c),p(l(r,s,t))},c=0;c<e.length;c++)t()}),[i,s,a,r,j,d,l,u,h,p]),Object(c.useEffect)((function(){for(var e=Object(m.a)(i),t=0;t<e.length;t++){var c=l(r,e[t].ship_qty,s);e[t].sample_qty=c}o(e)}),[s]);var g=function(e){return function(t){var c=t.target.value,n=Object(m.a)(i),s=n.findIndex((function(t){return t.item_no===e})),a=n.find((function(t){return t.item_no===e}));n[s]=Object(b.a)(Object(b.a)({},a),{},{inspect_qty:c}),o(n)}};return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"itemTotal_Section",children:[Object(O.jsx)("div",{children:"Highlight item :"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",name:"itemTotal_searchString",id:"itemTotal_searchString",justify:"left",onInput:function(e){return e.target.value=(""+e.target.value).toUpperCase()},placeholder:"Enter item here"})}),Object(O.jsx)("div",{children:Object(O.jsx)("i",{className:"fa fa-search",id:"highLightItemBtn",onClick:function(){t(document.getElementById("itemTotal_searchString").value)}})}),Object(O.jsxs)("div",{children:["Refresh Qty.\xa0",Object(O.jsx)("i",{className:"fa fa-angle-double-right itemTotal_arrow_color",onClick:function(){v()}}),Object(O.jsx)("i",{className:"fa fa-angle-double-right  itemTotal_arrow_color",onClick:function(){v()}})]}),Object(O.jsxs)("div",{children:["Undo",Object(O.jsx)("i",{className:"fa fa-undo",onClick:function(){x()}})]})]}),Object(O.jsxs)("div",{className:"itemTotal_Header",children:[Object(O.jsx)("div",{children:"By Item"}),Object(O.jsx)("div",{children:"Ship"}),Object(O.jsx)("div",{children:"Sample"}),Object(O.jsx)("div",{children:"Inspect"}),Object(O.jsx)("div",{children:"Delete"})]}),Object(O.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:i?i.map((function(t){return Object(O.jsxs)("div",{className:"itemTotal_Detail",children:[Object(O.jsx)("div",{children:t.item_no}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",id:"itemTotal_shipQty",name:"itemTotal_shipQty",value:t.ship_qty||"",justify:"left",onChange:(c=t.item_no,function(e){var t=e.target.value;if(""!==t){t>2e4&&(t=2e4,_({message:"Number of ship units is too large!",position:1,timeout:3e3,color:"alert__red"}));var n=Object(m.a)(i),s=n.findIndex((function(e){return e.item_no===c})),a=n.find((function(e){return e.item_no===c}));n[s]=Object(b.a)(Object(b.a)({},a),{},{ship_qty:t}),o(n)}}),readOnly:n?"":"readOnly"})}),Object(O.jsx)("div",{children:l(r,t.ship_qty,s)}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",id:"itemTotal_InspectQty",name:"itemTotal_InspectQty",value:t.inspect_qty||"",justify:"left",placeholder:"",onChange:g(t.item_no),readOnly:n?"":"readOnly"})}),Object(O.jsx)("div",{children:n?Object(O.jsx)("i",{className:"fa fa-times clickable",onClick:function(){e.deleteAllItems(t.item_no)}}):null})]},t.item_no);var c})):null}),Object(O.jsxs)("div",{className:"itemTotal_Total",children:[Object(O.jsx)("div",{children:" Total :"}),Object(O.jsx)("div",{children:s}),Object(O.jsx)("div",{children:f}),Object(O.jsx)("div",{className:f!==u?"highlightSection":null,children:u}),Object(O.jsx)("div",{})]})]})},x=function(e){for(var t=e.editMode,i=e.defects,n=e.setDisplayAlert,s=e.setDefectLanguage,l=e.defectLanguage,r=e.defectList,o=Object(c.useState)("Select"),d=Object(a.a)(o,2),j=d[0],u=d[1],h=Object(c.useState)(""),b=Object(a.a)(h,2),m=b[0],p=b[1],f=Object(c.useState)(""),x=Object(a.a)(f,2),v=x[0],_=x[1],g=Object(c.useState)(""),y=Object(a.a)(g,2),S=y[0],N=y[1],C=Object(c.useState)(""),k=Object(a.a)(C,2),w=k[0],I=k[1],T=Object(c.useState)(""),M=Object(a.a)(T,2),P=M[0],F=M[1],D=Object(c.useState)(""),L=Object(a.a)(D,2),R=L[0],E=L[1],A=r,U=[],B=function(){var e=A[0];U.push(e),A=A.filter((function(t){return(t.product!==e.product||t.defect_area!==e.defect_area)&&t._id!==e._id}))};A.length>0;)B();return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{className:"defectOption_header",children:[Object(O.jsx)("div",{children:"Language"}),Object(O.jsx)("div",{children:"\xa0\xa0\xa0\xa0"}),Object(O.jsx)("div",{children:Object(O.jsxs)("select",{className:"defectOption_language",onChange:function(e){var t=e.target.value;i.length,s(t)},value:l,children:[Object(O.jsx)("option",{value:"en",children:"English"}),Object(O.jsx)("option",{value:"zh",children:"Chinese"})]})})]}),Object(O.jsxs)("div",{className:"defectOption",children:[Object(O.jsx)("div",{className:"defectOption_product",children:Object(O.jsxs)("select",{onChange:function(e){var t=e.target.value;"disabled"===(i.length>0?"disabled":null)?(t!==i[0].product&&n({message:"Product '"+i[0].product+"' has already been chosen !! Please empty all defects if you decide to change product ! ",position:2,timeout:2500,color:"alert__red"}),document.getElementById("defectOptionsProduct").value=i[0].product,document.getElementById("defectOptionsDefectArea").value="Select",u(i[0].product)):u(t),p("Select"),N(""),I(""),F(""),E("")},id:"defectOptionsProduct",children:[Object(O.jsx)("option",{value:"Select",children:"Select"}),Object(O.jsx)("option",{value:"Fashion Jewelry",disabled:t?"":"disabled",children:"Fashion Jewelry"}),Object(O.jsx)("option",{value:"Footwear",disabled:t?"":"disabled",children:"Footware"}),Object(O.jsx)("option",{value:"Handbags",disabled:t?"":"disabled",children:"Handbags"}),Object(O.jsx)("option",{value:"Hardlines",disabled:t?"":"disabled",children:"Hardlines"}),Object(O.jsx)("option",{value:"Softlines",disabled:t?"":"disabled",children:"Softlines"})]})}),Object(O.jsx)("div",{className:"defectOption_defectArea",children:Object(O.jsxs)("select",{onChange:function(e){var t=e.target.value.split("-");F(t[0]),p(t[1]),_("Select"),N(""),I("")},id:"defectOptionsDefectArea",children:[Object(O.jsx)("option",{value:"Select",children:"Select"}),U.filter((function(e){return e.product===j&&e.lang===l})).map((function(e){return Object(O.jsx)("option",{value:e.defect_code+"-"+e.defect_area,children:e.defect_code+"-"+e.defect_area},e._id)}))]})}),Object(O.jsx)("div",{className:"defectOption_defectDetail",children:Object(O.jsxs)("select",{onChange:function(e){var t=e.target.value.split("-");E(t[0]),_(t[1]),N(""),I("")},children:[Object(O.jsx)("option",{value:"Select",children:"Select"}),r.filter((function(e){return e.product===j&&e.defect_area===m&&e.lang===l})).map((function(e){return Object(O.jsx)("option",{value:e.defect_detail_code+"-"+e.defect_detail,children:e.defect_detail_code+"-"+e.defect_detail},e._id)}))]})}),Object(O.jsx)("div",{className:"defectOption_major",children:Object(O.jsx)("input",{type:"number",name:"major",placeholder:" Major",value:S,min:"0",max:"5",onChange:function(e){var t=e.target.value;N(t)},readOnly:t?"":"readOnly"})}),Object(O.jsx)("div",{className:"defectOption_minor",children:Object(O.jsx)("input",{type:"number",name:"minor",placeholder:" Minor",value:w,min:"0",max:"5",onChange:function(e){var t=e.target.value;I(t)},readOnly:t?"":"readOnly"})}),Object(O.jsx)("div",{children:t?Object(O.jsx)("button",{onClick:function(){!function(t){var i=isNaN(parseInt(S)),c=isNaN(parseInt(w));"Select"===j||"Select"===m||"Select"===v?e.setDisplayAlert({message:"Please make sure you select Product, Defect and Defect Detail ! ",position:2,timeout:2500,color:"alert__red"}):i||c||S<1&&w<1?e.setDisplayAlert({message:"Please make sure you enter either Major and Minor quantity ! ",position:2,timeout:2500,color:"alert__red"}):e.addToDefectList(j,m,v,S,w,P,R,l)}()},children:"Add"}):null}),Object(O.jsx)("div",{})]})]})},v=function(e){var t=e.defects,i=e.editMode,n=e.isCriticalDefect,s=e.defectLanguage,a=e.defectList;function l(e,t,i){return a.filter((function(c){return c.product===e&&c.defect_code===t&&c.defect_detail_code===i&&c.lang===s}))[0]}return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("div",{className:"defectList",children:[Object(O.jsxs)("div",{className:"defectList_gridHeader",children:[Object(O.jsx)("div",{children:"Product"}),Object(O.jsx)("div",{children:"Defect"}),Object(O.jsx)("div",{children:"Defect Detail"}),Object(O.jsxs)("div",{className:"defectList_major_header",children:["Major/",Object(O.jsx)("br",{}),"Critical"]}),Object(O.jsx)("div",{className:"defectList_minor_header",children:"Minor"}),Object(O.jsx)("div",{children:"Delete"})]}),t.length>0?t.map((function(t){return Object(O.jsxs)("div",{className:"defectList_gridDetail",children:[Object(O.jsx)("div",{className:"defectList_gridItem defectList_product",children:t.product}),Object(O.jsx)("div",{className:"defectList_gridItem defectList_defectArea",children:t.defect_area_code+"-"+l(t.product,t.defect_area_code,t.defect_detail_area).defect_area}),Object(O.jsx)("div",{className:"defectList_gridItem  defectList_defectDetail",style:{color:n(t.product,t.defect_detail_area)?"red":"inherit"},children:Object(O.jsx)("span",{children:t.defect_detail_area+"-"+l(t.product,t.defect_area_code,t.defect_detail_area).defect_detail})}),Object(O.jsx)("div",{className:"defectList_major",children:t.major}),Object(O.jsx)("div",{className:"defectList_minor",children:t.minor}),Object(O.jsx)("div",{className:"defectList_deleteButton",children:i?Object(O.jsx)("button",{onClick:function(){e.deleteDefect(t.id)},children:"\xd7"}):null}),Object(O.jsx)("div",{})]},t.id)})):Object(O.jsx)("div",{children:Object(O.jsx)("div",{colSpan:3,children:"No Defects"})})]})})},_=function(e){var t=e.alert,i="alert ".concat(t.color);return Object(O.jsx)("h5",{className:i,children:t.message})},g=function(e){var t=e.editMode,i=e.checkList;i.sort((function(e,t){return e.id-t.id}));var c=function(i,c){if(t){var n=["Select","OK","NA","X","NI"],s=n.findIndex((function(e){return e===c.result}));4===s?s=1:s+=1;var a=n[s];e.handleCheckItemChange(i,Object(b.a)(Object(b.a)({},c),{},{result:a}))}};return Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(O.jsx)("div",{className:"checkList_header",children:"Basic Check List"}),Object(O.jsxs)("div",{className:"checkFormGrid",children:[Object(O.jsx)("div",{children:Object(O.jsxs)("table",{id:"checkListTable",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"40%",children:"Category"}),Object(O.jsx)("th",{width:"40%",children:"Item"}),Object(O.jsx)("th",{width:"20%",children:"Result"})]})}),Object(O.jsx)("tbody",{children:i?i.filter((function(e){return e.id>0&&e.id<=42})).map((function(e){return Object(O.jsxs)("tr",{children:[e.category?Object(O.jsx)("td",{children:e.category}):null,e.category?Object(O.jsx)("td",{children:e.item}):0===e.id?Object(O.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(O.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(O.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(O.jsx)("td",{className:"checkCellResult",onClick:function(){c(e.id,e)},children:e.result}):null]},e.id)})):null})]})}),Object(O.jsx)("div",{className:"checkFormGridCell",children:Object(O.jsxs)("table",{id:"checkListTable",className:"fixed",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"40%",children:"Category"}),Object(O.jsx)("th",{width:"40%",children:"Item"}),Object(O.jsx)("th",{width:"20%",children:"Result"})]})}),Object(O.jsx)("tbody",{children:i?i.filter((function(e){return e.id>=43&&e.id<=68})).map((function(e){return Object(O.jsxs)("tr",{children:[e.category?Object(O.jsx)("td",{children:e.category}):null,e.category?Object(O.jsx)("td",{children:e.item}):0===e.id?Object(O.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(O.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(O.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(O.jsx)("td",{className:"checkCellResult",onClick:function(){c(e.id,e)},children:e.result}):null]},e.id)})):null})]})}),Object(O.jsx)("div",{className:"checkFormGridCell",children:Object(O.jsxs)("table",{id:"checkListTable",className:"fixed",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{width:"40%",children:"Category"}),Object(O.jsx)("th",{width:"40%",children:"Item"}),Object(O.jsx)("th",{width:"20%",children:"Result"})]})}),Object(O.jsx)("tbody",{children:i?i.filter((function(e){return e.id>=81})).map((function(e){return Object(O.jsxs)("tr",{children:[e.category?Object(O.jsx)("td",{children:e.category}):null,e.category?Object(O.jsx)("td",{children:e.item}):0===e.id?Object(O.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(O.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(O.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(O.jsx)("td",{className:"checkCellResult",onClick:function(){c(e.id,e)},children:e.result}):null]},e.id)})):null})]})})]})]})},y=i(9),S=i(56),N=i.n(S),C=function(e){var t=Object(y.usePromiseTracker)({area:e.area}).promiseInProgress,i=e.spinnerMessage;return t&&Object(O.jsxs)("div",{style:{marginTop:"0.5rem",width:"100%",height:"30",display:"flex",justifyContent:"center",alignItems:"center",color:"green",fontWeight:"bold"},children:[i,Object(O.jsx)(N.a,{type:"Circles",color:"green",height:"30",width:"100"})]})},k=function(e){var t=e.setDisplayAlert,i=e.inspectionID,n=e.setUploads,s=e.uploads,l=e.downloadDoc,r=e.editMode,o=e.currentSU,j=e.currentMF,u=e.setShowSharePointFiles,h=Object(c.useState)(),p=Object(a.a)(h,2),f=p[0],x=p[1];function v(e){var t=function(e){var t=e.split(".");return t[t.length-1]}(e),i=[{ext:"jpeg",icon:"file-image-o"},{ext:"jpg",icon:"file-image-o"},{ext:"bmp",icon:"file-image-o"},{ext:"png",icon:"file-image-o"},{ext:"jif",icon:"file-image-o"},{ext:"mp4",icon:"file-movie-o"},{ext:"avi",icon:"file-movie-o"},{ext:"mpg",icon:"file-movie-o"},{ext:"txt",icon:"file-text-o"},{ext:"xlsx",icon:"file-excel-o"},{ext:"xls",icon:"file-excel-o"},{ext:"doc",icon:"file-word-o"},{ext:"docx",icon:"file-word-o"},{ext:"ppt",icon:"file-powepoint-o"},{ext:"pdf",icon:"file-pdf-o"},{ext:"pptx",icon:"file-pdf-o"},{ext:"zip",icon:"file-zip-o"}].find((function(e){return e.ext===t.toLowerCase()})).icon;return"fa fa-"+(i||"fa-fa-file")+" addSpace"}var _=function(e){t({message:e,position:3,timeout:3e3,color:"alert__red"})};return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{className:"uploadDoc",children:[r?Object(O.jsxs)("form",{children:[Object(O.jsx)("input",{type:"file",multiple:!0,name:"file",id:"sharePoint_file",onChange:function(e){x({file:e.target.files})}}),Object(O.jsx)("button",{type:"button",onClick:function(e){var t=new FormData;try{for(var c=f.file,n=0;n<c.length;n++)t.append("files[]",c[n]);Object(y.trackPromise)(d()({url:"/api/upload",method:"POST",data:t,headers:{inspection_id:i.mc+"-"+i.iteration+"-"+i.type.charAt(0),relative_url:"2022inspRpt/SU"+o+"MF"+j}}).then((function(e){for(var t=0;t<e.data.length;t++)u(!0);document.getElementById("sharePoint_file").value=null,document.getElementById("sharePoint_refresh").click()})).catch((function(e){_(e.response.data)})),"sharePointUpload")}catch(s){_("Please select files and try again !!")}},children:"Upload files"})]}):null,Object(O.jsx)("table",{id:"uploadFiles",children:Object(O.jsx)("tbody",{children:s.filter((function(e){return e.enable})).map((function(e){return Object(O.jsx)("tr",{children:Object(O.jsxs)("td",{children:[Object(O.jsx)("button",{className:"button-delete small-button",onClick:function(){!function(e){var t=Object(m.a)(s),i=t.findIndex((function(t){return t._id===e})),c=t.find((function(t){return t._id===e}));t[i]=Object(b.a)(Object(b.a)({},c),{},{enable:!1}),n(t)}(e._id)},children:"\xd7"}),Object(O.jsxs)("a",{href:"/#",onClick:l(e._id,e.file_name),children:[Object(O.jsx)("i",{className:v(e.file_name)}),e.file_name]})]})},e._id)}))})})]}),Object(O.jsx)(C,{area:"sharePoiintUpload"})]})},w=function(e){var t=e.checkDuplicateID,i=e.mcTable,n=e.setDisplayAlert,s=e.inspectionID,a=e.setInspectionID,l=e.clearScreen,r=e.searchInspByMC,o=e.currentMF,d=e.currentSU,j=e.editMode,u=function(e){var t=e.target.id,i=e.target.value;switch(t){case"searchKey_mc":a(Object(b.a)(Object(b.a)({},s),{},{mc:i})),i.length>=3?r(i):l();break;case"searchKey_iteration":a(Object(b.a)(Object(b.a)({},s),{},{iteration:i}));break;case"searchKey_type":a(Object(b.a)(Object(b.a)({},s),{},{type:i}))}};var h=function(e){n({message:e,position:0,timeout:3e3,color:"alert__red"})};return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{className:"searchKey",children:[Object(O.jsxs)("div",{className:"searchKey_pair",children:[Object(O.jsx)("label",{children:"MC# : "}),Object(O.jsx)("input",{type:"text",name:"searchKey_mc",id:"searchKey_mc",onChange:u})]}),Object(O.jsxs)("div",{className:"searchKey_pair",children:[Object(O.jsx)("label",{children:"Iteration : "}),Object(O.jsx)("input",{type:"number",name:"searchKey_iteration",id:"searchKey_iteration",placeholder:"Iteration",min:"1",max:"9",onChange:u})]}),Object(O.jsxs)("div",{className:"searchKey_pair",children:[Object(O.jsx)("label",{children:"Type : "}),Object(O.jsxs)("select",{name:"searchKey_type",id:"searchKey_type",onChange:u,children:[Object(O.jsx)("option",{value:"Select",children:"Select"}),Object(O.jsx)("option",{value:"1st Line",children:"1st In-line"}),Object(O.jsx)("option",{value:"2nd Line",children:"2nd In-Line"}),Object(O.jsx)("option",{value:"3rd Line",children:"3rd In-Line"}),Object(O.jsx)("option",{value:"4th Line",children:"4th In-Line"}),Object(O.jsx)("option",{value:"5th Line",children:"5th In-Line"}),Object(O.jsx)("option",{value:"1st Pre-final",children:"1st Pre-final"}),Object(O.jsx)("option",{value:"2nd Pre-final",children:"2nd Pre-final"}),Object(O.jsx)("option",{value:"Pre-Production Meeting",children:"Pre-Production Meeting"}),Object(O.jsx)("option",{value:"Final",children:"Final"}),Object(O.jsx)("option",{value:"Re-inspection for Failure",children:"Re-inspection for Failure"})]})]}),Object(O.jsx)("div",{}),j?null:Object(O.jsx)("div",{children:""!==s.mc&&"Select"!==s.iteration&&""!==s.iteration&&"Select"!==s.type?Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:function(){!function(e){l();var c=i.find((function(t){return t.mc_no===e.mc})),n=i.find((function(t){return t.mc_no===e.mc&&t.su_no===d&&t.mf_no===o}));c?n?t(e):h("This MC exists but not for this manufacturer!"):h("This MC doesn't exist")}(s)},children:"Create Inspection"})}):null})]}),Object(O.jsx)(C,{area:"searchKey"})]})},I=function(e){var t=e.handleSave,i=e.handleDelete,n=e.handleSearch,s=e.inspectionID,a=e.printReport,l=e.editMode,r=e.setEditMode,o=e.userProfile,d=e.misc,j=e.showFull,u=e.clearScreen,h=e.updateHistory,b=d.submitted,m=void 0!==o.ignore_submit&&o.ignore_submit,p=function(e){var c=e.target.id;r(!1),"save"===c&&t(!!b),"edit"===c&&r(!0),"delete"===c&&i(s),"search"===c&&(r(!1),n(s)),"print"===c&&a("Inspection_Report.xlsx",!1),"print_draft"===c&&a("Inspection_Report.xlsx",!0),"cancel"===c&&(r(!1),u())};return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("div",{className:"mainMenu",children:[Object(O.jsxs)("div",{className:"mainMenu_inspectionKey",children:["Inspection Key : \xa0\xa0",b&&j?Object(O.jsx)("i",{className:"fa fa-lock mainMenu_lock",onClick:function(){m?!0===window.confirm("Are you sure you want to unlock this inspeciton ? ")&&t(!1):alert("You have no rights to unlock this inspeciton !")}}):null,!b&&j?Object(O.jsx)("i",{className:"fa fa-unlock mainMenu_unlock",onClick:function(){!0===window.confirm("Are you sure you want to submit or lock this inspeciton ? ")&&t(!0)}}):null]}),l?Object(O.jsx)("button",{id:"save",onClick:p,children:"Save"}):null,l?null:Object(O.jsx)("button",{id:"search",onClick:p,children:"Search"}),l||!j||b&&!m?null:Object(O.jsxs)("button",{id:"edit",onClick:p,children:["Edit\xa0",b&&j?Object(O.jsx)("i",{className:"fa fa-lock"}):null]}),l?Object(O.jsx)("button",{id:"cancel",onClick:p,children:"Cancel"}):null,!l&&b?Object(O.jsx)("button",{id:"print",onClick:p,children:"Print"}):null,l||b||!j?null:Object(O.jsx)("button",{id:"print_draft",onClick:p,children:"Print Draft"}),j&&m&&j&&h.length>0?Object(O.jsx)("button",{id:"delete",onClick:p,className:"deleteButton",children:"Delete"}):null]})})},T=function(e){for(var t=e.setInspectionID,i=e.handleSearch,n=e.searchedMC,s=e.setShowSearchedMC,a=e.mcTable,l=e.currentSU,r=e.currentMF,o=[],d=function(){var e=n[j].mc;a.find((function(t){return t.mc_no===e&&t.su_no===l&&t.mf_no===r}))&&o.push(n[j])},j=0;j<n.length;j++)d();return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{className:"searchedMC",children:[Object(O.jsxs)("div",{className:"searchedMC_header1 searchedMC_header",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:"MC"}),Object(O.jsx)("div",{children:"Iteration"}),Object(O.jsx)("div",{children:"Type"})]}),Object(O.jsxs)("div",{className:"searchedMC_header2 searchedMC_header",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:"MC"}),Object(O.jsx)("div",{children:"Iteration"}),Object(O.jsx)("div",{children:"Type"})]}),Object(O.jsxs)("div",{className:"searchedMC_header3 searchedMC_header",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:"MC"}),Object(O.jsx)("div",{children:"Iteration"}),Object(O.jsx)("div",{children:"Type"})]}),o.length>0?o.map((function(e){return Object(O.jsxs)("div",{className:"searchedMC_detail",onClick:function(){var c;c={mc:e.mc,iteration:e.iteration,type:e.type},t(c),i(c),document.getElementById("searchKey_mc").value=c.mc,document.getElementById("searchKey_iteration").value=c.iteration,document.getElementById("searchKey_type").value=c.type,s(!1)},children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:e.mc}),Object(O.jsx)("div",{children:e.iteration}),Object(O.jsx)("div",{children:e.type})]},e.id)})):null]}),Object(O.jsx)(C,{area:"mfrSelection"})]})},M=function(e){var t=e.currentSU,i=e.currentMF,n=e.currentSUName,s=e.currentMFName,a=e.setSelectingSupplier,l=e.setShowFull;return Object(O.jsx)(c.Fragment,{children:t?Object(O.jsxs)("div",{className:"supplierInfo",children:[Object(O.jsx)("button",{onClick:function(){l(!1),a(!0)},children:"Select"}),Object(O.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoSU",children:[n.toLowerCase()," (",t,")"]}),Object(O.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoMF",children:[s.toLowerCase()," (",i,")"]})]}):null})},P=function(e){var t=e.partyTable,i=e.setCurrentSU,n=e.setCurrentMF,s=e.setCurrentSUName,a=e.setCurrentMFName,l=e.selectingSupplier,r=e.setSelectingSupplier;return Object(O.jsxs)(c.Fragment,{children:[t&&l?Object(O.jsx)("div",{className:"mfrSelection_header",children:"Select a manufacturer:"}):null,t&&l?t.map((function(e){return Object(O.jsxs)("div",{className:"mfrSelection",onClick:function(){var t,c,l,o;t=e.SU,c=e.MF,l=e.SU_NAME,o=e.MF_NAME,i(t),n(c),s(l),a(o),r(!1)},children:[Object(O.jsxs)("div",{className:"mfrSelectionSU",children:[e.SU_NAME," (",e.SU,")"," "]}),Object(O.jsxs)("div",{className:"mfrSelectionMF",children:[e.MF_NAME," (",e.MF,")"," "]})]},e.SU.concat(e.MF))})):null]})},F=i(57),D=i.n(F),L=function(e){var t=e.setInspectionDate,i=e.inspectionDate,c=e.setMisc,n=e.misc,s=e.editMode,a=function(e,t){return function(i){var s=i.target.value;if(n){var a=Object(b.a)({},n);switch(e){case 2:a=Object(b.a)(Object(b.a)({},a),{},{product_type:s});break;case 3:a=Object(b.a)(Object(b.a)({},a),{},{lab_test_report:s});break;case 4:a=Object(b.a)(Object(b.a)({},a),{},{lab_child_safety_report:s});break;case 5:a=Object(b.a)(Object(b.a)({},a),{},{fibre_content:s});break;case 6:a=Object(b.a)(Object(b.a)({},a),{},{comments:s});break;case 7:a=Object(b.a)(Object(b.a)({},a),{},{governance_inspection:t});break;case 8:a=Object(b.a)(Object(b.a)({},a),{},{props65_report:s});break;case 9:a=Object(b.a)(Object(b.a)({},a),{},{ship_mode:s});break;case 10:a=Object(b.a)(Object(b.a)({},a),{},{pack_pct:s});break;case 11:a=Object(b.a)(Object(b.a)({},a),{},{ship_window:s});break;case 12:a=Object(b.a)(Object(b.a)({},a),{},{carton_list:s});break;case 13:a=Object(b.a)(Object(b.a)({},a),{},{carton_total:s});break;case 14:a=Object(b.a)(Object(b.a)({},a),{},{inspector:s});break;case 15:a=Object(b.a)(Object(b.a)({},a),{},{qa_type:s});break;default:console.log("No element")}c(a)}}};return Object(O.jsxs)("div",{className:"misc",children:[Object(O.jsx)("div",{className:"misc_a",children:Object(O.jsxs)("div",{className:"misc_title misc_grid_a",children:[Object(O.jsx)("div",{children:"Inspection Date (A)"}),Object(O.jsx)(D.a,{className:"datePicker",dateFormat:"MM/dd/yy",selected:i,onChange:function(e){return function(e){t(e)}(e)},readOnly:s?"":"readOnly"})]})}),Object(O.jsxs)("div",{className:"misc_g misc_grid_g",children:[Object(O.jsx)("div",{className:"misc_title",children:"Governance Inspection (G)"}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"radio",id:"misc_governance_inspection_yes",name:"misc_governance_inspection",value:n.governance_inspection||"",checked:"Yes"===n.governance_inspection,onChange:a(7,"Yes"),disabled:s?"":"disabled"})}),Object(O.jsx)("div",{children:"Yes"}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"radio",id:"misc_governance_inspection_no",name:"misc_governance_inspection",value:n.governance_inspection||"",checked:"No"===n.governance_inspection,onChange:a(7,"No"),disabled:s?"":"disabled"})}),Object(O.jsx)("div",{children:"No"})]}),Object(O.jsxs)("div",{className:"misc_j misc_grid_j",children:[Object(O.jsx)("div",{className:"misc_title",children:"Pack % During Inspection (J)"}),Object(O.jsx)("input",{type:"text",id:"misc_packPct",name:"misc_packPct",value:n.pack_pct||"",justify:"left",placeholder:"%",onChange:a(10),readOnly:s?"":"readOnly"})]}),Object(O.jsxs)("div",{className:"misc_k misc_grid_k",children:[Object(O.jsx)("div",{className:"misc_title",children:"Ship Window (K)"}),Object(O.jsx)("input",{type:"text",id:"misc_shipWindow",name:"misc_shipWindow",value:n.ship_window||"",justify:"left",placeholder:"Ship Window",onChange:a(11),readOnly:s?"":"readOnly"})]}),Object(O.jsxs)("div",{className:"misc_b misc_grid_b",children:[Object(O.jsx)("div",{className:"misc_title",children:"Product Type (B)"}),Object(O.jsx)("input",{type:"text",id:"misc_productType",name:"misc_productType",value:n.product_type||"",justify:"left",placeholder:"Product Type",onChange:a(2),readOnly:s?"":"readOnly"})]}),Object(O.jsxs)("div",{className:"misc_o misc_grid_o",children:[Object(O.jsx)("div",{className:"misc_title",children:"QA Type (O)"}),Object(O.jsxs)("select",{id:"misc_qaType",name:"misc_qaType",value:n.qa_type||"Select",justify:"left",placeholder:"QA Type",onChange:a(15),children:[Object(O.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(O.jsx)("option",{value:"MQA",disabled:s?"":"disabled",children:"MQA"}),Object(O.jsx)("option",{value:"SQA",disabled:s?"":"disabled",children:"SQA"})]})]}),Object(O.jsxs)("div",{className:"misc_n misc_grid_n",children:[Object(O.jsx)("div",{className:"misc_title",children:"Inspector (N)"}),Object(O.jsx)("input",{type:"text",id:"misc_inspector",name:"misc_inspector",value:n.inspector||"",justify:"left",placeholder:"Inspector",onChange:a(14),readOnly:s?"":"readOnly"})]}),Object(O.jsxs)("div",{className:"misc_c misc_grid_c",children:[Object(O.jsx)("div",{className:"misc_title",children:"Lab Test Report (C)"}),Object(O.jsxs)("select",{id:"misc_labTest",name:"misc_labTest",value:n.lab_test_report||"Select",justify:"left",placeholder:"Test result",onChange:a(3),children:[Object(O.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(O.jsx)("option",{value:"N/A",disabled:s?"":"disabled",children:"N/A"}),Object(O.jsx)("option",{value:"Pending",disabled:s?"":"disabled",children:"Pending"}),Object(O.jsx)("option",{value:"Pass",disabled:s?"":"disabled",children:"Pass"}),Object(O.jsx)("option",{value:"Fail",disabled:s?"":"disabled",children:"Fail"})]})]}),Object(O.jsxs)("div",{className:"misc_d misc_grid_d",children:[Object(O.jsx)("div",{className:"misc_title",children:"Child Safety Report (D)"}),Object(O.jsxs)("select",{id:"misc_childSafetyReport",name:"misc_childSafetyReport",value:n.lab_child_safety_report||"Select",justify:"left",placeholder:" ",onChange:a(4),children:[Object(O.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(O.jsx)("option",{value:"N/A",disabled:s?"":"disabled",children:"N/A"}),Object(O.jsx)("option",{value:"Pending",disabled:s?"":"disabled",children:"Pending"}),Object(O.jsx)("option",{value:"Accept",disabled:s?"":"disabled",children:"Accept"}),Object(O.jsx)("option",{value:"Reject",disabled:s?"":"disabled",children:"Reject"})]})]}),Object(O.jsxs)("div",{className:"misc_h misc_grid_h",children:[Object(O.jsx)("div",{className:"misc_title",children:"Props 65 Report (H)"}),Object(O.jsxs)("select",{id:"misc_props65Report",name:"misc_props65Report",value:n.props65_report||"Select",justify:"left",placeholder:" ",onChange:a(8),children:[Object(O.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(O.jsx)("option",{value:"N/A",disabled:s?"":"disabled",children:"N/A"}),Object(O.jsx)("option",{value:"Pending",disabled:s?"":"disabled",children:"Pending"}),Object(O.jsx)("option",{value:"Accept",disabled:s?"":"disabled",children:"Accept"}),Object(O.jsx)("option",{value:"Reject",disabled:s?"":"disabled",children:"Reject"})]})]}),Object(O.jsxs)("div",{className:"misc_i misc_grid_i",children:[Object(O.jsx)("div",{className:"misc_title",children:"Ship Mode (I)"}),Object(O.jsxs)("select",{id:"misc_shipMode",name:"misc_shipMode",value:n.ship_mode||"Select",justify:"left",placeholder:" ",onChange:a(9),children:[Object(O.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(O.jsx)("option",{value:"Ocean",disabled:s?"":"disabled",children:"Ocean"}),Object(O.jsx)("option",{value:"Air",disabled:s?"":"disabled",children:"Air"})]})]}),Object(O.jsxs)("div",{className:"misc_e misc_grid_e",children:[Object(O.jsx)("div",{className:"misc_title",children:"Fibre Content (E)"}),Object(O.jsx)("input",{type:"text",id:"misc_fibreContent",name:"misc_fibreContent",value:n.fibre_content||"",justify:"left",placeholder:"Fibre Content",onChange:a(5),readOnly:s?"":"readOnly"})]}),Object(O.jsxs)("div",{className:"misc_f misc_grid_f",children:[Object(O.jsx)("div",{className:"misc_title",children:"Comments (F)"}),Object(O.jsx)("textarea",{rows:"5",cols:"50",id:"misc_comments",name:"misc_comments",value:n.comments||"",justify:"left",placeholder:"Comments",onChange:a(6),readOnly:s?"":"readOnly"})]}),Object(O.jsxs)("div",{className:"misc_l misc_grid_l",children:[Object(O.jsx)("div",{className:"misc_title",children:"Carton List (L)"}),Object(O.jsx)("textarea",{rows:"3",cols:"50",id:"misc_cartonList",name:"misc_cartonList",value:n.carton_list||"",justify:"left",placeholder:"Carton List",onChange:a(12),readOnly:s?"":"readOnly"})]}),Object(O.jsxs)("div",{className:"misc_m misc_grid_m",children:[Object(O.jsx)("div",{className:"misc_title",children:"Carton Total (M)"}),Object(O.jsx)("input",{type:"text",id:"misc_cartonTotal",name:"misc_cartonTotal",value:n.carton_total||"",justify:"left",placeholder:"Carton Total",onChange:a(13),readOnly:s?"":"readOnly"})]})]})},R=function(e){var t=e.setMisc,i=e.misc,n=e.editMode,s=e.visualResult,a=e.calculateFinalResult;function l(e){return"Failed"===e||"Failed"===s.visual_result?"Failed":s.visual_result}var r=function(e,c){return function(c){var n=c.target.value;if(i){var s=Object(b.a)({},i);switch(e){case 1:s=Object(b.a)(Object(b.a)({},s),{},{packing_result:n}),s="Failed"===n?Object(b.a)(Object(b.a)({},s),{},{final_result:"Failed"}):Object(b.a)(Object(b.a)({},s),{},{final_result:l(i.measurement_result)});break;case 2:s=Object(b.a)(Object(b.a)({},s),{},{measurement_result:n}),s="Failed"===n?Object(b.a)(Object(b.a)({},s),{},{final_result:"Failed"}):Object(b.a)(Object(b.a)({},s),{},{final_result:l(i.packing_result)});break;default:console.log("No element")}t(s)}}};return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("div",{className:"result",children:[Object(O.jsx)("div",{className:"result_f result_grid_f",children:" Inspection Result Summary"}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsxs)("div",{className:"result_a result_grid_a",children:[Object(O.jsx)("div",{className:"result_title",children:"Packing"}),Object(O.jsxs)("select",{id:"result_packingResult",name:"misc_packingResult",value:i.packing_result||"Select",justify:"left",placeholder:"Packing Result",onChange:r(1),children:[Object(O.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(O.jsx)("option",{value:"Passed",disabled:n?"":"disabled",children:"Passed"}),Object(O.jsx)("option",{value:"Failed",disabled:n?"":"disabled",children:"Failed"})]})]}),Object(O.jsxs)("div",{className:"result_b result_grid_b",children:[Object(O.jsx)("div",{className:"result_title",children:"Measurement"}),Object(O.jsxs)("select",{id:"result_measurementResult",name:"misc_measurementResult",value:i.measurement_result||"Select",justify:"left",placeholder:"Measurement result",onChange:r(2),children:[Object(O.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(O.jsx)("option",{value:"Passed",disabled:n?"":"disabled",children:"Passed"}),Object(O.jsx)("option",{value:"Failed",disabled:n?"":"disabled",children:"Failed"})]})]}),Object(O.jsxs)("div",{className:"result_c result_grid_c",children:[Object(O.jsx)("div",{className:"result_title",children:"Critical / Major / Minor"}),Object(O.jsx)("input",{type:"text",id:"result_defectiveResult",name:"result_defectiveResult",value:s.defective_result||"",justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(O.jsxs)("div",{className:"result_d result_grid_d",children:[Object(O.jsx)("div",{className:"result_title",children:"Sample Threshold (Major / Minor)"}),Object(O.jsx)("input",{type:"text",id:"result_sampleThreshold",name:"result_sampleThreshold",value:s.sample_threshold||"",justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(O.jsxs)("div",{className:"result_e result_grid_e",children:[Object(O.jsx)("div",{className:"result_title",children:"Final Result"}),Object(O.jsx)("input",{type:"text",id:"result_finalResult",name:"result_finalResult",value:a(),justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(O.jsxs)("div",{className:"result_g result_grid_g",children:[Object(O.jsx)("div",{className:"result_title",children:"Visual Result"}),Object(O.jsx)("input",{type:"text",id:"result_visualResult",name:"result_visualResult",value:s.visual_result||"",justify:"left",placeholder:"",readOnly:"readOnly"})]})]})})},E=function(e){var t=e.updateHistory,i=e.showHistory,n=e.setShowHistory,s=e.convertToLocal,a=Object(m.a)(t);a.sort((function(e,t){return Date.parse(e.updated_time)>Date.parse(t.updated_time)?-1:1}));var l=document.querySelector(":root");return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{className:"changeTrack_section_upper",children:[Object(O.jsx)("div",{children:"Change History"}),Object(O.jsx)("div",{}),Object(O.jsxs)("div",{children:["Show \xa0",Object(O.jsx)("i",{className:"fa fa-plus",onClick:function(){n(!0)}}),"\xa0\xa0Hide \xa0",Object(O.jsx)("i",{className:"fa fa-minus",onClick:function(){n(!1)}})]}),Object(O.jsx)("div",{}),Object(O.jsxs)("div",{children:["Expand \xa0",Object(O.jsx)("i",{className:"fa fa-plus",onClick:function(){l.style.setProperty("--changeTrack_max_height","100rem")}}),"\xa0\xa0 Collapse \xa0",Object(O.jsx)("i",{className:"fa fa-minus",onClick:function(){l.style.setProperty("--changeTrack_max_height","4.3rem")}})]}),Object(O.jsx)("div",{})]}),i?Object(O.jsxs)("div",{className:"changeTrack_section_bottom",children:[Object(O.jsxs)("div",{className:"changeTrack_grid_header",children:[Object(O.jsx)("div",{children:"Local Time"}),Object(O.jsx)("div",{children:"Updated By"}),Object(O.jsx)("div",{children:"Mode"}),Object(O.jsx)("div",{children:"Result Details"}),Object(O.jsx)("div",{})]}),Object(O.jsx)("div",{className:"changeTrack_grid_outer_detail",children:a.length>0?a.map((function(e){return Object(O.jsxs)("div",{className:"changeTrack_grid_detail",children:[Object(O.jsx)("div",{children:s(e.updated_time)}),Object(O.jsx)("div",{children:e.updated_by}),Object(O.jsx)("div",{children:e.updated_mode}),Object(O.jsx)("div",{children:e.misc})]},e.id)})):null})]}):null]})},A=function(e){var t=e.inspectionID,i=e.currentSU,n=e.currentMF,s=e.editMode,a=e.getSharePointFiles,l=e.setShowSharePointFiles,r=e.showSharePointFiles,o=e.setSharePointFiles;return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)("div",{className:"sharePoint_section",children:"Document Management on SharePoint"}),Object(O.jsxs)("div",{className:"sharePoint_grid",children:[Object(O.jsx)("div",{className:"sharePoint_cell",children:Object(O.jsx)("img",{src:"../static/img/sharePointx.jpg",alt:"sharePoint",className:"sharePoint_photo"})}),Object(O.jsx)("div",{}),Object(O.jsxs)("div",{className:"sharePoint_cell",children:["View files\xa0",Object(O.jsx)("i",{className:"fa  fa-sign-in clickable",onClick:function(){!function(){var e="https://macysinc.sharepoint.com/sites/OSO/2022inspRpt/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F2022inspRpt%2F".concat("SU").concat(i)+"MF"+n+"&view=7&q="+t.mc+"&FilterField1=Inspection_x0020_ID&FilterValue1="+t.mc+"-"+t.iteration+"-"+t.type[0]+"&dt="+(new Date).getTime(),c=window.open(e,"_blank","noopener,noreferrer");c&&(c.opener=null)}()}})]}),s?Object(O.jsxs)("div",{className:"sharePoint_cell",children:["Add files\xa0",Object(O.jsx)("i",{className:"fa  fa-sign-in clickable",onClick:function(){!function(){var e="https://macysinc.sharepoint.com/sites/OSO/2022inspRpt/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F2022inspRpt%2F".concat("SU").concat(i)+"MF"+n+"&dt="+(new Date).getTime(),t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null)}()}})]}):Object(O.jsx)("div",{className:"sharePoint_cell"}),Object(O.jsxs)("div",{className:"sharePoint_cell",children:["Instant View : \xa0\xa0",r?"Collapse":"Expand","\xa0",Object(O.jsx)("i",{className:"fa "+(r?"fa-minus":"fa-plus"),onClick:function(){!0===r?(l(!1),o([])):(l(!0),a())}}),"\xa0 \xa0",Object(O.jsx)("i",{id:"sharePoint_refresh",className:"fa fa-refresh",onClick:function(){r&&(o([]),a())}}),"\xa0 \xa0"]})]})]})},U=function(e){var t=e.sharePointFiles,i=e.downloadSharePointFile,n=e.showSharePointFiles,s=e.convertToLocal,a=e.editMode,l=e.handleDeleteSPfile,r=[".jpg",".png"];function o(e){for(var t=0;t<r.length;t++)if(e.toLowerCase().includes(r[t]))return!0;return!1}return Object(O.jsx)(c.Fragment,{children:n?Object(O.jsxs)("div",{className:"showSharePointFiles_section",children:[Object(O.jsxs)("div",{className:"showSharePointFiles_grid_header",children:[Object(O.jsx)("div",{children:"File Name"}),Object(O.jsx)("div",{children:"Last Editor"}),Object(O.jsx)("div",{children:"Last Edit Time"}),Object(O.jsx)("div",{children:"File Size"}),Object(O.jsx)("div",{children:"Download"}),Object(O.jsx)("div",{children:"File Type"}),Object(O.jsx)("div",{children:"Delete"})]}),Object(O.jsx)("div",{children:t.length>0?t.map((function(e){return"No files"===e.filename?Object(O.jsx)("div",{className:"sharePointFiles_no_files",children:e.filename}):Object(O.jsxs)("div",{className:"showSharePointFiles_grid_detail",children:[Object(O.jsx)("div",{children:e.filename}),Object(O.jsx)("div",{children:e.editor}),Object(O.jsx)("div",{children:s(e.modified)}),Object(O.jsx)("div",{children:e.size}),Object(O.jsx)("div",{children:Object(O.jsx)("i",{className:"fa fa-download",onClick:function(){i(e.filename)}})}),o(e.filename)?Object(O.jsx)("div",{className:"sharePointFiles_photoBlock",children:Object(O.jsx)("img",{src:"/showPhoto?folder="+e.folder+"&filename="+e.filename,alt:""})}):Object(O.jsx)("div",{children:Object(O.jsx)("i",{className:"fa fa-file"})}),a?Object(O.jsx)("div",{children:Object(O.jsx)("button",{id:"sharePointFiles_deleteButton",onClick:function(){l(e.unique_id)},children:"\xd7"})}):Object(O.jsx)("div",{children:"\xa0"})]},e.unique_id)})):null})]}):null})},B=i(185),q=function(e){var t=e.position;return Object(O.jsxs)(c.Fragment,{children:[1===t?Object(O.jsx)(C,{area:"getUserProfile",spinnerMessage:"Loading your profile, please wait... "}):null,2===t?Object(O.jsxs)("div",{children:[Object(O.jsx)(C,{area:"printReport",spinnerMessage:"Preparing the report, please wait... "}),Object(O.jsx)(C,{area:"saveInspection",spinnerMessage:"Saving the changes, please wait... "}),Object(O.jsx)(C,{area:"deleteInspection",spinnerMessage:"Deleting, please wait... "}),Object(O.jsx)(C,{area:"createInspection",spinnerMessage:"Loading, please wait... "})]}):null,3===t?Object(O.jsxs)("div",{children:[Object(O.jsx)(C,{area:"sharePointFiles",spinnerMessage:"Loading SharePoint info, please wait... "}),Object(O.jsx)(C,{area:"downloadSharePointfiles",spinnerMessage:"Downloading SharePoint info, please wait... "}),Object(O.jsx)(C,{area:"sharePointUpload",spinnerMessage:"Uploading file(s) to SharePoint, please wait... "})]}):null,10===t?Object(O.jsx)(C,{area:"pastInspection",spinnerMessage:"Loading past inspections, please wait... "}):null]})},H=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),i=t[0],n=t[1],s=Object(c.useState)(!1),l=Object(a.a)(s,2),r=l[0],o=l[1],j=Object(c.useState)([]),S=Object(a.a)(j,2),N=S[0],C=S[1],F=Object(c.useState)({position:100}),D=Object(a.a)(F,2),H=D[0],K=D[1],J=Object(c.useState)([]),Q=Object(a.a)(J,2),z=Q[0],G=Q[1],W=Object(c.useState)([]),V=Object(a.a)(W,2),Y=V[0],X=V[1],Z=Object(c.useState)(new Date),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ie=Object(c.useState)({mc:"",iteration:"Select",type:"Select"}),ce=Object(a.a)(ie,2),ne=ce[0],se=ce[1],ae=Object(c.useState)([]),le=Object(a.a)(ae,2),re=le[0],oe=le[1],de=Object(c.useState)([]),je=Object(a.a)(de,2),ue=je[0],he=je[1],be=Object(c.useState)(""),me=Object(a.a)(be,2),Oe=me[0],pe=me[1],fe=Object(c.useState)(""),xe=Object(a.a)(fe,2),ve=xe[0],_e=xe[1],ge=Object(c.useState)([]),ye=Object(a.a)(ge,2),Se=ye[0],Ne=ye[1],Ce=Object(c.useState)(""),ke=Object(a.a)(Ce,2),we=ke[0],Ie=ke[1],Te=Object(c.useState)([]),Me=Object(a.a)(Te,2),Pe=Me[0],Fe=Me[1],De=Object(c.useState)(""),Le=Object(a.a)(De,2),Re=Le[0],Ee=Le[1],Ae=Object(c.useState)(""),Ue=Object(a.a)(Ae,2),Be=Ue[0],qe=Ue[1],He=Object(c.useState)(!0),Ke=Object(a.a)(He,2),Je=Ke[0],Qe=Ke[1],ze=Object(c.useState)([]),Ge=Object(a.a)(ze,2),We=Ge[0],Ve=Ge[1],Ye=Object(c.useState)([]),Xe=Object(a.a)(Ye,2),Ze=Xe[0],$e=Xe[1],et=Object(c.useState)(!1),tt=Object(a.a)(et,2),it=tt[0],ct=tt[1],nt=Object(c.useState)({}),st=Object(a.a)(nt,2),at=st[0],lt=st[1],rt=Object(c.useState)({}),ot=Object(a.a)(rt,2),dt=ot[0],jt=ot[1],ut=Object(c.useState)(!1),ht=Object(a.a)(ut,2),bt=ht[0],mt=ht[1],Ot=Object(c.useState)([]),pt=Object(a.a)(Ot,2),ft=pt[0],xt=pt[1],vt=Object(c.useState)(0),_t=Object(a.a)(vt,2),gt=_t[0],yt=_t[1],St=Object(c.useState)(0),Nt=Object(a.a)(St,2),Ct=Nt[0],kt=Nt[1],wt=Object(c.useState)({}),It=Object(a.a)(wt,2),Tt=It[0],Mt=It[1],Pt=Object(c.useState)(!1),Ft=Object(a.a)(Pt,2),Dt=Ft[0],Lt=Ft[1],Rt=Object(c.useState)(0),Et=Object(a.a)(Rt,2),At=Et[0],Ut=Et[1],Bt=Object(c.useState)(0),qt=Object(a.a)(Bt,2),Ht=qt[0],Kt=qt[1],Jt=Object(c.useState)([]),Qt=Object(a.a)(Jt,2),zt=Qt[0],Gt=Qt[1],Wt=Object(c.useState)(!1),Vt=Object(a.a)(Wt,2),Yt=Vt[0],Xt=Vt[1],Zt=Object(c.useState)([]),$t=Object(a.a)(Zt,2),ei=$t[0],ti=$t[1],ii=Object(c.useState)(!1),ci=Object(a.a)(ii,2),ni=ci[0],si=ci[1],ai=Object(c.useState)([]),li=Object(a.a)(ai,2),ri=li[0],oi=li[1],di=Object(c.useState)("en"),ji=Object(a.a)(di,2),ui=ji[0],hi=ji[1],bi=Object(c.useState)([]),mi=Object(a.a)(bi,2),Oi=mi[0],pi=mi[1],fi=Object(c.useState)([]),xi=Object(a.a)(fi,2),vi=xi[0],_i=xi[1];function gi(e,t,i){if(0===i||isNaN(t))return 0;var c=e.filter((function(e){return e.size_start<=i&&e.size_end>=i})),n=t/i*c[0]["25sample"];return Math.round(n)}Object(c.useEffect)((function(){var e=document.querySelector(":root"),t=navigator.userAgent.toLowerCase();/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?e.style.setProperty("--changeTrack_scroll_width","7fr"):e.style.setProperty("--changeTrack_scroll_width","6.7fr"),t.includes("safari")&&t.includes("macintosh")&&e.style.setProperty("--changeTrack_scroll_width","7fr"),Object(y.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){he(e.userProfile),G(e.mcTable),Fe(e.partyTable),Ve(e.mfList),$e(e.aqlTable),oi(e.checkListTemplate)})).catch((function(e){console.log(e)})),"getUserProfile"),fetch("/api/getDefectTable",{method:"GET"}).then((function(e){return e.json()})).then((function(e){pi(e)})).catch((function(e){console.log(e)})),fetch("/api/getCriticalDefects",{method:"GET"}).then((function(e){return e.json()})).then((function(e){_i(e)})).catch((function(e){console.log(e)}))}),[]),Object(c.useEffect)((function(){var e,t,i,c=document.getElementsByClassName("itemTotal_Detail"),n=c.length,s=-1;for(t=0;t<n;t++)c[t].style.backgroundColor="#0746f54d";for(e=0;e<n;e++){c[e].firstElementChild.innerHTML.includes(we)&&""!==we&&(c[e].style.backgroundColor="yellow",-1===s&&(s=e))}for(s>0?(document.getElementById("scroller").scrollTo(0,0),i=document.getElementById("scroller").scrollHeight/n*s,document.getElementById("scroller").scrollBy(0,i)):(document.getElementsByName("itemTotal_searchString")[0].value="",document.getElementsByName("itemTotal_searchString")[0].placeholder=""),n=(c=document.getElementsByClassName("itemTable_Detail")).length,s=-1,t=0;t<n;t++)c[t].style.backgroundColor="#0746f54d";for(e=0;e<n;e++){c[e].children[1].innerHTML.includes(we)&&""!==we&&(c[e].style.backgroundColor="yellow",-1===s&&(s=e))}s>0&&(document.getElementById("itemTableScroller").scrollTo(0,0),i=document.getElementById("itemTableScroller").scrollHeight/n*s,document.getElementById("itemTableScroller").scrollBy(0,i))}),[we,i]),Object(c.useEffect)((function(){if(Dt){for(var e=i?i.map((function(e){return{item_no:e.item_no,ship_qty:e.ship_qty}})):null,t=i?e.reduce((function(e,t){return t.item_no in e?e[t.item_no].ship_qty=parseInt(e[t.item_no].ship_qty)+parseInt(t.ship_qty):e[t.item_no]=t,e}),{}):null,c=Object.keys(t).map((function(e){return t[e]})),n=0,s=0;s<c.length;s+=1)n+=c[s].ship_qty;var a=Object(m.a)(c);for(s=0;s<a.length;s+=1){var l=a[s].ship_qty,r=gi(Ze,l,n),o=r;a[s]=Object(b.a)(Object(b.a)({},a[s]),{},{sample_qty:r,inspect_qty:o})}xt(a),Lt(!1)}}),[i,Dt,Ze,gt]),Object(c.useEffect)((function(){for(var e="",t="",i="",c=0,n=0,s=0,a=0,l=0,r=0;r<N.length;r+=1)N[r].critical?l+=parseInt(N[r].major):parseInt(N[r].major)>0&&(s+=parseInt(N[r].major)),parseInt(N[r].minor)>0&&(a+=parseInt(N[r].minor));if(gt){var o=Ze.filter((function(e){return e.size_start<=gt&&e.size_end>=gt}));e=o[0]["25accept"].toString()+" / "+o[0]["40accept"].toString(),c=o[0]["25accept"],n=o[0]["40accept"]}l+s+a>0&&(t=" "+l.toString()+" / "+s.toString()+" / "+a.toString(),(s+Math.floor(a/4)>c||a>n)&&(i="Failed")),l>0&&(i="Failed"),"Failed"!==i&&t.length>0&&(i="Passed"),Mt({visual_result:i,defective_result:t,sample_threshold:e})}),[N,Ze,gt]);var yi=function(e,t){Pe.map((function(t){return t.SU===e?Ee(t.SU_NAME):null})),Pe.map((function(e){return e.MF===t?qe(e.MF_NAME):null}))},Si=function(e){z.map((function(t){return t.mc_no===e?(t.id=Object(B.a)(),n((function(e){return e.concat(t)}))):null})),yi(Oe,ve),Lt(!0),mt(!0),ct(!0),Di()},Ni=function(e){K(e),setTimeout((function(){K({position:100})}),e.timeout)},Ci=function(e){Object(y.trackPromise)(d()({url:"/api/search",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({_id:e})}).then((function(e){return e.data})).then((function(e){mt(!0),n(e.items),xt(e.itemsTotal),localStorage.setItem("items",JSON.stringify(e.items)),localStorage.setItem("itemsTotal",JSON.stringify(e.itemsTotal)),te(e.main.inspection_date?new Date(e.main.inspection_date):null),jt(e.main),lt(e.misc?e.misc:{}),void 0===e.misc.defectLanguage?hi("en"):hi(e.misc.defectLanguage),X(e.checkList),yi(e.main.su_no,e.main.mf_no),void 0===e.defects?C([]):C(e.defects),void 0===e.uploads?oe(""):oe(e.uploads),void 0===e.update_history?Gt([]):Gt(e.update_history),ti(!1),si(!1),Xt(!1)})).catch((function(e){406===e.response.status?Ni({message:"Not a valid MC for this manufacturer !",position:0,timeout:2e3,color:"alert__red"}):501===e.response.status?window.location="/login/timeout":Ni({message:"No such Inspection ID, please try again !",position:0,timeout:2e3,color:"alert__red"})})),"searchKey")},ki=function(){n([]),C([]),X([]),Ne([]),oe([]),o(!1),lt([]),Gt([]),mt(!1),ct(!1),Xt(!1),ti([]),si(!1),Xt(!0)},wi=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Ii=function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ni({message:"Session timeout, please login again !",position:0,timeout:3e3,color:"alert__red"}),e.next=3,wi(3e3);case 3:window.location="/login/timeout";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ti=function(e){o(!0),Object(y.trackPromise)(d()({url:"/api/searchInspByMC",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({mc:e,mfList:We})}).then((function(e){return e.data})).then((function(e){Ne(e),ti(!1)})).catch((function(e){501===e.response.status?Ii():Ni({message:"Something went wrong !",position:0,timeout:2e3,color:"alert__red"})})),"mfrSelection")};function Mi(e,t){for(var i=0;i<vi.length;i+=1)if(vi[i].product===e&&vi[i].defect_detail_code===t)return!0;return!1}function Pi(){return"Failed"===at.measurement_result||"Failed"===at.packing_result||"Failed"===Tt.visual_result?"Failed":""===Tt.visual_result?"":"Passed"}function Fi(e){var t=new Date(e).toTimeString();return new Date(e).toDateString()+" "+t}var Di=function(){var e=Object(m.a)(ri);e.sort((function(e,t){return e.id-t.id})),X(e)};return Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(M,{currentSU:Oe,currentMF:ve,currentSUName:Re,currentMFName:Be,setSelectingSupplier:Qe,setShowFull:mt}),Object(O.jsx)(P,{partyTable:Pe,setCurrentSU:pe,setCurrentMF:_e,setCurrentSUName:Ee,setCurrentMFName:qe,selectingSupplier:Je,setSelectingSupplier:Qe}),Object(O.jsx)(q,{position:1}),Object(O.jsx)(I,{handleSave:function(e){var t={su_no:Oe,mf_no:ve,inspection_date:ee.toDateString(),submitted:e},c={mc:ne.mc,iteration:ne.iteration,type:ne.type},n=Object(b.a)({},at);n=Object(b.a)(Object(b.a)({},n),{},{final_result:Pi(),visual_result:Tt,defectLanguage:ui,submitted:e}),Object(y.trackPromise)(d()({url:"/api/save",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:c,main:t,misc:n,mf:ve,checkList:Y,items:i,itemsTotal:ft,defects:N,uploads:re,updateHistory:zt})}).then((function(e){ki(),Ni({message:"Saved Successfully !",position:0,timeout:1e3,color:"alert__green"})})).catch((function(e){console.log(e.response.data),Ni({message:"There was an error in saving, please contact the admin !!",position:0,timeout:2e3,color:"alert__red"})})),"saveInspection")},handleSearch:Ci,inspectionID:ne,handleDelete:function(e){!0===window.confirm("Are you sure you want to delete this inspection ? ")&&Object(y.trackPromise)(d()({url:"/api/delete",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(ki(),Ni({message:"Deleted successfully !",position:0,timeout:1500,color:"alert__green"})):null})).catch((function(e){Ni({message:"Error deleting the inspection ID !",position:0,timeout:1500,color:"alert__red"})})),"deleteInspection")},printReport:function(e,t){void 0!==at.qa_type?(e="MMG Inspection Report - "+ne.mc+"-"+ne.iteration+"-"+ne.type+(t?" (Draft) ":"")+".xlsx",Object(y.trackPromise)(fetch("/printreport",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",inspectionID:JSON.stringify({inspectionID:ne})}}).then((function(e){return e.blob()})).then((function(t){var i=window.URL.createObjectURL(new Blob([t])),c=document.createElement("a");c.href=i,c.setAttribute("download",e),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)})),"printReport")):Ni({message:"QA Type must be chosen !",position:0,timeout:2e3,color:"alert__red"})},editMode:it,setEditMode:ct,userProfile:ue,main:dt,misc:at,showFull:bt,clearScreen:ki,updateHistory:zt}),Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsxs)(c.Fragment,{children:[Object(O.jsx)(w,{checkDuplicateID:function(e){Object(y.trackPromise)(d()({url:"/api/checkDuplicateID",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(t){return 200===t.status?void Ni({message:"This key has been used by previous inspection ! Please check and or consider a new iteration!",position:0,timeout:3e3,color:"alert__red"}):Si(e.mc)})),"createInspection")},mcTable:z,setDisplayAlert:Ni,inspectionID:ne,setInspectionID:se,clearScreen:ki,searchInspByMC:Ti,currentSU:Oe,currentMF:ve,editMode:it}),r?Object(O.jsx)(T,{inspectionID:ne,setInspectionID:se,handleSearch:Ci,searchInspByMC:Ti,searchedMC:Se,setShowSearchedMC:o,mcTable:z,currentSU:Oe,currentMF:ve}):null]})})}),0===H.position?Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsx)(_,{alert:H})})}):null,Object(O.jsx)(q,{position:2}),Object(O.jsx)("div",{className:"flex-row "+(bt?null:"hideSection"),children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsx)(c.Fragment,{children:Object(O.jsx)(R,{setInspectionDate:te,inspectionDate:ee,setMisc:lt,misc:at,editMode:it,isCriticalDefect:Mi,defects:N,aqlTable:Ze,shippedTotal:gt,visualResult:Tt,calculateFinalResult:Pi})})})}),Object(O.jsx)("div",{className:"flex-row "+(bt?null:"hideSection"),children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsx)(c.Fragment,{children:Object(O.jsx)(L,{setInspectionDate:te,inspectionDate:ee,setMisc:lt,misc:at,editMode:it})})})}),1===H.position?Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsx)(_,{alert:H})})}):null,Object(O.jsx)("div",{className:"flex-row "+(bt?null:"hideSection"),children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsxs)("div",{className:"itemTable_2col",children:[Object(O.jsx)(p,{items:i,deleteItem:function(e){},setItems:n,setDisplayAlert:Ni,mcTable:z,addMC:Si,editMode:it,currentSU:Oe,currentMF:ve}),Object(O.jsx)("div",{}),Object(O.jsx)(f,{items:i,deleteAllItems:function(e){n(i.filter((function(t){return t.item_no!==e}))),xt(ft.filter((function(t){return t.item_no!==e})))},setItemSearchString:Ie,aqlTable:Ze,editMode:it,showFull:bt,shippedTotal:gt,sampleTotal:Ct,itemsTotal:ft,getSampleSize:gi,setItemsTotal:xt,setShippedTotal:yt,setSampleTotal:kt,inspectTotal:At,setInspectTotal:Ut,setAqlSampleTotal:Kt,aqlSampleTotal:Ht,undoTable:function(){n(JSON.parse(localStorage.getItem("items"))),xt(JSON.parse(localStorage.getItem("itemsTotal")))},resetInspectQty:function(){for(var e=Object(m.a)(ft),t=0;t<e.length;t++){var i=gi(Ze,e[t].ship_qty,gt);e[t].sample_qty=i,e[t].inspect_qty=i}xt(e)},setDisplayAlert:Ni})]})})}),Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large "+(bt?null:"hideSection"),children:Object(O.jsx)(x,{items:i,addToDefectList:function(e,t,i,c,n,s,a,l){C((function(r){return r.concat({id:Object(B.a)(),product:e,defect_area:t,defect_detail:i,major:c,minor:n,defect_area_code:s,defect_detail_area:a,defect_language:l,critical:Mi(e,a)})}))},setDisplayAlert:Ni,editMode:it,defects:N,defectLanguage:ui,setDefectLanguage:hi,defectList:Oi})})}),2===H.position?Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsx)(_,{alert:H})})}):null,Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large "+(bt?null:"hideSection"),children:Object(O.jsx)(v,{defects:N,deleteDefect:function(e){C(N.filter((function(t){return t.id!==e})))},editMode:it,isCriticalDefect:Mi,defectLanguage:ui,defectList:Oi})})}),Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large "+(bt?null:"hideSection"),children:Object(O.jsx)(g,{checkList:Y,handleCheckItemChange:function(e,t){var i=Object(m.a)(Y),c=i.findIndex((function(t){return t.id===e}));i[c]=t,X(i)},editMode:it})})}),3===H.position?Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsx)(_,{alert:H})})}):null,Object(O.jsx)("div",{className:"flex-row "+(bt?null:"hideSection"),children:Object(O.jsxs)("div",{className:"flex-large ",children:[Object(O.jsx)(A,{currentSU:Oe,currentMF:ve,inspectionID:ne,editMode:it,getSharePointFiles:function(){Object(y.trackPromise)(d()({url:"/api/getsharepointfiles",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({folder:"SU"+Oe+"MF"+ve,inspection_id:ne.mc+"-"+ne.iteration+"-"+ne.type[0]})}).then((function(e){return e.data})).then((function(e){ti(e)})).catch((function(e){404===e.response.status&&Ni({message:"Folder on SharePoint was not created !",position:3,timeout:2e3,color:"alert__red"})})),"sharePointFiles")},setShowSharePointFiles:si,showSharePointFiles:ni,setSharePointFiles:ti}),Object(O.jsx)(q,{position:3})]})}),4===H.position?Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsx)("div",{className:"flex-large",children:Object(O.jsx)(_,{alert:H})})}):null,Object(O.jsx)("div",{className:"flex-row "+(bt?null:"hideSection"),children:Object(O.jsx)("div",{className:"flex-large ",children:Object(O.jsx)(U,{sharePointFiles:ei,downloadSharePointFile:function(e){var t="/sites/OSO/2022InspRpt/".concat("SU").concat(Oe)+"MF"+ve+"/"+e;Object(y.trackPromise)(fetch("/downloadSharePointFile",{method:"GET",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",file_url:t}}).then((function(e){return e.blob()})).then((function(t){var i=window.URL.createObjectURL(new Blob([t])),c=document.createElement("a");c.href=i,c.setAttribute("download",e),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)})),"downloadSharePointfiles")},showSharePointFiles:ni,convertToLocal:Fi,editMode:it,handleDeleteSPfile:function(e){!0===window.confirm("Are you sure you want to delete the SharePoint file ? ")&&Object(y.trackPromise)(d()({url:"/api/deleteSPfile",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(Ni({message:"Deleted successfully !",position:3,timeout:3500,color:"alert__green"}),document.getElementById("sharePoint_refresh").click()):null})).catch((function(e){Ni({message:"Error deleting the SP file !",position:4,timeout:1500,color:"alert__red"})})),"deleteInspection")}})})}),Object(O.jsx)("div",{className:"flex-row "+(bt?null:"hideSection"),children:Object(O.jsx)("div",{className:"flex-large ",children:Object(O.jsx)(k,{setDisplayAlert:Ni,inspectionID:ne,setUploads:oe,uploads:re,downloadDoc:function(e,t){return function(i){fetch("/download/"+e,{method:"GET",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment"}}).then((function(e){return e.blob()})).then((function(e){var i=window.URL.createObjectURL(new Blob([e])),c=document.createElement("a");c.href=i,c.setAttribute("download",t),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)}))}},editMode:it,currentSU:Oe,currentMF:ve,setShowSharePointFiles:si})})}),Object(O.jsx)("div",{className:"flex-row "+(bt?null:"hideSection"),children:Object(O.jsx)("div",{className:"flex-large ",children:Object(O.jsx)(E,{updateHistory:zt,showHistory:Yt,setShowHistory:Xt,convertToLocal:Fi})})}),Object(O.jsx)("div",{children:"\xa0"}),Object(O.jsx)("div",{children:"\xa0"})]})},K=function(e){var t=e.env;return Object(O.jsx)("div",{className:"welcome",children:Object(O.jsx)("div",{children:"DEV"===t?Object(O.jsx)("iframe",{src:"http://localhost:5000/map-marker",title:"map",style:{width:"100%",height:"103%",border:0}}):Object(O.jsx)("iframe",{src:"https://mmgapp2.herokuapp.com/map-marker",title:"map",style:{width:"100%",height:"103%",border:0}})})})},J=function(e){var t=Object(c.useState)([]),i=Object(a.a)(t,2),n=i[0],s=i[1];return Object(c.useEffect)((function(){return Object(y.trackPromise)(d()({url:"/api/pastXdaysResult",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){var t=function(e){return e.sort((function(e,t){return Date.parse(e.main.inspection_date)>Date.parse(t.main.inspection_date)?-1:1})),e}(e);s(t)})).catch((function(e){console.log(e)})),"pastInspection"),function(){s({})}}),[]),Object(O.jsxs)(c.Fragment,{children:[Object(O.jsxs)("div",{className:"xDaysResult",children:[n.length>0?Object(O.jsxs)("div",{className:"xDaysResult_gridHeader",children:[Object(O.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Inspection Date"}),Object(O.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Supplier"}),Object(O.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Manufacturer"}),Object(O.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Inspection ID"}),Object(O.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Result"}),Object(O.jsx)("div",{className:"xDaysResult_gridHeaderItem"})]}):null,n.length>0?n.map((function(e){return Object(O.jsxs)("div",{className:"xDaysResult_gridDetail",children:[Object(O.jsx)("div",{className:"xDaysResult_gridItem",children:(t=e.main.inspection_date,new Date(t).toDateString())}),Object(O.jsx)("div",{className:"xDaysResult_gridItem",children:e.main.su_no}),Object(O.jsx)("div",{className:"xDaysResult_gridItem",children:e.main.mf_no}),Object(O.jsxs)("div",{className:"xDaysResult_gridItem",children:[e._id.mc+"-"+e._id.iteration+"-"+e._id.type," "]}),Object(O.jsx)("div",{className:"xDaysResult_gridItem",children:e.misc.final_result}),Object(O.jsx)("div",{})]},e.id);var t})):null]}),Object(O.jsx)(q,{position:10})]})},Q=function(e){var t=e.userProfile;return Object(O.jsx)(c.Fragment,{children:Object(O.jsxs)("div",{className:"userProfile",children:[Object(O.jsxs)("div",{className:"userProfile_title",children:[Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:"static/img/macys-header.jpg","aria-hidden":!0,alt:"",width:"30",height:"30"})}),Object(O.jsx)("div",{children:"MMG Inspection App"})]}),Object(O.jsxs)("div",{className:"userProfile_personal",children:[Object(O.jsxs)("div",{className:"userProfile_name",children:[t.first_name?"Hi, "+t.first_name:null," "]}),Object(O.jsx)("div",{className:"userProfile_photo",children:t.email?t.email.includes("@macys.com")?Object(O.jsx)("img",{src:"/api/getPhoto","aria-hidden":!0,alt:"Searching for photo...",width:"60",height:"60"}):Object(O.jsx)("img",{src:"static/img/anonymous.jpg","aria-hidden":!0,alt:"No factory photo !!",width:"60",height:"60"}):Object(O.jsx)("div",{children:"Searching for photo..."})})]})]})})},z=function(){var e=Object(c.useState)({}),t=Object(a.a)(e,2),i=t[0],n=t[1];return Object(c.useEffect)((function(){Object(y.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){n(e.userProfile)})).catch((function(e){console.log(e)})))}),[]),Object(O.jsx)("div",{className:"container app_container",children:Object(O.jsx)("div",{className:"flex-row",children:Object(O.jsxs)("div",{className:"flex-large",children:[Object(O.jsx)(Q,{userProfile:i}),Object(O.jsxs)(l.a,{children:[Object(O.jsx)("nav",{children:Object(O.jsxs)("ul",{className:"app_header",children:[Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/",className:"link",children:"Home"})}),Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/appInspection",className:"link",children:"Inspection"})}),void 0!==i.email&&i.email.includes("macys.com")?Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/xDaysResult",className:"link",children:"Past Inspection Results"})}):null,void 0!==i.email&&i.email.includes("macys.com")?Object(O.jsx)("li",{className:"link",onClick:function(){!function(){var e=window.open("https://app.powerbi.com/reportEmbed?reportId=f0a7cd56-e22b-490a-9ad7-012d4a0d5251&autoAuth=true&filterPanelEnabled=False&pageName=ReportSectionf1be12cf083e1c0eba15","_blank","noopener,noreferrer");e&&(e.opener=null)}()},children:"Power BI"}):null,Object(O.jsx)("button",{className:"fa fa-sign-out",onClick:function(){localStorage.clear(),window.location="/logout"},children:"Logout"})]})}),Object(O.jsxs)(r.c,{children:[Object(O.jsx)(r.a,{path:"/",element:Object(O.jsx)(K,{env:i.environment})}),Object(O.jsx)(r.a,{path:"/appInspection",element:Object(O.jsx)(H,{})}),Object(O.jsx)(r.a,{path:"/xDaysResult",element:Object(O.jsx)(J,{})})]})]})]})})})};s.a.render(Object(O.jsx)(z,{}),document.getElementById("root"))},44:function(e,t,i){},66:function(e,t,i){},67:function(e,t,i){},68:function(e,t,i){},69:function(e,t,i){},70:function(e,t,i){},71:function(e,t,i){},72:function(e,t,i){},73:function(e,t,i){},74:function(e,t,i){},75:function(e,t,i){},76:function(e,t,i){},77:function(e,t,i){},78:function(e,t,i){},79:function(e,t,i){},80:function(e,t,i){},81:function(e,t,i){},83:function(e,t,i){},84:function(e,t,i){},85:function(e,t,i){},86:function(e,t,i){},87:function(e,t,i){},88:function(e,t,i){}},[[177,1,2]]]);
//# sourceMappingURL=main.0133cfd8.chunk.js.map