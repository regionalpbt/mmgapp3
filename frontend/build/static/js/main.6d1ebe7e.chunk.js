(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{177:function(e,t,c){"use strict";c.r(t);var i=c(1),n=c(23),s=c.n(n),a=(c(66),c(67),c(68),c(69),c(70),c(71),c(72),c(73),c(44),c(74),c(75),c(76),c(77),c(78),c(79),c(80),c(81),c(82),c(83),c(84),c(85),c(86),c(87),c(88),c(6)),l=c(27),r=c(7),o=c(11),d=c.n(o),j=c(43),u=c.n(j),h=c(55),b=c(4),m=c(10),p=c(0),O=function(e){var t=e.setItems,c=e.items,n=e.mcTable,s=e.addMC,l=e.currentSU,r=e.currentMF,o=e.setItemSearchString,d=e.editMode,j=e.setDisplayAlert,u=e.ship,h=e.setShip,O=e.poList,f=e.setPOList,x=e.totalShip,_=e.totalInspect,v=e.totalSample,g=(e.getLocal,Object(i.useState)("")),y=Object(a.a)(g,2),S=y[0],N=y[1];Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("itemTable_MCBtn").click())};return document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").addEventListener("keydown",e),function(){document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").removeEventListener("keydown",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("highLightItemBtn").click())},t=document.getElementById("itemTotal_searchString");if(t)return t.addEventListener("keydown",e),function(){t.removeEventListener("keydown",e)}}),[]);var C=function(e,t){var c=Object(m.a)(O);0===e&&"asc"===t?c.sort((function(e,t){return e.po_no>t.po_no?1:-1})):0===e&&"desc"===t?c.sort((function(e,t){return e.po_no<t.po_no?1:-1})):1===e&&"asc"===t?c.sort((function(e,t){return e.customer>t.customer?1:-1})):1===e&&"desc"===t&&c.sort((function(e,t){return e.customer<t.customer?1:-1})),f(c)},k=function(e){var t=e.target.value;N(t)},M=function(e){j({message:e,position:1,timeout:1500,color:"alert__red"})},w=function(e){return function(t){var c=t.target.value,i=Object(m.a)(u),n=i.findIndex((function(t){return t.item_no===e})),s=i.find((function(t){return t.item_no===e}));i[n]=Object(b.a)(Object(b.a)({},s),{},{inspect_qty:parseInt(c)}),h(i)}},P=function(){h((function(e){return e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{inspect_qty:e.sample_qty})}))}))};return Object(p.jsxs)("div",{className:"itemTable_2col",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"itemTable_Section",children:[Object(p.jsx)("div",{children:"Add MC:"}),"\xa0",Object(p.jsx)("div",{children:d?Object(p.jsx)("input",{type:"text",id:"itemTable_MC",name:"mc",justify:"left",placeholder:"Additional MC here",onChange:k}):Object(p.jsx)("input",{type:"text",id:"itemTable_MC",name:"mc",justify:"left",placeholder:"Include additional MC here",readOnly:!0,onChange:k})}),"\xa0\xa0",Object(p.jsx)("div",{children:d?Object(p.jsx)("i",{id:"itemTable_MCBtn",className:"fa fa-plus clickable",onClick:function(){!function(){var e=n.find((function(e){return e.mc_no===S})),t=c.find((function(e){return e.mc_no===S})),i=n.find((function(e){return e.mc_no===S&&e.su_no===l&&e.mf_no===r}));e?i?void 0===t?s(S):M("MC was already entered in the item list, please check ! "):M("This MC exists but not for this manufacturer!"):M("This MC doesn't exist")}()}}):null})]}),Object(p.jsxs)("div",{className:"itemTable_Header",children:[Object(p.jsxs)("div",{children:["PO#\xa0",Object(p.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){C(0,"asc")}}),"\xa0",Object(p.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){C(0,"desc")}})]}),Object(p.jsxs)("div",{children:["DIV\xa0",Object(p.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){C(1,"asc")}}),"\xa0",Object(p.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){C(1,"desc")}})]}),Object(p.jsx)("div",{children:"Order"}),Object(p.jsx)("div",{children:"Delete"}),Object(p.jsx)("div",{})]}),Object(p.jsx)("div",{id:"itemTableScroller",className:"itemTable_GridContainer",children:O?O.map((function(e,i){return Object(p.jsxs)("div",{className:"itemTable_Detail",children:[Object(p.jsx)("div",{children:e.po_no}),Object(p.jsx)("div",{children:e.customer}),Object(p.jsx)("div",{children:e.ship_qty}),Object(p.jsx)("div",{children:d?Object(p.jsx)("button",{onClick:function(i){return function(e){var i=Object(m.a)(c).filter((function(t){return t.po_no!==e})),n=Object(m.a)(O).filter((function(t){return t.po_no!==e}));t(i),f(n)}(e.po_no)},children:"x"}):null})]},i)})):null})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"itemTotal_Section",children:[Object(p.jsx)("div",{children:"Highlight item :"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"text",name:"itemTotal_searchString",id:"itemTotal_searchString",justify:"left",onInput:function(e){return e.target.value=(""+e.target.value).toUpperCase()},placeholder:"Enter item here"})}),Object(p.jsx)("div",{children:Object(p.jsx)("i",{className:"fa fa-search clickable",id:"highLightItemBtn",onClick:function(){o(document.getElementById("itemTotal_searchString").value)}})}),Object(p.jsxs)("div",{children:["Refresh Qty.\xa0",Object(p.jsx)("i",{className:"fa fa-angle-double-right itemTotal_arrow_color clickable",onClick:function(){P()}}),Object(p.jsx)("i",{className:"fa fa-angle-double-right  itemTotal_arrow_color clickable",onClick:function(){P()}})]}),Object(p.jsx)("div",{})]}),Object(p.jsxs)("div",{className:"itemTotal_Header",children:[Object(p.jsx)("div",{children:"By Item"}),Object(p.jsx)("div",{children:"Ship"}),Object(p.jsx)("div",{children:"Sample"}),Object(p.jsx)("div",{children:"Inspect"}),Object(p.jsx)("div",{children:"Delete"})]}),Object(p.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:u?u.map((function(e,c){return Object(p.jsxs)("div",{className:"itemTotal_Detail",children:[Object(p.jsx)("div",{children:e.item_no}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"number",id:"itemTotal_shipQty",name:"itemTotal_shipQty",value:e.ship_qty||1,min:"1",max:"15000",justify:"left",onChange:(i=e.item_no,function(e){var t=e.target.value;if(""!==t){parseInt(t)>2e4&&(t=2e4,j({message:"Number of ship units is too large!",position:1,timeout:3e3,color:"alert__red"}));var c=Object(m.a)(u),n=c.findIndex((function(e){return e.item_no===i})),s=c.find((function(e){return e.item_no===i}));c[n]=Object(b.a)(Object(b.a)({},s),{},{ship_qty:parseInt(t)}),h(c)}}),readOnly:d?"":"readOnly"})}),Object(p.jsx)("div",{children:e.sample_qty}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"number",id:"itemTotal_InspectQty",name:"itemTotal_InspectQty",value:e.inspect_qty||1,min:"1",max:"15000",justify:"left",onChange:w(e.item_no),readOnly:d?"":"readOnly"})}),Object(p.jsx)("div",{children:d?Object(p.jsx)("i",{className:"fa fa-times clickable",onClick:function(){!function(e){t((function(t){return t.filter((function(t){return t.item_no!==e}))}))}(e.item_no)}}):null})]},c);var i})):null}),Object(p.jsxs)("div",{className:"itemTotal_Total",children:[Object(p.jsx)("div",{children:" Total :"}),Object(p.jsx)("div",{children:x}),Object(p.jsx)("div",{children:v}),Object(p.jsx)("div",{className:v!==_?"highlightSection":null,children:_}),Object(p.jsx)("div",{})]})]})]})},f=function(e){var t=e.editMode,c=e.defects,n=e.setDisplayAlert,s=e.setDefectLanguage,l=e.defectLanguage,r=e.defectList,o=e.showFull,d=e.addToDefectList,j=Object(i.useState)("Select"),u=Object(a.a)(j,2),h=u[0],b=u[1],O=Object(i.useState)(""),f=Object(a.a)(O,2),x=f[0],_=f[1],v=Object(i.useState)(""),g=Object(a.a)(v,2),y=g[0],S=g[1],N=Object(i.useState)(""),C=Object(a.a)(N,2),k=C[0],M=C[1],w=Object(i.useState)(""),P=Object(a.a)(w,2),I=P[0],T=P[1],F=Object(i.useState)(""),D=Object(a.a)(F,2),L=D[0],E=D[1],R=Object(i.useState)(""),A=Object(a.a)(R,2),q=A[0],U=A[1],B=Object(i.useState)([]),H=Object(a.a)(B,2),K=H[0],J=H[1],Q=Object(i.useState)([]),G=Object(a.a)(Q,2),z=G[0],Y=G[1],W=Object(i.useCallback)((function(e,t){var c="";switch(e){case"defect":c=(c=(c=r.filter((function(e){return e.product===t&&e.lang===l}))).map((function(e){var t=e.defect_area,c=e.defect_code;return{code_area:"".concat(c,"~",t)}}))).map((function(e){return e.code_area})),c=Object(m.a)(new Set(c)).sort(),J(c);break;case"detail":var i=t.split("~")[0];c=(c=(c=r.filter((function(e){return e.product===h&&e.lang===l&&e.defect_code===i}))).map((function(e){var t=e.defect_detail_code,c=e.defect_detail;return{code_detail:"".concat(t,"~",c)}}))).map((function(e){return e.code_detail})),c=Object(m.a)(new Set(c)).sort(),Y(c)}}),[r,h,l]);Object(i.useEffect)((function(){h&&"Select"!==h&&W("defect",h)}),[h,W]),Object(i.useEffect)((function(){o?o&&c.length>0?b(c[0].product):o&&0===c.length&&(b(""),_("Select"),E(""),U(""),S(""),T("")):(_(""),S(""),E(""),U(""))}),[o,c]);return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsxs)("div",{className:"defectOption_header",children:[Object(p.jsx)("div",{children:"Language"}),Object(p.jsx)("div",{children:"\xa0\xa0\xa0\xa0"}),Object(p.jsx)("div",{children:Object(p.jsxs)("select",{className:"defectOption_language  clickable",onChange:function(e){var t=e.target.value;0!==r.filter((function(e){return e.product===h&&e.lang===t})).length?(s(t),_("Select"),Y([])):n({message:"No product selected or Language has NOT been set for this product !!",position:2,timeout:2500,color:"alert__red"})},value:l,children:[Object(p.jsx)("option",{value:"en",children:"English"}),Object(p.jsx)("option",{value:"zh",children:"Chinese"})]})})]}),Object(p.jsxs)("div",{className:"defectOption",children:[Object(p.jsx)("div",{className:"defectOption_product",children:Object(p.jsxs)("select",{onChange:function(e){var t=e.target.value;if(0!==r.filter((function(e){return e.product===t&&e.lang===l})).length){if("disabled"===(c.length>0?"disabled":null)){if(t!==c[0].product)return void n({message:"Product '"+c[0].product+"' has already been chosen !! Please empty all defects if you decide to change product ! ",position:2,timeout:2500,color:"alert__red"});document.getElementById("defectOptionsProduct").value=c[0].product,document.getElementById("defectOptionsDefectArea").value="Select",b(c[0].product)}else b(t);W("defect",t),_("Select"),E(""),U(""),S(""),T("")}else n({message:"No product selected or Language has NOT been set for this product !!",position:2,timeout:2500,color:"alert__red"})},id:"defectOptionsProduct",className:"clickable",value:h,children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),Object(p.jsx)("option",{value:"Fashion Jewelry",disabled:t?"":"disabled",children:"Fashion Jewelry"}),Object(p.jsx)("option",{value:"Footwear",disabled:t?"":"disabled",children:"Footware"}),Object(p.jsx)("option",{value:"Handbags",disabled:t?"":"disabled",children:"Handbags"}),Object(p.jsx)("option",{value:"Hardlines",disabled:t?"":"disabled",children:"Hardlines"}),Object(p.jsx)("option",{value:"Softlines",disabled:t?"":"disabled",children:"Softlines"})]})}),Object(p.jsx)("div",{className:"defectOption_defectArea",children:Object(p.jsxs)("select",{onChange:function(e){var t=e.target.value,c=t.split("~");S(c[0]),_(c[1]),W("detail",t),M("Select"),E(""),U("")},id:"defectOptionsDefectArea",className:"clickable",value:y+"~"+x,children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),K.map((function(e,c){return Object(p.jsx)("option",{value:e,disabled:t?"":"disabled",children:e},c)}))]})}),Object(p.jsx)("div",{className:"defectOption_defectDetail",children:Object(p.jsxs)("select",{onChange:function(e){var t=e.target.value.split("~");T(t[0]),M(t[1]),E(""),U("")},id:"defectOptionsDefectDetail",className:"clickable",value:I+"~"+k,children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),z.map((function(e,c){return Object(p.jsx)("option",{value:e,disabled:t?"":"disabled",children:e},c)}))]})}),Object(p.jsx)("div",{className:"defectOption_major",children:Object(p.jsx)("input",{type:"number",name:"major",placeholder:" Major",value:L,min:"0",max:"5",onChange:function(e){var t=e.target.value;E(t)},readOnly:t?"":"readOnly"})}),Object(p.jsx)("div",{className:"defectOption_minor",children:Object(p.jsx)("input",{type:"number",name:"minor",placeholder:" Minor",value:q,min:"0",max:"5",onChange:function(e){var t=e.target.value;U(t)},readOnly:t?"":"readOnly"})}),Object(p.jsx)("div",{children:t?Object(p.jsx)("button",{onClick:function(){!function(t){var c=isNaN(parseInt(L)),i=isNaN(parseInt(q));"Select"===h||"Select"===x||"Select"===k?e.setDisplayAlert({message:"Please make sure you select Product, Defect and Defect Detail ! ",position:2,timeout:2500,color:"alert__red"}):c||i||L<1&&q<1?e.setDisplayAlert({message:"Please make sure you enter either Major and Minor quantity ! ",position:2,timeout:2500,color:"alert__red"}):d(h,x,k,L,q,y,I,l)}()},children:"Add"}):null}),Object(p.jsx)("div",{})]})]})},x=function(e){var t=e.defects,c=e.editMode,n=e.isCriticalDefect,s=e.defectLanguage,a=e.defectList;function l(e,t,c){return a.filter((function(i){return i.product===e&&i.defect_code===t&&i.defect_detail_code===c&&i.lang===s}))[0]}return Object(p.jsx)(i.Fragment,{children:Object(p.jsxs)("div",{className:"defectList",children:[Object(p.jsxs)("div",{className:"defectList_gridHeader",children:[Object(p.jsx)("div",{children:"Product"}),Object(p.jsx)("div",{children:"Defect"}),Object(p.jsx)("div",{children:"Defect Detail"}),Object(p.jsxs)("div",{className:"defectList_major_header",children:["Major/",Object(p.jsx)("br",{}),"Critical"]}),Object(p.jsx)("div",{className:"defectList_minor_header",children:"Minor"}),Object(p.jsx)("div",{children:"Delete"})]}),t.length>0?t.map((function(t){return Object(p.jsxs)("div",{className:"defectList_gridDetail",children:[Object(p.jsx)("div",{className:"defectList_gridItem defectList_product",children:t.product}),Object(p.jsx)("div",{className:"defectList_gridItem defectList_defectArea",children:t.defect_area_code+"~"+l(t.product,t.defect_area_code,t.defect_detail_area).defect_area}),Object(p.jsx)("div",{className:"defectList_gridItem  defectList_defectDetail",style:{color:n(t.product,t.defect_detail_area)?"red":"inherit"},children:Object(p.jsx)("span",{children:t.defect_detail_area+"~"+l(t.product,t.defect_area_code,t.defect_detail_area).defect_detail})}),Object(p.jsx)("div",{className:"defectList_major",children:t.major}),Object(p.jsx)("div",{className:"defectList_minor",children:t.minor}),Object(p.jsx)("div",{className:"defectList_deleteButton",children:c?Object(p.jsx)("button",{onClick:function(){e.deleteDefect(t.id)},children:"\xd7"}):null}),Object(p.jsx)("div",{})]},t.id)})):Object(p.jsx)("div",{children:Object(p.jsx)("div",{colSpan:3,children:"No Defects"})})]})})},_=function(e){var t=e.alert,c="alert ".concat(t.color);return Object(p.jsx)("h5",{className:c,children:t.message})},v=function(e){var t=e.editMode,c=e.checkList;c.sort((function(e,t){return e.id-t.id}));var i=function(c,i){var n=[];if(t){var s=(n=88===c?["Select","Yes","No","Select"]:["Select","OK","NA","X","NI"]).findIndex((function(e){return e===i.result}));4===s?s=1:s+=1;var a=n[s];e.handleCheckItemChange(c,Object(b.a)(Object(b.a)({},i),{},{result:a}))}};return Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(p.jsx)("div",{className:"checkList_header",children:"Basic Check List"}),Object(p.jsxs)("div",{className:"checkFormGrid",children:[Object(p.jsx)("div",{children:Object(p.jsxs)("table",{id:"checkListTable",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{width:"40%",children:"Category"}),Object(p.jsx)("th",{width:"40%",children:"Item"}),Object(p.jsx)("th",{width:"20%",children:"Result"})]})}),Object(p.jsx)("tbody",{children:c?c.filter((function(e){return e.id>0&&e.id<=42})).map((function(e){return Object(p.jsxs)("tr",{children:[e.category?Object(p.jsx)("td",{children:e.category}):null,e.category?Object(p.jsx)("td",{children:e.item}):0===e.id?Object(p.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(p.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(p.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(p.jsx)("td",{className:"clickable checkCellResult",onClick:function(){i(e.id,e)},children:e.result}):null]},e.id)})):null})]})}),Object(p.jsx)("div",{className:"checkFormGridCell",children:Object(p.jsxs)("table",{id:"checkListTable",className:"fixed",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{width:"40%",children:"Category"}),Object(p.jsx)("th",{width:"40%",children:"Item"}),Object(p.jsx)("th",{width:"20%",children:"Result"})]})}),Object(p.jsx)("tbody",{children:c?c.filter((function(e){return e.id>=43&&e.id<=68})).map((function(e){return Object(p.jsxs)("tr",{children:[e.category?Object(p.jsx)("td",{children:e.category}):null,e.category?Object(p.jsx)("td",{children:e.item}):0===e.id?Object(p.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(p.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(p.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(p.jsx)("td",{className:"clickable checkCellResult",onClick:function(){i(e.id,e)},children:e.result}):null]},e.id)})):null})]})}),Object(p.jsx)("div",{className:"checkFormGridCell",children:Object(p.jsxs)("table",{id:"checkListTable",className:"fixed",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{width:"40%",children:"Category"}),Object(p.jsx)("th",{width:"40%",children:"Item"}),Object(p.jsx)("th",{width:"20%",children:"Result"})]})}),Object(p.jsx)("tbody",{children:c?c.filter((function(e){return e.id>=81})).map((function(e){return Object(p.jsxs)("tr",{children:[e.category?Object(p.jsx)("td",{children:e.category}):null,e.category?Object(p.jsx)("td",{children:e.item}):0===e.id?Object(p.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(p.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(p.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(p.jsx)("td",{className:"clickable checkCellResult",onClick:function(){i(e.id,e)},children:e.result}):null]},e.id)})):null})]})})]})]})},g=c(8),y=function(e){var t=e.setDisplayAlert,c=e.inspectionID,n=e.editMode,s=e.currentSU,l=e.currentMF,r=e.setShowSharePointFiles,o=e.sharePointPath,j=e.inspectionDate,u=Object(i.useState)(),h=Object(a.a)(u,2),b=h[0],m=h[1],O=function(e){t({message:e,position:3,timeout:3e3,color:"alert__red"})};return Object(p.jsx)(i.Fragment,{children:Object(p.jsx)("div",{className:"uploadDoc",children:n?Object(p.jsxs)("form",{children:[Object(p.jsx)("input",{type:"file",multiple:!0,name:"file",id:"sharePoint_file",onChange:function(e){m({file:e.target.files})}}),Object(p.jsx)("button",{type:"button",onClick:function(e){var i=new FormData;try{for(var n=b.file,a=0;a<n.length;a++)i.append("files[]",n[a]);var u=j.getMonth()+1+"/"+j.getDate()+"/"+j.getFullYear();Object(g.trackPromise)(d()({url:"/api/upload",method:"POST",data:i,headers:{inspection_id:c.mc+"-"+c.iteration+"-"+c.type.charAt(0),relative_url:o.concat("/","SU",s,"MF",l),inspection_date:u}}).then((function(e){for(var t=0;t<e.data.length;t++)r(!0);document.getElementById("sharePoint_file").value=null,document.getElementById("sharePoint_refresh").click()})).catch((function(e){t({message:"Exceed a size limit of upload !!",position:3,timeout:4e3,color:"alert__red"})})),"sharePointUpload")}catch(h){O("Please select files and try again !!")}},children:"Upload files"})]}):null})})},S=c(56),N=c.n(S),C=function(e){var t=Object(g.usePromiseTracker)({area:e.area}).promiseInProgress,c=e.spinnerMessage;return t&&Object(p.jsxs)("div",{style:{marginTop:"0.5rem",width:"100%",height:"30",display:"flex",justifyContent:"center",alignItems:"center",color:"green",fontWeight:"bold"},children:[c,Object(p.jsx)(N.a,{type:"Circles",color:"green",height:"30",width:"100"})]})},k=function(e){var t=e.checkDuplicateID,c=e.mcTable,n=e.setDisplayAlert,s=e.inspectionID,a=e.setInspectionID,l=e.clearScreen,r=e.searchInspByMC,o=e.currentMF,d=e.currentSU,j=e.editMode,u=e.inspType,h=e.showFull,m=function(e){var t=e.target.id,c=e.target.value;switch(t){case"searchKey_mc":a(Object(b.a)(Object(b.a)({},s),{},{mc:c})),c.length>=3?r(c):l();break;case"searchKey_iteration":a(Object(b.a)(Object(b.a)({},s),{},{iteration:c}));break;case"searchKey_type":a(Object(b.a)(Object(b.a)({},s),{},{type:c}))}};var O=function(e){n({message:e,position:0,timeout:3e3,color:"alert__red"})};return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsxs)("div",{className:"searchKey",children:[Object(p.jsxs)("div",{className:"searchKey_pair",children:[Object(p.jsx)("label",{children:"MC# : "}),Object(p.jsx)("input",{type:"text",name:"searchKey_mc",id:"searchKey_mc",onChange:m,readOnly:h?"readOnly":""})]}),Object(p.jsxs)("div",{className:"searchKey_pair",children:[Object(p.jsx)("label",{children:"Iteration : "}),Object(p.jsx)("input",{type:"number",name:"searchKey_iteration",id:"searchKey_iteration",placeholder:"Iteration",min:"1",max:"9",onChange:m,readOnly:h?"readOnly":""})]}),Object(p.jsxs)("div",{className:"searchKey_pair",children:[Object(p.jsx)("label",{children:"Type : "}),Object(p.jsxs)("select",{name:"searchKey_type",id:"searchKey_type",onChange:m,children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),u&&u.map((function(e){return Object(p.jsx)("option",{value:e.insp_type,disabled:h?"disabled":"",children:e.insp_type_long},e.insp_type)}))]})]}),Object(p.jsx)("div",{}),j?null:Object(p.jsx)("div",{children:""!==s.mc&&"Select"!==s.iteration&&""!==s.iteration&&"Select"!==s.type?Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:function(){!function(e){l();var i=c.find((function(t){return t.mc_no===e.mc})),n=c.find((function(t){return t.mc_no===e.mc&&t.su_no===d&&t.mf_no===o}));i?n?t(e):O("This MC exists but not for this manufacturer!"):O("This MC doesn't exist")}(s)},children:"Create Inspection"})}):null})]}),Object(p.jsx)(C,{area:"searchKey"})]})},M=function(e){var t=e.handleSave,c=e.handleDelete,n=e.handleSearch,s=e.inspectionID,a=e.printReport,l=e.editMode,r=e.setEditMode,o=e.userProfile,d=e.misc,j=e.showFull,u=e.clearScreen,h=e.updateHistory,b=d.submitted,m=void 0!==o.ignore_submit&&o.ignore_submit,O=function(e){var i=e.target.id;r(!1),"save"===i&&t(!!b),"edit"===i&&r(!0),"delete"===i&&c(s),"search"===i&&(r(!1),n(s)),"print"===i&&a("Inspection_Report.xlsx",!1),"print_draft"===i&&a("Inspection_Report.xlsx",!0),"cancel"===i&&(r(!1),u())};return Object(p.jsx)(i.Fragment,{children:Object(p.jsxs)("div",{className:"mainMenu",children:[Object(p.jsxs)("div",{className:"mainMenu_inspectionKey",children:["Inspection Key : \xa0\xa0",b&&j?Object(p.jsx)("i",{className:"fa fa-lock mainMenu_lock clickable",onClick:function(){m?!0===window.confirm("Are you sure you want to unlock this inspeciton ? ")&&t(!1):alert("You have no rights to unlock this inspeciton !")}}):null,!b&&j?Object(p.jsx)("i",{className:"fa fa-unlock mainMenu_unlock clickable",onClick:function(){!0===window.confirm("Are you sure you want to submit or lock this inspeciton ? ")&&t(!0)}}):null]}),l?Object(p.jsx)("button",{id:"save",onClick:O,children:"Save"}):null,l?null:Object(p.jsx)("button",{id:"search",onClick:O,children:"Search"}),l||!j||b&&!m?null:Object(p.jsxs)("button",{id:"edit",onClick:O,children:["Edit\xa0",b&&j?Object(p.jsx)("i",{className:"fa fa-lock"}):null]}),!j||b&&!m?null:Object(p.jsx)("button",{id:"cancel",onClick:O,children:"Cancel"}),!l&&b?Object(p.jsx)("button",{id:"print",onClick:O,children:"Print"}):null,l||b||!j?null:Object(p.jsx)("button",{id:"print_draft",onClick:O,children:"Print Draft"}),j&&m&&j&&h.length>0?Object(p.jsx)("button",{id:"delete",onClick:O,className:"deleteButton",children:"Delete"}):null]})})},w=function(e){for(var t=e.setInspectionID,c=e.handleSearch,n=e.searchedMC,s=e.setShowSearchedMC,a=e.mcTable,l=e.currentSU,r=e.currentMF,o=[],d=function(){var e=n[j].mc;a.find((function(t){return t.mc_no===e&&t.su_no===l&&t.mf_no===r}))&&o.push(n[j])},j=0;j<n.length;j++)d();return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsxs)("div",{className:"searchedMC",children:[Object(p.jsxs)("div",{className:"searchedMC_header1 searchedMC_header",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:"MC"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(p.jsxs)("div",{className:"searchedMC_header2 searchedMC_header",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:"MC"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(p.jsxs)("div",{className:"searchedMC_header3 searchedMC_header",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:"MC"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),o.length>0?o.map((function(e){return Object(p.jsxs)("div",{className:"searchedMC_detail",onClick:function(){var i;i={mc:e.mc,iteration:e.iteration,type:e.type},t(i),c(i),document.getElementById("searchKey_mc").value=i.mc,document.getElementById("searchKey_iteration").value=i.iteration,document.getElementById("searchKey_type").value=i.type,s(!1)},children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:e.mc}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:e.iteration}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:e.type})]},e.id)})):null]}),Object(p.jsx)(C,{area:"mfrSelection"})]})},P=function(e){var t=e.currentSU,c=e.currentMF,n=e.currentSUName,s=e.currentMFName,a=e.setSelectingSupplier,l=e.setShowFull,r=e.setMFRsearch;return Object(p.jsx)(i.Fragment,{children:t?Object(p.jsxs)("div",{className:"supplierInfo",children:[Object(p.jsx)("button",{onClick:function(){l(!1),r(""),a(!0)},children:"Select"}),Object(p.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoSU",id:"supplierInfo_bar",children:[n.toLowerCase()," (",t,")"]}),Object(p.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoMF",children:[s.toLowerCase()," (",c,")"]})]}):null})},I=function(e){var t=e.partyTable,c=e.setCurrentSU,n=e.setCurrentMF,s=e.setCurrentSUName,a=e.setCurrentMFName,l=e.selectingSupplier,r=e.setSelectingSupplier,o=e.setMFRsearch,d=e.mfrSearch,j=e.getMCtable;return Object(p.jsxs)(i.Fragment,{children:[t&&l?Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"mfrSelection_header",children:" Select a manufacturer below:"}),Object(p.jsx)("div",{className:"mfrSelection_input",children:Object(p.jsx)("input",{type:"text",id:"mfrSearch",name:"mfrSearch",value:d||"",justify:"left",onChange:function(e){var t=e.target.value;o(t.toUpperCase())},style:{textTransform:"uppercase"},placeholder:"Type to search"})})]}):null,t&&l?t.filter((function(e){return 0===d.length||"".concat(" ",e.SU_NAME," ",e.SU," ",e.MF," ",e.MF_NAME).search(d)>0})).map((function(e){return Object(p.jsxs)("div",{className:"mfrSelection",onClick:function(){var t,i,l,o;t=e.SU,i=e.MF,l=e.SU_NAME,o=e.MF_NAME,c(t),n(i),s(l),a(o),r(!1),j(t,i)},children:[Object(p.jsxs)("div",{className:"mfrSelectionSU",children:[e.SU_NAME," (",e.SU,")"," "]}),Object(p.jsxs)("div",{className:"mfrSelectionMF",children:[e.MF_NAME," (",e.MF,")"," "]})]},e.SU.concat(e.MF))})):null]})},T=c(57),F=c.n(T),D=function(e){var t=e.setInspectionDate,c=e.inspectionDate,i=e.setMisc,n=e.misc,s=e.editMode,a=e.mqaMembers,l=e.packTypes,r=e.userProfile,o=e.productCategories,d=function(e,t){return function(c){var s=c.target.value;if(n){var a=Object(b.a)({},n);switch(e){case 2:a=Object(b.a)(Object(b.a)({},a),{},{product_type:s});break;case 3:a=Object(b.a)(Object(b.a)({},a),{},{lab_test_report:s});break;case 4:a=Object(b.a)(Object(b.a)({},a),{},{lab_child_safety_report:s});break;case 5:a=Object(b.a)(Object(b.a)({},a),{},{fibre_content:s});break;case 6:a=Object(b.a)(Object(b.a)({},a),{},{comments:s});break;case 7:a=Object(b.a)(Object(b.a)({},a),{},{governance_inspection:t});break;case 8:a=Object(b.a)(Object(b.a)({},a),{},{props65_report:s});break;case 9:a=Object(b.a)(Object(b.a)({},a),{},{ship_mode:s});break;case 10:a=Object(b.a)(Object(b.a)({},a),{},{pack_pct:s});break;case 11:a=Object(b.a)(Object(b.a)({},a),{},{ship_window:s});break;case 12:a=Object(b.a)(Object(b.a)({},a),{},{carton_list:s});break;case 13:a=Object(b.a)(Object(b.a)({},a),{},{carton_total:s});break;case 14:a=Object(b.a)(Object(b.a)({},a),{},{pack_type:s});break;case 15:a=Object(b.a)(Object(b.a)({},a),{},{qa_type:s}),"SQA"===s&&(a=Object(b.a)(Object(b.a)({},a),{},{sqa:r.email}));break;case 16:a=Object(b.a)(Object(b.a)({},a),{},{mqa:s});break;case 17:a=Object(b.a)(Object(b.a)({},a),{},{sqa:s});break;case 18:a=Object(b.a)(Object(b.a)({},a),{},{correlation_inspection:t});break;case 19:a=Object(b.a)(Object(b.a)({},a),{},{product_category:s});break;default:console.log("No element")}i(a)}}};return Object(p.jsxs)("div",{className:"misc",children:[Object(p.jsx)("div",{className:"misc_a",children:Object(p.jsxs)("div",{className:"misc_title misc_grid_a",children:[Object(p.jsx)("div",{children:"Inspection Date (A)"}),Object(p.jsx)(F.a,{className:"datePicker",dateFormat:"MM/dd/yy",selected:c,onChange:function(e){return function(e){t(e)}(e)},readOnly:s?"":"readOnly"})]})}),Object(p.jsxs)("div",{className:"misc_g misc_grid_g",children:[Object(p.jsx)("div",{className:"misc_title",children:"Governance Inspection (G)"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"radio",id:"misc_governance_inspection_yes",name:"misc_governance_inspection",value:n.governance_inspection||"",checked:"Yes"===n.governance_inspection,onChange:d(7,"Yes"),disabled:s?"":"disabled"})}),Object(p.jsx)("div",{children:"Yes"}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"radio",id:"misc_governance_inspection_no",name:"misc_governance_inspection",value:n.governance_inspection||"",checked:"No"===n.governance_inspection,onChange:d(7,"No"),disabled:s?"":"disabled"})}),Object(p.jsx)("div",{children:"No"})]}),Object(p.jsxs)("div",{className:"misc_j misc_grid_j",children:[Object(p.jsx)("div",{className:"misc_title",children:"Pack % During Inspection (J)"}),Object(p.jsx)("input",{type:"text",id:"misc_packPct",name:"misc_packPct",value:n.pack_pct||"",justify:"left",placeholder:"%",onChange:d(10),readOnly:s?"":"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_k misc_grid_k",children:[Object(p.jsx)("div",{className:"misc_title",children:"Ship Window (K)"}),Object(p.jsx)("input",{type:"text",id:"misc_shipWindow",name:"misc_shipWindow",value:n.ship_window||"",justify:"left",placeholder:"Ship Window",onChange:d(11),readOnly:s?"":"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_b misc_grid_b",children:[Object(p.jsx)("div",{className:"misc_title",children:"Product Type (B)"}),Object(p.jsx)("input",{type:"text",id:"misc_productType",name:"misc_productType",value:n.product_type||"",justify:"left",placeholder:"Product Type",onChange:d(2),readOnly:s?"":"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_o misc_grid_o",children:[Object(p.jsx)("div",{className:"misc_title",children:"QA Type (O)"}),Object(p.jsxs)("select",{id:"misc_qaType",name:"misc_qaType",value:n.qa_type||"Select",justify:"left",placeholder:"QA Type",onChange:d(15),children:[Object(p.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(p.jsx)("option",{value:"MQA",disabled:s?"":"disabled",children:"MQA"}),Object(p.jsx)("option",{value:"SQA",disabled:s?"":"disabled",children:"SQA"})]})]}),Object(p.jsxs)("div",{className:"misc_c misc_grid_c",children:[Object(p.jsx)("div",{className:"misc_title",children:"Lab Test Report (C)"}),Object(p.jsxs)("select",{id:"misc_labTest",name:"misc_labTest",value:n.lab_test_report||"Select",justify:"left",placeholder:"Test result",onChange:d(3),children:[Object(p.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(p.jsx)("option",{value:"N/A",disabled:s?"":"disabled",children:"N/A"}),Object(p.jsx)("option",{value:"Pending",disabled:s?"":"disabled",children:"Pending"}),Object(p.jsx)("option",{value:"Pass",disabled:s?"":"disabled",children:"Pass"}),Object(p.jsx)("option",{value:"Fail",disabled:s?"":"disabled",children:"Fail"})]})]}),Object(p.jsxs)("div",{className:"misc_d misc_grid_d",children:[Object(p.jsx)("div",{className:"misc_title",children:"Child Safety Report (D)"}),Object(p.jsxs)("select",{id:"misc_childSafetyReport",name:"misc_childSafetyReport",value:n.lab_child_safety_report||"Select",justify:"left",placeholder:" ",onChange:d(4),children:[Object(p.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(p.jsx)("option",{value:"N/A",disabled:s?"":"disabled",children:"N/A"}),Object(p.jsx)("option",{value:"Pending",disabled:s?"":"disabled",children:"Pending"}),Object(p.jsx)("option",{value:"Accept",disabled:s?"":"disabled",children:"Accept"}),Object(p.jsx)("option",{value:"Reject",disabled:s?"":"disabled",children:"Reject"})]})]}),Object(p.jsxs)("div",{className:"misc_h misc_grid_h",children:[Object(p.jsx)("div",{className:"misc_title",children:"Props 65 Report (H)"}),Object(p.jsxs)("select",{id:"misc_props65Report",name:"misc_props65Report",value:n.props65_report||"Select",justify:"left",placeholder:" ",onChange:d(8),children:[Object(p.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(p.jsx)("option",{value:"N/A",disabled:s?"":"disabled",children:"N/A"}),Object(p.jsx)("option",{value:"Pending",disabled:s?"":"disabled",children:"Pending"}),Object(p.jsx)("option",{value:"Accept",disabled:s?"":"disabled",children:"Accept"}),Object(p.jsx)("option",{value:"Reject",disabled:s?"":"disabled",children:"Reject"})]})]}),Object(p.jsxs)("div",{className:"misc_i misc_grid_i",children:[Object(p.jsx)("div",{className:"misc_title",children:"Ship Mode (I)"}),Object(p.jsxs)("select",{id:"misc_shipMode",name:"misc_shipMode",value:n.ship_mode||"Select",justify:"left",placeholder:" ",onChange:d(9),children:[Object(p.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(p.jsx)("option",{value:"Ocean",disabled:s?"":"disabled",children:"Ocean"}),Object(p.jsx)("option",{value:"Air",disabled:s?"":"disabled",children:"Air"})]})]}),Object(p.jsxs)("div",{className:"misc_s misc_grid_s",children:[Object(p.jsx)("div",{className:"misc_title",children:"Brand (S)"}),Object(p.jsx)("input",{type:"text",id:"misc_label",name:"misc_label",value:n.label||"",justify:"left",readOnly:"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_e misc_grid_e",children:[Object(p.jsx)("div",{className:"misc_title",children:"Fibre Content (E)"}),Object(p.jsx)("input",{type:"text",id:"misc_fibreContent",name:"misc_fibreContent",value:n.fibre_content||"",justify:"left",placeholder:"Fibre Content",onChange:d(5),readOnly:s?"":"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_f misc_grid_f",children:[Object(p.jsx)("div",{className:"misc_title",children:"Comments (F)"}),Object(p.jsx)("textarea",{rows:"5",cols:"50",id:"misc_comments",name:"misc_comments",value:n.comments||"",justify:"left",placeholder:"Comments",onChange:d(6),readOnly:s?"":"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_l misc_grid_l",children:[Object(p.jsx)("div",{className:"misc_title",children:"Carton List (L)"}),Object(p.jsx)("textarea",{rows:"3",cols:"50",id:"misc_cartonList",name:"misc_cartonList",value:n.carton_list||"",justify:"left",placeholder:"Carton List",onChange:d(12),readOnly:s?"":"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_m misc_grid_m",children:[Object(p.jsx)("div",{className:"misc_title",children:"Carton Total (M)"}),Object(p.jsx)("input",{type:"text",id:"misc_cartonTotal",name:"misc_cartonTotal",value:n.carton_total||"",justify:"left",placeholder:"Carton Total",onChange:d(13),readOnly:s?"":"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_i misc_grid_i",children:[Object(p.jsx)("div",{className:"misc_title",children:"Ship Mode (I)"}),Object(p.jsxs)("select",{id:"misc_shipMode",name:"misc_shipMode",value:n.ship_mode||"Select",justify:"left",placeholder:" ",onChange:d(9),children:[Object(p.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(p.jsx)("option",{value:"Ocean",disabled:s?"":"disabled",children:"Ocean"}),Object(p.jsx)("option",{value:"Air",disabled:s?"":"disabled",children:"Air"})]})]}),Object(p.jsxs)("div",{className:"misc_p misc_grid_p",children:[Object(p.jsx)("div",{className:"misc_title",children:"MQA"===n.qa_type||void 0===n.qa_type?Object(p.jsx)("span",{children:"MQA (P)"}):Object(p.jsx)("span",{children:"SQA (P)"})}),"MQA"===n.qa_type||void 0===n.qa_type?Object(p.jsxs)("select",{id:"misc_mqa",name:"misc_mqa",value:n.mqa||"Select",justify:"left",placeholder:" ",onChange:d(16),children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),a&&a.map((function(e){return Object(p.jsx)("option",{value:e.mqa,disabled:s?"":"disabled",children:e.mqa},e.mqa)}))]}):Object(p.jsx)("input",{type:"text",id:"misc_sqa",name:"misc_sqa",value:n.sqa||"",justify:"left",placeholder:"Inspector",onChange:d(17),readOnly:"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_n misc_grid_n",children:[Object(p.jsx)("div",{className:"misc_title",children:"Pack Type (N)"}),Object(p.jsxs)("select",{id:"misc_pack_type",name:"misc_pack_type",value:n.pack_type||"Select",justify:"left",placeholder:" ",onChange:d(14),children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),l&&l.map((function(e){return Object(p.jsx)("option",{value:e.type,disabled:s?"":"disabled",children:e.type},e.type)}))]})]}),Object(p.jsxs)("div",{className:"misc_q misc_grid_q",children:[Object(p.jsx)("div",{className:"misc_title",children:"Correlation Inspection (Q)"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"radio",id:"misc_correlation_yes",name:"misc_correlation_inspection",value:n.correlation_inspection||"",checked:"Yes"===n.correlation_inspection,onChange:d(18,"Yes"),disabled:s?"":"disabled"})}),Object(p.jsx)("div",{children:"Yes"}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"radio",id:"misc_correlation_inspection_no",name:"misc_correlation_inspection",value:n.correlation_inspection||"",checked:"No"===n.correlation_inspection,onChange:d(18,"No"),disabled:s?"":"disabled"})}),Object(p.jsx)("div",{children:"No"})]}),Object(p.jsxs)("div",{className:"misc_r misc_grid_r",children:[Object(p.jsx)("div",{className:"misc_title",children:"Product Category (R)"}),Object(p.jsxs)("select",{id:"misc_product_category",name:"misc_product_category",value:n.product_category||"Select",justify:"left",placeholder:" ",onChange:d(19),children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),o&&o.map((function(e){return Object(p.jsx)("option",{value:e.category,disabled:s?"":"disabled",children:e.category},e.category)}))]})]})]})},L=function(e){var t=e.setMisc,c=e.misc,n=e.editMode,s=e.visualResult,a=e.calculateFinalResult;function l(e){return"Failed"===e.packing_result||"Failed"===e.measurement_result|"Failed"===s?"Failed":"Passed"}var r=function(e,i){return function(i){var n=i.target.value;if(c){var s=Object(b.a)({},c);switch(e){case 1:s=Object(b.a)(Object(b.a)({},s),{},{packing_result:n}),s="Failed"===n?Object(b.a)(Object(b.a)({},s),{},{final_result:"Failed"}):Object(b.a)(Object(b.a)({},s),{},{final_result:l(s)});break;case 2:s=Object(b.a)(Object(b.a)({},s),{},{measurement_result:n}),s="Failed"===n?Object(b.a)(Object(b.a)({},s),{},{final_result:"Failed"}):Object(b.a)(Object(b.a)({},s),{},{final_result:l(s)});break;default:console.log("No element")}t(s)}}};return Object(p.jsx)(i.Fragment,{children:Object(p.jsxs)("div",{className:"result",children:[Object(p.jsx)("div",{className:"result_f result_grid_f",children:" Inspection Result Summary"}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"result_a result_grid_a",children:[Object(p.jsx)("div",{className:"result_title",children:"Packing"}),Object(p.jsxs)("select",{id:"result_packingResult",name:"misc_packingResult",value:c.packing_result||"Select",justify:"left",placeholder:"Packing Result",onChange:r(1),children:[Object(p.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(p.jsx)("option",{value:"Passed",disabled:n?"":"disabled",children:"Passed"}),Object(p.jsx)("option",{value:"Failed",disabled:n?"":"disabled",children:"Failed"})]})]}),Object(p.jsxs)("div",{className:"result_b result_grid_b",children:[Object(p.jsx)("div",{className:"result_title",children:"Measurement"}),Object(p.jsxs)("select",{id:"result_measurementResult",name:"misc_measurementResult",value:c.measurement_result||"Select",justify:"left",placeholder:"Measurement result",onChange:r(2),children:[Object(p.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(p.jsx)("option",{value:"Passed",disabled:n?"":"disabled",children:"Passed"}),Object(p.jsx)("option",{value:"Failed",disabled:n?"":"disabled",children:"Failed"})]})]}),Object(p.jsxs)("div",{className:"result_c result_grid_c",children:[Object(p.jsx)("div",{className:"result_title",children:"Critical / Major / Minor"}),Object(p.jsx)("input",{type:"text",id:"result_defectiveResult",name:"result_defectiveResult",value:s.defective_result||"",justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(p.jsxs)("div",{className:"result_d result_grid_d",children:[Object(p.jsx)("div",{className:"result_title",children:"Sample Threshold (Major / Minor)"}),Object(p.jsx)("input",{type:"text",id:"result_sampleThreshold",name:"result_sampleThreshold",value:s.sample_threshold||"",justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(p.jsxs)("div",{className:"result_e result_grid_e",children:[Object(p.jsx)("div",{className:"result_title",children:"Final Result"}),Object(p.jsx)("input",{type:"text",id:"result_finalResult",name:"result_finalResult",value:a(),justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(p.jsxs)("div",{className:"result_g result_grid_g",children:[Object(p.jsx)("div",{className:"result_title",children:"Visual Result"}),Object(p.jsx)("input",{type:"text",id:"result_visualResult",name:"result_visualResult",value:s.visual_result||"Passed",justify:"left",placeholder:"",readOnly:"readOnly"})]})]})})},E=function(e){var t=e.updateHistory,c=e.showHistory,n=e.setShowHistory,s=e.convertToLocal,a=Object(m.a)(t);a.sort((function(e,t){return Date.parse(e.updated_time)>Date.parse(t.updated_time)?-1:1}));var l=document.querySelector(":root");return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsxs)("div",{className:"changeTrack_section_upper",children:[Object(p.jsx)("div",{children:"Change History"}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{children:["Show \xa0",Object(p.jsx)("i",{className:"clickable fa fa-plus",onClick:function(){n(!0)}}),"\xa0\xa0Hide \xa0",Object(p.jsx)("i",{className:"clickable fa fa-minus",onClick:function(){n(!1)}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{children:["Expand \xa0",Object(p.jsx)("i",{className:"clickable fa fa-plus",onClick:function(){l.style.setProperty("--changeTrack_max_height","100rem")}}),"\xa0\xa0 Collapse \xa0",Object(p.jsx)("i",{className:"clickable fa fa-minus",onClick:function(){l.style.setProperty("--changeTrack_max_height","4.3rem")}})]}),Object(p.jsx)("div",{})]}),c?Object(p.jsxs)("div",{className:"changeTrack_section_bottom",children:[Object(p.jsxs)("div",{className:"changeTrack_grid_header",children:[Object(p.jsx)("div",{children:"Local Time"}),Object(p.jsx)("div",{children:"Updated By"}),Object(p.jsx)("div",{children:"Mode"}),Object(p.jsx)("div",{children:"Result Details"}),Object(p.jsx)("div",{})]}),Object(p.jsx)("div",{className:"changeTrack_grid_outer_detail",children:a.length>0?a.map((function(e){return Object(p.jsxs)("div",{className:"changeTrack_grid_detail",children:[Object(p.jsx)("div",{children:s(e.updated_time)}),Object(p.jsx)("div",{children:e.updated_by}),Object(p.jsx)("div",{children:e.updated_mode}),Object(p.jsx)("div",{children:e.misc})]},e.id)})):null})]}):null]})},R=function(e){var t=e.inspectionID,c=e.currentSU,n=e.currentMF,s=e.getSharePointFiles,a=e.setShowSharePointFiles,l=e.showSharePointFiles,r=e.setSharePointFiles,o=e.sharePointPath,d=(e.createsharePointPDF,e.editMode);return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsx)("div",{className:"sharePoint_section",children:"Document Management on SharePoint"}),Object(p.jsxs)("div",{className:"sharePoint_grid",children:[Object(p.jsx)("div",{className:"sharePoint_cell",children:Object(p.jsx)("img",{src:"../static/img/sharePointx.jpg",alt:"sharePoint",className:"sharePoint_photo"})}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"sharePoint_cell",children:["View files\xa0",Object(p.jsx)("i",{className:"fa  fa-sign-in clickable",onClick:function(){!function(){var e="https://macysinc.sharepoint.com/sites/OSO/".concat(o,"/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F",o,"%2F","SU",c,"MF",n,"&view=7&q=",t.mc,"&FilterField1=Inspection_x0020_ID&FilterValue1=",t.mc,"-",t.iteration,"-",t.type[0],"&dt=",(new Date).getTime()),i=window.open(e,"_blank","noopener,noreferrer");i&&(i.opener=null)}()}})]}),d?Object(p.jsxs)("div",{className:"sharePoint_cell",children:["Add files\xa0",Object(p.jsx)("i",{className:"fa  fa-sign-in clickable",onClick:function(){!function(){var e="https://macysinc.sharepoint.com/sites/OSO/".concat(o,"/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F",o,"%2F","SU",c,"MF",n,"&dt=",(new Date).getTime()),t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null)}()}})]}):Object(p.jsx)("div",{className:"sharePoint_cell"}),null,Object(p.jsxs)("div",{className:"sharePoint_cell",children:["Instant View : \xa0\xa0",l?"Collapse":"Expand","\xa0",Object(p.jsx)("i",{className:"clickable fa "+(l?"fa-minus":"fa-plus"),onClick:function(){!0===l?(a(!1),r([])):(a(!0),s())}}),"\xa0 \xa0",Object(p.jsx)("i",{id:"sharePoint_refresh",className:"clickable fa fa-refresh",onClick:function(){l&&(r([]),s())}}),"\xa0 \xa0"]})]})]})},A=function(e){var t=e.sharePointFiles,c=e.downloadSharePointFile,n=e.showSharePointFiles,s=e.convertToLocal,a=e.editMode,l=e.handleDeleteSPfile,r=[".jpg",".png"];function o(e){for(var t=0;t<r.length;t++)if(e.toLowerCase().includes(r[t]))return!0;return!1}return Object(p.jsx)(i.Fragment,{children:n?Object(p.jsxs)("div",{className:"showSharePointFiles_section",children:[Object(p.jsxs)("div",{className:"showSharePointFiles_grid_header",children:[Object(p.jsx)("div",{children:"File Name"}),Object(p.jsx)("div",{children:"Last Editor"}),Object(p.jsx)("div",{children:"Last Edit Time"}),Object(p.jsx)("div",{children:"File Size"}),Object(p.jsx)("div",{children:"Download"}),Object(p.jsx)("div",{children:"File Type"}),Object(p.jsx)("div",{children:"Delete"})]}),Object(p.jsx)("div",{children:t.length>0?t.map((function(e){return"No files"===e.filename?Object(p.jsx)("div",{className:"sharePointFiles_no_files",children:e.filename}):Object(p.jsxs)("div",{className:"showSharePointFiles_grid_detail",children:[Object(p.jsx)("div",{children:e.filename}),Object(p.jsx)("div",{children:"SharePoint App"===e.editor?e.last_editor:e.editor}),Object(p.jsx)("div",{children:s(e.modified)}),Object(p.jsx)("div",{children:e.size}),Object(p.jsx)("div",{children:Object(p.jsx)("i",{className:"clickable fa fa-download",onClick:function(){c(e.filename)}})}),o(e.filename)?Object(p.jsx)("div",{className:"sharePointFiles_photoBlock",children:Object(p.jsx)("img",{src:"/showPhoto?folder="+e.folder+"&filename="+e.filename,alt:""})}):Object(p.jsx)("div",{children:Object(p.jsx)("i",{className:"fa fa-file fa-file-doc"})}),a?Object(p.jsx)("div",{children:Object(p.jsx)("button",{id:"sharePointFiles_deleteButton",onClick:function(){l(e.unique_id)},children:"\xd7"})}):Object(p.jsx)("div",{children:"\xa0"})]},e.unique_id)})):null})]}):null})},q=c(185),U=function(e){var t=e.position;return Object(p.jsxs)(i.Fragment,{children:[1===t?Object(p.jsx)(C,{area:"getUserProfile",spinnerMessage:"Loading your profile, please wait... "}):null,2===t?Object(p.jsxs)("div",{children:[Object(p.jsx)(C,{area:"printReport",spinnerMessage:"Preparing the report, please wait... "}),Object(p.jsx)(C,{area:"saveInspection",spinnerMessage:"Saving the changes, please wait... "}),Object(p.jsx)(C,{area:"deleteInspection",spinnerMessage:"Deleting, please wait... "}),Object(p.jsx)(C,{area:"createInspection",spinnerMessage:"Loading, please wait... "}),Object(p.jsx)(C,{area:"getMCtable",spinnerMessage:"Getting MC data, please wait... "})]}):null,3===t?Object(p.jsxs)("div",{children:[Object(p.jsx)(C,{area:"sharePointFiles",spinnerMessage:"Loading SharePoint info, please wait... "}),Object(p.jsx)(C,{area:"downloadSharePointfiles",spinnerMessage:"Downloading SharePoint info, please wait... "}),Object(p.jsx)(C,{area:"sharePointUpload",spinnerMessage:"Uploading file(s) to SharePoint, please wait... "})]}):null,10===t?Object(p.jsx)(C,{area:"pastInspection",spinnerMessage:"Loading past inspections, please wait... "}):null]})},B=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),c=t[0],n=t[1],s=Object(i.useState)(!1),l=Object(a.a)(s,2),r=l[0],o=l[1],j=Object(i.useState)([]),S=Object(a.a)(j,2),N=S[0],C=S[1],T=Object(i.useState)({position:100}),F=Object(a.a)(T,2),B=F[0],H=F[1],K=Object(i.useState)([]),J=Object(a.a)(K,2),Q=J[0],G=J[1],z=Object(i.useState)([]),Y=Object(a.a)(z,2),W=Y[0],V=Y[1],X=Object(i.useState)(new Date),Z=Object(a.a)(X,2),$=Z[0],ee=Z[1],te=Object(i.useState)({mc:"",iteration:"Select",type:"Select"}),ce=Object(a.a)(te,2),ie=ce[0],ne=ce[1],se=Object(i.useState)([]),ae=Object(a.a)(se,2),le=ae[0],re=ae[1],oe=Object(i.useState)([]),de=Object(a.a)(oe,2),je=de[0],ue=de[1],he=Object(i.useState)(""),be=Object(a.a)(he,2),me=be[0],pe=be[1],Oe=Object(i.useState)(""),fe=Object(a.a)(Oe,2),xe=fe[0],_e=fe[1],ve=Object(i.useState)([]),ge=Object(a.a)(ve,2),ye=ge[0],Se=ge[1],Ne=Object(i.useState)(""),Ce=Object(a.a)(Ne,2),ke=Ce[0],Me=Ce[1],we=Object(i.useState)([]),Pe=Object(a.a)(we,2),Ie=Pe[0],Te=Pe[1],Fe=Object(i.useState)(""),De=Object(a.a)(Fe,2),Le=De[0],Ee=De[1],Re=Object(i.useState)(""),Ae=Object(a.a)(Re,2),qe=Ae[0],Ue=Ae[1],Be=Object(i.useState)(!0),He=Object(a.a)(Be,2),Ke=He[0],Je=He[1],Qe=Object(i.useState)([]),Ge=Object(a.a)(Qe,2),ze=Ge[0],Ye=Ge[1],We=Object(i.useState)([]),Ve=Object(a.a)(We,2),Xe=Ve[0],Ze=Ve[1],$e=Object(i.useState)(!1),et=Object(a.a)($e,2),tt=et[0],ct=et[1],it=Object(i.useState)({}),nt=Object(a.a)(it,2),st=nt[0],at=nt[1],lt=Object(i.useState)({}),rt=Object(a.a)(lt,2),ot=rt[0],dt=rt[1],jt=Object(i.useState)(!1),ut=Object(a.a)(jt,2),ht=ut[0],bt=ut[1],mt=Object(i.useState)({}),pt=Object(a.a)(mt,2),Ot=pt[0],ft=pt[1],xt=Object(i.useState)([]),_t=Object(a.a)(xt,2),vt=_t[0],gt=_t[1],yt=Object(i.useState)(!1),St=Object(a.a)(yt,2),Nt=St[0],Ct=St[1],kt=Object(i.useState)([]),Mt=Object(a.a)(kt,2),wt=Mt[0],Pt=Mt[1],It=Object(i.useState)(!1),Tt=Object(a.a)(It,2),Ft=Tt[0],Dt=Tt[1],Lt=Object(i.useState)([]),Et=Object(a.a)(Lt,2),Rt=Et[0],At=Et[1],qt=Object(i.useState)("en"),Ut=Object(a.a)(qt,2),Bt=Ut[0],Ht=Ut[1],Kt=Object(i.useState)([]),Jt=Object(a.a)(Kt,2),Qt=Jt[0],Gt=Jt[1],zt=Object(i.useState)([]),Yt=Object(a.a)(zt,2),Wt=Yt[0],Vt=Yt[1],Xt=Object(i.useState)(),Zt=Object(a.a)(Xt,2),$t=Zt[0],ec=Zt[1],tc=Object(i.useState)(""),cc=Object(a.a)(tc,2),ic=cc[0],nc=cc[1],sc=Object(i.useState)(""),ac=Object(a.a)(sc,2),lc=ac[0],rc=ac[1],oc=Object(i.useState)(""),dc=Object(a.a)(oc,2),jc=dc[0],uc=dc[1],hc=Object(i.useState)(""),bc=Object(a.a)(hc,2),mc=bc[0],pc=bc[1],Oc=Object(i.useState)(""),fc=Object(a.a)(Oc,2),xc=fc[0],_c=fc[1],vc=Object(i.useState)([]),gc=Object(a.a)(vc,2),yc=gc[0],Sc=gc[1],Nc=Object(i.useState)(0),Cc=Object(a.a)(Nc,2),kc=Cc[0],Mc=Cc[1],wc=Object(i.useState)(0),Pc=Object(a.a)(wc,2),Ic=Pc[0],Tc=Pc[1],Fc=Object(i.useState)(0),Dc=Object(a.a)(Fc,2),Lc=Dc[0],Ec=Dc[1],Rc=Object(i.useState)([]),Ac=Object(a.a)(Rc,2),qc=Ac[0],Uc=Ac[1],Bc=Object(i.useRef)(!1);Object(i.useEffect)((function(){var e=document.querySelector(":root"),t=navigator.userAgent.toLowerCase();/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?e.style.setProperty("--changeTrack_scroll_width","7fr"):e.style.setProperty("--changeTrack_scroll_width","6.7fr"),t.includes("safari")&&t.includes("macintosh")&&e.style.setProperty("--changeTrack_scroll_width","7fr"),Object(g.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){ue(e.userProfile),G(e.mcTable),Te(e.partyTable),Ye(e.mfList),Ze(e.aqlTable),At(e.checkListTemplate),ec(e.sharePointPath),uc(e.mqaMembers),rc(e.packTypes),pc(e.productCategories),_c(e.inspType)})).catch((function(e){console.log(e)})),"getUserProfile"),fetch("/api/getDefectTable",{method:"GET"}).then((function(e){return e.json()})).then((function(e){Gt(e)})).catch((function(e){console.log(e)})),fetch("/api/getCriticalDefects",{method:"GET"}).then((function(e){return e.json()})).then((function(e){Vt(e)})).catch((function(e){console.log(e)}))}),[]),Object(i.useEffect)((function(){var e,t,c,i=document.getElementsByClassName("itemTotal_Detail"),n=i.length,s=-1;for(t=0;t<n;t++)i[t].style.backgroundColor="#0746f54d";for(e=0;e<n;e++){i[e].firstElementChild.innerHTML.includes(ke)&&""!==ke&&(i[e].style.backgroundColor="yellow",-1===s&&(s=e))}for(s>0?(document.getElementById("scroller").scrollTo(0,0),c=document.getElementById("scroller").scrollHeight/n*s,document.getElementById("scroller").scrollBy(0,c)):(document.getElementsByName("itemTotal_searchString")[0].value="",document.getElementsByName("itemTotal_searchString")[0].placeholder=""),n=(i=document.getElementsByClassName("itemTable_Detail")).length,s=-1,t=0;t<n;t++)i[t].style.backgroundColor="#0746f54d";for(e=0;e<n;e++){i[e].children[2].innerHTML.includes(ke)&&""!==ke&&(i[e].style.backgroundColor="yellow",-1===s&&(s=e))}s>0&&(document.getElementById("itemTableScroller").scrollTo(0,0),c=document.getElementById("itemTableScroller").scrollHeight/n*s,document.getElementById("itemTableScroller").scrollBy(0,c))}),[ke,c]),Object(i.useEffect)((function(){var e=c.map((function(e){return e.label})),t=Object(m.a)(new Set(e));at((function(e){return Object(b.a)(Object(b.a)({},e),{},{label:t.sort().join()})}))}),[c]),Object(i.useEffect)((function(){for(var e="",t="",c="",i=0,n=0,s=0,a=0,l=0,r=0;r<N.length;r+=1)N[r].critical?l+=parseInt(N[r].major):parseInt(N[r].major)>0&&(s+=parseInt(N[r].major)),parseInt(N[r].minor)>0&&(a+=parseInt(N[r].minor));if(l+s+a>0&&(t=" "+l.toString()+" / "+s.toString()+" / "+a.toString(),(s+Math.floor(a/4)>i||a>n)&&(c="Failed")),l>0&&(c="Failed"),"Failed"!==c&&t.length>0&&(c="Passed"),kc){var o=Xe.filter((function(e){return e.size_start<=kc&&e.size_end>=kc}));e=o[0]["25accept"].toString()+" / "+o[0]["40accept"].toString(),i=o[0]["25accept"],n=o[0]["40accept"]}ft({visual_result:c,defective_result:t,sample_threshold:e})}),[N,Xe,kc]),Object(i.useEffect)((function(){var e=[],t=Object(m.a)(c);t.map((function(e){return e.po_no})).filter((function(e,t,c){return c.indexOf(e)===t})).forEach((function(c){var i=Q.filter((function(e){return e.po_no===c})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),n=t.filter((function(e){return e.po_no===c}))[0].customer;e.push({po_no:c,ship_qty:i,customer:n})})),Uc(e)}),[c,Q]),Object(i.useEffect)((function(){var e=[],t=Object(m.a)(c),i=t.map((function(e){return e.item_no})).filter((function(e,t,c){return c.indexOf(e)===t})),n=t.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0);i.forEach((function(c){var i=t.filter((function(e){return e.item_no===c})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=Math.round(i/n*100);e.push({item_no:c,ship_qty:i,inspect_qty:s,sample_qty:s})})),Bc.current||Sc(e)}),[c]),Object(i.useEffect)((function(){var e=Xe.filter((function(e){return e.size_start<=kc&&e.size_end>=kc}));e.length<=0||(Bc.current?Bc.current=!1:Sc((function(t){return t.map((function(t){return Object(b.a)(Object(b.a)({},t),{},{sample_qty:Math.round(t.ship_qty/kc*e[0]["25sample"]),inspect_qty:Math.round(t.ship_qty/kc*e[0]["25sample"])})}))})))}),[kc,Xe]),Object(i.useEffect)((function(){if(kc>0){var e=Xe.filter((function(e){return e.size_start<=kc&&e.size_end>=kc}))[0]["25sample"];Ec(e)}else Ec(0)}),[yc,Xe,kc]),Object(i.useEffect)((function(){var e=Object(m.a)(yc),t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),c=e.reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);Mc(t),Tc(c)}),[yc]);var Hc=function(e,t){Ie.map((function(t){return t.SU===e?Ee(t.SU_NAME):null})),Ie.map((function(e){return e.MF===t?Ue(e.MF_NAME):null}))},Kc=function(e){Q.map((function(t){return t.mc_no===e?(t.id=Object(q.a)(),n((function(e){return e.concat(t)})),at(Object(b.a)(Object(b.a)({},st),{},{ship_window:t.ship_window,product_type:t.item_desc,fibre_content:t.fabric_note}))):null})),Hc(me,xe),bt(!0),ct(!0),$c()},Jc=function(e){H(e),setTimeout((function(){H({position:100})}),e.timeout)},Qc=function(e){Object(g.trackPromise)(d()({url:"/api/search",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({_id:e})}).then((function(e){return e.data})).then((function(e){bt(!0),Bc.current=!0,n(e.items),Sc(e.itemsTotal),localStorage.setItem("appItems",JSON.stringify(e.items)),localStorage.setItem("appShip",JSON.stringify(e.itemsTotal)),ee(e.main.inspection_date?new Date(e.main.inspection_date):null),dt(e.main),at(e.misc?e.misc:{}),void 0===e.misc.defectLanguage?Ht("en"):Ht(e.misc.defectLanguage),V(e.checkList),Hc(e.main.su_no,e.main.mf_no),void 0===e.defects?C([]):C(e.defects),void 0===e.uploads?re(""):re(e.uploads),void 0===e.update_history?gt([]):gt(e.update_history),Pt(!1),Dt(!1),Ct(!1)})).catch((function(e){406===e.response.status?Jc({message:"Not a valid MC for this manufacturer !",position:0,timeout:2e3,color:"alert__red"}):501===e.response.status?window.location="/login/timeout":Jc({message:"No such Inspection ID, please try again !",position:0,timeout:2e3,color:"alert__red"})})),"searchKey")},Gc=function(){n([]),C([]),V([]),Se([]),re([]),o(!1),at([]),gt([]),bt(!1),ct(!1),Ct(!1),Pt([]),Dt(!1),Ct(!0)},zc=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Yc=function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jc({message:"Session timeout, please login again !",position:0,timeout:3e3,color:"alert__red"}),e.next=3,zc(3e3);case 3:window.location="/login/timeout";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Wc=function(e){o(!0),Object(g.trackPromise)(d()({url:"/api/searchInspByMC",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({mc:e,mfList:ze})}).then((function(e){return e.data})).then((function(e){Se(e),Pt(!1)})).catch((function(e){501===e.response.status?Yc():Jc({message:"Something went wrong !",position:0,timeout:2e3,color:"alert__red"})})),"mfrSelection")};function Vc(e,t){for(var c=0;c<Wt.length;c+=1)if(Wt[c].product===e&&Wt[c].defect_detail_code===t)return!0;return!1}function Xc(){return"Failed"===st.measurement_result||"Failed"===st.packing_result||"Failed"===Ot.visual_result?"Failed":(Ot.visual_result,"Passed")}function Zc(e){var t=new Date(e).toTimeString(),c=new Date(e).toDateString()+" "+t,i=c.search("GMT+")-1;return c=c.substring(0,i)}var $c=function(){var e=Object(m.a)(Rt);e.sort((function(e,t){return e.id-t.id})),V(e)};return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsx)(P,{currentSU:me,currentMF:xe,currentSUName:Le,currentMFName:qe,setSelectingSupplier:Je,setShowFull:bt,setMFRsearch:nc}),Object(p.jsx)(I,{partyTable:Ie,setCurrentSU:pe,setCurrentMF:_e,setCurrentSUName:Ee,setCurrentMFName:Ue,selectingSupplier:Ke,setSelectingSupplier:Je,setMFRsearch:nc,mfrSearch:ic,getMCtable:function(e,t){Object(g.trackPromise)(d()({url:"/api/getMCtable",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({su:e,mf:t})}).then((function(e){return e.data})).then((function(e){G(e)})).catch((function(e){Jc({message:"Error getting MC",position:4,timeout:1500,color:"alert__red"})})),"getMCtable")}}),Object(p.jsx)(U,{position:1}),Object(p.jsx)(M,{handleSave:function(e){var t={su_no:me,mf_no:xe,inspection_date:$.toDateString(),submitted:e},i={mc:ie.mc,iteration:ie.iteration,type:ie.type},n=Object(b.a)({},st);n=Object(b.a)(Object(b.a)({},n),{},{final_result:Xc(),visual_result:Ot,defectLanguage:Bt,submitted:e}),Object(g.trackPromise)(d()({url:"/api/save",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:i,main:t,misc:n,mf:xe,checkList:W,items:c,itemsTotal:yc,defects:N,uploads:le,updateHistory:vt})}).then((function(e){Gc(),Jc({message:"Saved Successfully !",position:0,timeout:1e3,color:"alert__green"})})).catch((function(e){console.log(e.response.data),Jc({message:"There was an error in saving, please contact the admin !!",position:0,timeout:2e3,color:"alert__red"})})),"saveInspection")},handleSearch:Qc,inspectionID:ie,handleDelete:function(e){!0===window.confirm("Are you sure you want to delete this inspection ? ")&&Object(g.trackPromise)(d()({url:"/api/delete",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(Gc(),Jc({message:"Deleted successfully !",position:0,timeout:1500,color:"alert__green"})):null})).catch((function(e){Jc({message:"Error deleting the inspection ID !",position:0,timeout:1500,color:"alert__red"})})),"deleteInspection")},printReport:function(e,t){void 0!==st.qa_type?"MQA"!==st.qa_type||void 0!==st.mqa&&"Select"!==st.mqa?(e="MMG Inspection Report - "+ie.mc+"-"+ie.iteration+"-"+ie.type+(t?" (Draft) ":"")+".xlsx",Object(g.trackPromise)(fetch("/printreport",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",inspectionID:JSON.stringify({inspectionID:ie}),localTime:JSON.stringify(Zc(Date.now()))}}).then((function(e){return e.blob()})).then((function(t){var c=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=c,i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)})),"printReport")):Jc({message:"MQA must be specified !",position:0,timeout:2e3,color:"alert__red"}):Jc({message:"QA Type must be chosen !",position:0,timeout:2e3,color:"alert__red"})},editMode:tt,setEditMode:ct,userProfile:je,main:ot,misc:st,showFull:ht,clearScreen:Gc,updateHistory:vt}),Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsxs)(i.Fragment,{children:[Object(p.jsx)(k,{checkDuplicateID:function(e){Object(g.trackPromise)(d()({url:"/api/checkDuplicateID",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(t){return 200===t.status?void Jc({message:"This key has been used by previous inspection ! Please check and or consider a new iteration!",position:0,timeout:3e3,color:"alert__red"}):Kc(e.mc)})),"createInspection")},mcTable:Q,setDisplayAlert:Jc,inspectionID:ie,setInspectionID:ne,clearScreen:Gc,searchInspByMC:Wc,currentSU:me,currentMF:xe,editMode:tt,inspType:xc,showFull:ht}),r?Object(p.jsx)(w,{inspectionID:ie,setInspectionID:ne,handleSearch:Qc,searchInspByMC:Wc,searchedMC:ye,setShowSearchedMC:o,mcTable:Q,currentSU:me,currentMF:xe}):null]})})}),0===B.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(_,{alert:B})})}):null,Object(p.jsx)(U,{position:2}),Object(p.jsx)("div",{className:"flex-row "+(ht?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(i.Fragment,{children:Object(p.jsx)(L,{setInspectionDate:ee,inspectionDate:$,setMisc:at,misc:st,editMode:tt,isCriticalDefect:Vc,aqlTable:Xe,visualResult:Ot,calculateFinalResult:Xc})})})}),Object(p.jsx)("div",{className:"flex-row "+(ht?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(i.Fragment,{children:Object(p.jsx)(D,{setInspectionDate:ee,inspectionDate:$,setMisc:at,misc:st,editMode:tt,mqaMembers:jc,packTypes:lc,productCategories:mc,userProfile:je,items:c})})})}),1===B.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(_,{alert:B})})}):null,Object(p.jsx)("div",{className:"flex-row "+(ht?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(O,{setItems:n,items:c,mcTable:Q,addMC:Kc,currentSU:me,currentMF:xe,setItemSearchString:Me,editMode:tt,aqlTable:Xe,setDisplayAlert:Jc,ship:yc,setShip:Sc,poList:qc,setPOList:Uc,totalShip:kc,setTotalShip:Mc,totalInspect:Ic,setTotalInspect:Tc,totalSample:Lc,setTotalSample:Ec,getLocal:function(){Bc.current=!0,n(JSON.parse(localStorage.getItem("appItems"))),Sc(JSON.parse(localStorage.getItem("appShip")))}})})}),Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large "+(ht?null:"hideSection"),children:Object(p.jsx)(f,{items:c,addToDefectList:function(e,t,c,i,n,s,a,l){C((function(r){return r.concat({id:Object(q.a)(),product:e,defect_area:t,defect_detail:c,major:i,minor:n,defect_area_code:s,defect_detail_area:a,defect_language:l,critical:Vc(e,a)})}))},setDisplayAlert:Jc,editMode:tt,defects:N,defectLanguage:Bt,setDefectLanguage:Ht,defectList:Qt,showFull:ht})})}),2===B.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(_,{alert:B})})}):null,Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large "+(ht?null:"hideSection"),children:Object(p.jsx)(x,{defects:N,deleteDefect:function(e){C(N.filter((function(t){return t.id!==e})))},editMode:tt,isCriticalDefect:Vc,defectLanguage:Bt,defectList:Qt})})}),Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large "+(ht?null:"hideSection"),children:Object(p.jsx)(v,{checkList:W,handleCheckItemChange:function(e,t){var c=Object(m.a)(W),i=c.findIndex((function(t){return t.id===e}));c[i]=t,V(c)},editMode:tt})})}),3===B.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(_,{alert:B})})}):null,Object(p.jsx)("div",{className:"flex-row "+(ht?null:"hideSection"),children:Object(p.jsxs)("div",{className:"flex-large ",children:[Object(p.jsx)(R,{currentSU:me,currentMF:xe,inspectionID:ie,editMode:tt,getSharePointFiles:function(){Object(g.trackPromise)(d()({url:"/api/getsharepointfiles",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({folder:"SU"+me+"MF"+xe,inspection_id:ie.mc+"-"+ie.iteration+"-"+ie.type})}).then((function(e){return e.data})).then((function(e){Pt(e)})).catch((function(e){404===e.response.status&&Jc({message:"Folder on SharePoint was not created !",position:3,timeout:2e3,color:"alert__red"})})),"sharePointFiles")},setShowSharePointFiles:Dt,showSharePointFiles:Ft,setSharePointFiles:Pt,sharePointPath:$t,createsharePointPDF:function(){if(!0===window.confirm("You're recommended to use Microsoft Lens to create PDF file.  For non-chart photos with lesser resolution (around 400px *400px), you can try this function but all photo files will be zipped !  Please use with care !")){var e=$.getMonth()+1+"/"+$.getDate()+"/"+$.getFullYear();Object(g.trackPromise)(d()({url:"/api/createsharepointpdf",timeout:28e3,method:"POST",headers:{"Content-type":"application/json",api:"yes",inspection_id:ie.mc+"-"+ie.iteration+"-"+ie.type,relative_url:$t.concat("/","SU",me,"MF",xe),inspection_date:e},data:JSON.stringify({folder:"SU"+me+"MF"+xe,inspection_id:ie.mc+"-"+ie.iteration+"-"+ie.type})}).then((function(e){return e.data})).then((function(e){Pt(e),document.getElementById("sharePoint_refresh").click()})).catch((function(e){e.message.includes("timeout")&&Jc({message:"Warning : Server timeout interruption and some files may be lost ! Please refresh SharePoint status to make sure all photos are there and reduce the size of your photos and resubmit as neccessary, or use Microsft Lens on your mobile device!",position:3,timeout:9e3,color:"alert__red"}),404===e.response.status?Jc({message:"PDF creation error !",position:3,timeout:2e3,color:"alert__red"}):405===e.response.status&&Jc({message:"No photos to generate PDF !",position:3,timeout:2e3,color:"alert__red"})})),"sharePointFiles")}}}),Object(p.jsx)(U,{position:3})]})}),4===B.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(_,{alert:B})})}):null,Object(p.jsx)("div",{className:"flex-row "+(ht?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large ",children:Object(p.jsx)(A,{sharePointFiles:wt,downloadSharePointFile:function(e){var t="/sites/OSO/".concat($t,"/","SU",me,"MF",xe,"/",e);Object(g.trackPromise)(fetch("/downloadSharePointFile",{method:"GET",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",file_url:t}}).then((function(e){return e.blob()})).then((function(t){var c=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=c,i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)})),"downloadSharePointfiles")},showSharePointFiles:Ft,convertToLocal:Zc,editMode:tt,handleDeleteSPfile:function(e){!0===window.confirm("Are you sure you want to delete the SharePoint file ? ")&&Object(g.trackPromise)(d()({url:"/api/deleteSPfile",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(Jc({message:"SharePoint file deleted successfully !",position:3,timeout:3e3,color:"alert__green"}),document.getElementById("sharePoint_refresh").click()):null})).catch((function(e){Jc({message:"Error deleting the SP file !",position:4,timeout:1500,color:"alert__red"})})),"deleteInspection")}})})}),Object(p.jsx)("div",{className:"flex-row "+(ht?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large ",children:Object(p.jsx)(y,{setDisplayAlert:Jc,inspectionID:ie,setUploads:re,uploads:le,downloadDoc:function(e,t){return function(c){fetch("/download/"+e,{method:"GET",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment"}}).then((function(e){return e.blob()})).then((function(e){var c=window.URL.createObjectURL(new Blob([e])),i=document.createElement("a");i.href=c,i.setAttribute("download",t),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)}))}},editMode:tt,currentSU:me,currentMF:xe,setShowSharePointFiles:Dt,sharePointPath:$t,inspectionDate:$})})}),Object(p.jsx)("div",{className:"flex-row "+(ht?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large ",children:Object(p.jsx)(E,{updateHistory:vt,showHistory:Nt,setShowHistory:Ct,convertToLocal:Zc})})}),Object(p.jsx)("div",{children:"\xa0"}),Object(p.jsx)("div",{children:"\xa0"})]})},H=function(e){var t=e.env;return Object(p.jsx)("div",{className:"welcome",children:Object(p.jsx)("div",{children:"DEV"===t?Object(p.jsx)("iframe",{src:"http://localhost:5000/map-marker",title:"map",style:{width:"100%",height:"103%",border:0}}):Object(p.jsx)("iframe",{src:"https://mmgapp2.herokuapp.com/map-marker",title:"map",style:{width:"100%",height:"103%",border:0}})})})},K=function(e){var t=Object(i.useState)([]),c=Object(a.a)(t,2),n=c[0],s=c[1];return Object(i.useEffect)((function(){return Object(g.trackPromise)(d()({url:"/api/pastXdaysResult",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){var t=function(e){return e.sort((function(e,t){return Date.parse(e.main.inspection_date)>Date.parse(t.main.inspection_date)?-1:1})),e}(e);s(t)})).catch((function(e){console.log(e)})),"pastInspection"),function(){s({})}}),[]),Object(p.jsxs)(i.Fragment,{children:[Object(p.jsxs)("div",{className:"xDaysResult",children:[n.length>0?Object(p.jsxs)("div",{className:"xDaysResult_gridHeader",children:[Object(p.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Inspection Date"}),Object(p.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Supplier"}),Object(p.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Manufacturer"}),Object(p.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Inspection ID"}),Object(p.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Result"}),Object(p.jsx)("div",{className:"xDaysResult_gridHeaderItem"})]}):null,n.length>0?n.map((function(e){return Object(p.jsxs)("div",{className:"xDaysResult_gridDetail",children:[Object(p.jsx)("div",{className:"xDaysResult_gridItem",children:(t=e.main.inspection_date,new Date(t).toDateString())}),Object(p.jsx)("div",{className:"xDaysResult_gridItem",children:e.main.su_no}),Object(p.jsx)("div",{className:"xDaysResult_gridItem",children:e.main.mf_no}),Object(p.jsxs)("div",{className:"xDaysResult_gridItem",children:[e._id.mc+"-"+e._id.iteration+"-"+e._id.type," "]}),Object(p.jsx)("div",{className:"xDaysResult_gridItem",children:e.misc.final_result}),Object(p.jsx)("div",{})]},e.id);var t})):null]}),Object(p.jsx)(U,{position:10})]})},J=function(e){var t=e.userProfile;return Object(p.jsx)(i.Fragment,{children:Object(p.jsxs)("div",{className:"userProfile",children:[Object(p.jsxs)("div",{className:"userProfile_title",children:[Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:"static/img/macys-header.jpg","aria-hidden":!0,alt:"",width:"30",height:"30"})}),Object(p.jsx)("div",{children:"MMG Inspection App"})]}),Object(p.jsxs)("div",{className:"userProfile_personal",children:[Object(p.jsxs)("div",{className:"userProfile_name",children:[t.first_name?"Hi, "+t.first_name:null," "]}),Object(p.jsx)("div",{className:"userProfile_photo",children:t.email?t.email.includes("@macys.com")?Object(p.jsx)("img",{src:"/api/getPhoto","aria-hidden":!0,alt:"Searching for photo...",width:"60",height:"60"}):Object(p.jsx)("img",{src:"static/img/anonymous.jpg","aria-hidden":!0,alt:"No factory photo !!",width:"60",height:"60"}):Object(p.jsx)("div",{children:"Searching for photo..."})})]})]})})},Q=function(){var e=Object(i.useState)({}),t=Object(a.a)(e,2),c=t[0],n=t[1];return Object(i.useEffect)((function(){Object(g.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){n(e.userProfile)})).catch((function(e){console.log(e)})))}),[]),Object(p.jsx)("div",{className:"container app_container",children:Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsxs)("div",{className:"flex-large",children:[Object(p.jsx)(J,{userProfile:c}),Object(p.jsxs)(l.a,{children:[Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{className:"app_header",children:[Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{to:"/",className:"link",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{to:"/appInspection",className:"link",children:"Inspection"})}),void 0!==c.email&&c.email.includes("macys.com")?Object(p.jsx)("li",{children:Object(p.jsx)(l.b,{to:"/xDaysResult",className:"link",children:"Past Inspection Results"})}):null,void 0!==c.email&&c.email.includes("macys.com")?Object(p.jsx)("li",{className:"link",onClick:function(){!function(){var e=window.open("https://app.powerbi.com/reportEmbed?reportId=f0a7cd56-e22b-490a-9ad7-012d4a0d5251&autoAuth=true&filterPanelEnabled=False&pageName=ReportSectionf1be12cf083e1c0eba15","_blank","noopener,noreferrer");e&&(e.opener=null)}()},children:"Power BI"}):null,Object(p.jsx)("button",{className:"fa fa-sign-out",onClick:function(){localStorage.clear(),window.location="/logout"},children:"Logout"})]})}),Object(p.jsxs)(r.c,{children:[Object(p.jsx)(r.a,{path:"/",element:Object(p.jsx)(H,{env:c.environment})}),Object(p.jsx)(r.a,{path:"/appInspection",element:Object(p.jsx)(B,{})}),Object(p.jsx)(r.a,{path:"/xDaysResult",element:Object(p.jsx)(K,{})})]})]})]})})})};s.a.render(Object(p.jsx)(Q,{}),document.getElementById("root"))},44:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){}},[[177,1,2]]]);
//# sourceMappingURL=main.6d1ebe7e.chunk.js.map