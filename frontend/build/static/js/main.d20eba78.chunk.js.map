{"version":3,"sources":["components/ItemTable.js","components/ItemTotal.js","components/DefectOptions.js","components/DefectList.js","components/ShowAlert.js","components/CheckList.js","components/UploadForm.js","components/Spinner.js","components/SearchKey.js","components/MainMenu.js","components/SearchedMC.js","components/SupplierInfo.js","components/MfrSelection.js","components/Misc.js","components/Result.js","components/ChangeTrack.js","components/SharePoint.js","components/ShowSharePointFiles.js","components/ShowSpinner.js","AppInspection.js","Home.js","XDaysResult.js","components/UserProfile.js","App.js","index.js"],"names":["ItemTable","props","useEffect","listener","event","code","preventDefault","document","getElementById","click","addEventListener","removeEventListener","setItems","items","setDisplayAlert","mcTable","addMC","editMode","currentSU","currentMF","sortTable","sort","order","newItems","a","b","mc_no","item_no","useState","mc","setMC","handleInputChange","value","target","displayAlert","message","position","timeout","color","className","type","id","name","justify","placeholder","onChange","readOnly","onClick","found","find","x","duplicate","sameMF","su_no","mf_no","undefined","validateMC","align","length","map","item","order_qty","ItemTotal","setItemSearchString","itemsTotal","shippedTotal","sampleTotal","getSampleSize","aqlTable","setItemsTotal","setShippedTotal","setSampleTotal","inspectTotal","setInspectTotal","setAqlSampleTotal","aqlSampleTotal","undoTable","resetInspectQty","el","_total","_shippedTotal","reduce","accumulator","currentValue","parseInt","ship_qty","_sampleTotal","_inspectTotal","inspect_qty","i","_sample_qty","sample_qty","handleInspectQty","newItemsTotal","index","findIndex","r","newEntry","onInput","e","toUpperCase","deleteAllItems","DefectOptions","defects","setDefectLanguage","defectLanguage","defectList","showFull","currentProduct","setCurrentProduct","currentDefectArea","setCurrentDefectArea","currentDefectDetail","setCurrentDefectDetail","currentMajor","setCurrentMajor","currentMinor","setCurrentMinor","currentDefectAreaCode","setCurrentDefectAreaCode","currentDefectDetailCode","setCurrentDefectDetailCode","d","productDefect","first","push","filter","product","defect_code","_id","disabled","area_array","split","y","lang","defect_area","detail_array","defect_detail_code","defect_detail","min","max","major_int","isNaN","minor_int","addToDefectList","handleAddDefect","DefectList","isCriticalDefect","defect_lang","area_code","detail","defect_area_code","defect_detail_area","style","major","minor","deleteDefect","colSpan","ShowAlert","alert","class_var","concat","CheckList","checkList","selected","result","nextSelected","handleCheckItemChange","onSubmit","width","category","separator","UploadForm","inspectionID","setShowSharePointFiles","sharePointPath","inspectionDate","selectedFile","setSelectedFile","multiple","file","files","formData","FormData","append","inspection_date","getMonth","getDate","getFullYear","trackPromise","axios","url","method","data","headers","inspection_id","iteration","charAt","relative_url","then","res","catch","err","error","Spinner","promiseInProgress","usePromiseTracker","area","spinnerMessage","marginTop","height","display","justifyContent","alignItems","fontWeight","SearchKey","checkDuplicateID","setInspectionID","clearScreen","searchInspByMC","handleKeyChange","MainMenu","handleSave","handleDelete","handleSearch","printReport","setEditMode","userProfile","misc","updateHistory","submitted","editable","ignore_submit","handleClick","window","confirm","SearchedMC","searchedMC","setShowSearchedMC","newSearchedMC","SupplierInfo","currentSUName","currentMFName","setSelectingSupplier","setShowFull","setMFRsearch","toLowerCase","MfrSelection","partyTable","setCurrentSU","setCurrentMF","setCurrentSUName","setCurrentMFName","selectingSupplier","mfrSearch","textTransform","SU_NAME","SU","MF","MF_NAME","search","su","mf","su_name","mf_name","Misc","setInspectionDate","setMisc","handleChange","element","yes_or_no","newMisc","product_type","lab_test_report","lab_child_safety_report","fibre_content","comments","governance_inspection","props65_report","ship_mode","pack_pct","ship_window","carton_list","carton_total","inspector","qa_type","console","log","dateFormat","date","handleDate","checked","rows","cols","Result","visualResult","calculateFinalResult","calculate_final_result","packing_result","measurement_result","param2","final_result","defective_result","sample_threshold","visual_result","ChangeTrack","showHistory","setShowHistory","convertToLocal","history","Date","parse","updated_time","root","querySelector","setProperty","line","updated_by","updated_mode","SharePoint","getSharePointFiles","showSharePointFiles","setSharePointFiles","createsharePointPDF","src","alt","getTime","newWindow","open","opener","handleClick_view","ShowSharePointFiles","sharePointFiles","downloadSharePointFile","handleDeleteSPfile","ext","isSupportPicExt","filename","includes","editor","last_editor","modified","size","folder","unique_id","ShowSpinner","App","showSearchedMC","setDefects","setAlert","setMCTable","setCheckList","uploads","setUploads","setUserProfile","setSearchedMC","itemSearchString","setPartyTable","mfList","setMfList","setAqlTable","main","setMain","setVisualResult","constructTotal","setConstructTotal","setUpdateHistory","checkListTemplate","setCheckListTemplate","setDefectList","criticalDefects","setCriticalDefects","setSharePointPath","_aql","aql","size_start","size_end","sampleQty","Math","round","userAgent","navigator","test","api","response","fetch","json","j","scroll_y","getElementsByClassName","len","first_found","backgroundColor","firstElementChild","innerHTML","scrollTo","scrollHeight","scrollBy","getElementsByName","children","items1","obj","items2","prev","next","items3","Object","keys","sampleSize","inspectQty","sampleThreshold","defectiveResult","sampleThresholdMajor","sampleThresholdMinor","total_major","total_minor","total_critical","critical","toString","floor","handleSupplierInfo","uuidv4","fillCheckList","setTimeout","JSON","stringify","localStorage","setItem","status","location","delay","ms","Promise","handleSessionTimeOut","defect","t","toTimeString","local","toDateString","local_end","substring","newCheckList","file_name","draft","blob","URL","createObjectURL","Blob","link","createElement","href","setAttribute","body","appendChild","parentNode","removeChild","deleteItem","getItem","defect_language","change","file_url","downloadDoc","Home","env","title","border","About","setResult","_result","sortInspectionDate","first_name","email","UserProfile","to","gotoPowerBI","clear","path","environment","AppInspection","XDaysResult","ReactDOM","render"],"mappings":"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","file":"static/js/main.d20eba78.chunk.js","sourcesContent":["import { React, useState, useEffect } from \"react\"\n\nconst ItemTable = props => {\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        //console.log(\"Enter key was pressed. Run your function.\");\n        event.preventDefault()\n        document.getElementById(\"itemTable_MCBtn\").click()\n      }\n    }\n\n    if (document.getElementById(\"itemTable_MC\")) document.getElementById(\"itemTable_MC\").addEventListener(\"keydown\", listener)\n\n    return () => {\n      if (document.getElementById(\"itemTable_MC\")) document.getElementById(\"itemTable_MC\").removeEventListener(\"keydown\", listener)\n    }\n  }, [])\n\n  const { setItems, items, setDisplayAlert, mcTable, addMC, editMode, currentSU, currentMF } = props\n\n  const sortTable = (sort, order) => {\n    const newItems = [...items]\n    /*table = document.getElementById(\"itemTable\") */\n    if (sort === 0 && order === \"asc\") {\n      newItems.sort(function (a, b) {\n        return a.mc_no > b.mc_no ? 1 : -1\n      })\n    } else if (sort === 0 && order === \"desc\") {\n      newItems.sort(function (a, b) {\n        return a.mc_no < b.mc_no ? 1 : -1\n      })\n    } else if (sort === 1 && order === \"asc\") {\n      newItems.sort(function (a, b) {\n        return a.item_no > b.item_no ? 1 : -1\n      })\n    } else if (sort === 1 && order === \"desc\") {\n      newItems.sort(function (a, b) {\n        return a.item_no < b.item_no ? 1 : -1\n      })\n    }\n    setItems(newItems)\n  }\n\n  //* add new MC\n\n  const [mc, setMC] = useState(\"\")\n\n  const handleInputChange = event => {\n    const value = event.target.value\n    setMC(value)\n  }\n\n  const validateMC = () => {\n    //event.preventDefault()\n\n    const found = mcTable.find(x => x.mc_no === mc)\n    const duplicate = items.find(x => x.mc_no === mc)\n    const sameMF = mcTable.find(x => x.mc_no === mc && x.su_no === currentSU && x.mf_no === currentMF)\n\n    if (!found) {\n      displayAlert(\"This MC doesn't exist\")\n    } else if (!sameMF) {\n      displayAlert(\"This MC exists but not for this manufacturer!\")\n    } else if (duplicate === undefined) {\n      addMC(mc)\n    } else {\n      displayAlert(\"MC was already entered in the item list, please check ! \")\n    }\n  }\n\n  //encapsulate the props function as only message is different in this page\n  const displayAlert = message => {\n    setDisplayAlert({ message: message, position: 1, timeout: 1500, color: \"alert__red\" })\n  }\n\n  return (\n    <div>\n      <div className=\"itemTable_Section\">\n        <div>Add MC:</div>\n        &nbsp;\n        <div>{editMode ? <input type=\"text\" id=\"itemTable_MC\" name=\"mc\" justify=\"left\" placeholder=\"Additional MC here\" onChange={handleInputChange} /> : <input type=\"text\" id=\"itemTable_MC\" name=\"mc\" justify=\"left\" placeholder=\"Include additional MC here\" readOnly onChange={handleInputChange} />}</div>\n        &nbsp;&nbsp;\n        <div>\n          {editMode ? (\n            <i\n              id=\"itemTable_MCBtn\"\n              className=\"fa fa-plus clickable\"\n              onClick={() => {\n                validateMC(mc)\n              }}\n            ></i>\n          ) : null}\n        </div>\n      </div>\n      <div className=\"itemTable_Header\">\n        <div>\n          By MC#&nbsp;\n          <i\n            className=\"fa fa-chevron-circle-up clickable\"\n            onClick={() => {\n              sortTable(0, \"asc\")\n            }}\n          ></i>\n          &nbsp;\n          <i\n            className=\"fa fa-chevron-circle-down clickable\"\n            onClick={() => {\n              sortTable(0, \"desc\")\n            }}\n          ></i>\n        </div>\n        <div>\n          Item&nbsp;\n          <i\n            className=\"fa fa-chevron-circle-up clickable\"\n            onClick={() => {\n              sortTable(1, \"asc\")\n            }}\n          ></i>\n          &nbsp;\n          <i\n            className=\"fa fa-chevron-circle-down clickable\"\n            onClick={() => {\n              sortTable(1, \"desc\")\n            }}\n          ></i>\n        </div>\n        <div align=\"center\">Order</div>\n        <div></div>\n      </div>\n\n      <div id=\"itemTableScroller\" className=\"itemTable_GridContainer\">\n        {items.length > 0\n          ? items.map(item => (\n              <div key={item.id} className=\"itemTable_Detail\">\n                <div>{item.mc_no}</div>\n                <div>{item.item_no}</div>\n                <div align=\"center\">{item.order_qty}</div>\n              </div>\n            ))\n          : null}\n      </div>\n    </div>\n  )\n}\n\nexport default ItemTable\n","import { React, useEffect } from \"react\"\n\nconst ItemTotal = props => {\n  const { setItemSearchString, itemsTotal, editMode, shippedTotal, sampleTotal, getSampleSize, aqlTable, setItemsTotal, setShippedTotal, setSampleTotal, inspectTotal, setInspectTotal, setAqlSampleTotal, aqlSampleTotal, undoTable, resetInspectQty, setDisplayAlert } = props\n\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        //console.log(\"Enter key was pressed. Run your function.\");\n        event.preventDefault()\n        document.getElementById(\"highLightItemBtn\").click()\n      }\n    }\n    var el = document.getElementById(\"itemTotal_searchString\")\n\n    if (el) {\n      el.addEventListener(\"keydown\", listener)\n      return () => {\n        el.removeEventListener(\"keydown\", listener)\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    const _total = [...itemsTotal]\n    if (_total.length === 0) {\n      setShippedTotal(0)\n      setSampleTotal(0)\n    } else {\n      for (var i = 0; i < _total.length; i++) {\n        const reducer1 = (accumulator, currentValue) => accumulator + parseInt(currentValue.ship_qty)\n        const _shippedTotal = _total.reduce(reducer1, 0)\n        setShippedTotal(_shippedTotal)\n\n        // calculate total number of samples\n        const reducer2 = (accumulator, currentValue) => accumulator + getSampleSize(aqlTable, currentValue.ship_qty, _shippedTotal)\n        const _sampleTotal = _total.reduce(reducer2, 0)\n        setSampleTotal(_sampleTotal)\n\n        // calculate total number of inspection qty\n        const reducer3 = (accumulator, currentValue) => accumulator + parseInt(currentValue.inspect_qty)\n        const _inspectTotal = _total.reduce(reducer3, 0)\n        setInspectTotal(_inspectTotal)\n\n        // calculate AQL sample size\n        setAqlSampleTotal(getSampleSize(aqlTable, shippedTotal, _shippedTotal))\n      }\n    }\n  }, [itemsTotal, shippedTotal, sampleTotal, aqlTable, setSampleTotal, setShippedTotal, getSampleSize, inspectTotal, setInspectTotal, setAqlSampleTotal])\n\n  useEffect(() => {\n    const _total = [...itemsTotal]\n    for (var i = 0; i < _total.length; i++) {\n      const _sample_qty = getSampleSize(aqlTable, _total[i].ship_qty, shippedTotal)\n      _total[i].sample_qty = _sample_qty\n      //_total[i].inspect_qty = _sample_qty\n    }\n    setItemsTotal(_total)\n\n    // eslint-disable-next-line\n  }, [shippedTotal])\n\n  const handleShipQty = item_no => event => {\n    let value = event.target.value\n    if (value === \"\") {\n      return\n    }\n    if (value > 20000) {\n      value = 20000\n      setDisplayAlert({ message: \"Number of ship units is too large!\", position: 1, timeout: 3000, color: \"alert__red\" })\n    }\n\n    const newItemsTotal = [...itemsTotal]\n    const index = newItemsTotal.findIndex(r => r.item_no === item_no)\n    const newEntry = newItemsTotal.find(r => r.item_no === item_no)\n    newItemsTotal[index] = { ...newEntry, ship_qty: value }\n    setItemsTotal(newItemsTotal)\n  }\n\n  const handleInspectQty = item_no => event => {\n    let value = event.target.value\n    const newItemsTotal = [...itemsTotal]\n    const index = newItemsTotal.findIndex(r => r.item_no === item_no)\n    const newEntry = newItemsTotal.find(r => r.item_no === item_no)\n    newItemsTotal[index] = { ...newEntry, inspect_qty: value }\n    setItemsTotal(newItemsTotal)\n  }\n\n  return (\n    // present the table\n\n    <div>\n      <div className=\"itemTotal_Section\">\n        <div>Highlight item :</div>\n\n        <div>\n          <input type=\"text\" name=\"itemTotal_searchString\" id=\"itemTotal_searchString\" justify=\"left\" onInput={e => (e.target.value = (\"\" + e.target.value).toUpperCase())} placeholder=\"Enter item here\" />\n        </div>\n\n        <div>\n          <i\n            className=\"fa fa-search clickable\"\n            id=\"highLightItemBtn\"\n            onClick={() => {\n              setItemSearchString(document.getElementById(\"itemTotal_searchString\").value)\n            }}\n          ></i>\n        </div>\n\n        <div>\n          Refresh Qty.&nbsp;\n          <i\n            className=\"fa fa-angle-double-right itemTotal_arrow_color clickable\"\n            onClick={() => {\n              resetInspectQty()\n            }}\n          ></i>\n          <i\n            className=\"fa fa-angle-double-right  itemTotal_arrow_color clickable\"\n            onClick={() => {\n              resetInspectQty()\n            }}\n          ></i>\n        </div>\n\n        <div>\n          Undo\n          <i\n            className=\"fa fa-undo clickable\"\n            onClick={() => {\n              undoTable()\n            }}\n          ></i>\n        </div>\n      </div>\n\n      <div className=\"itemTotal_Header\">\n        <div>By Item</div>\n        <div>Ship</div>\n        <div>Sample</div>\n        <div>Inspect</div>\n        <div>Delete</div>\n      </div>\n\n      <div id=\"scroller\" className=\"itemTotal_GridContainer\">\n        {itemsTotal\n          ? itemsTotal.map(item => (\n              <div key={item.item_no} className=\"itemTotal_Detail\">\n                <div>{item.item_no}</div>\n                <div>\n                  <input type=\"text\" id=\"itemTotal_shipQty\" name=\"itemTotal_shipQty\" value={item.ship_qty || \"\"} justify=\"left\" onChange={handleShipQty(item.item_no)} readOnly={editMode ? \"\" : \"readOnly\"} />\n                </div>\n                <div>{getSampleSize(aqlTable, item.ship_qty, shippedTotal)}</div>\n                <div>\n                  <input type=\"text\" id=\"itemTotal_InspectQty\" name=\"itemTotal_InspectQty\" value={item.inspect_qty || \"\"} justify=\"left\" placeholder=\"\" onChange={handleInspectQty(item.item_no)} readOnly={editMode ? \"\" : \"readOnly\"} />\n                </div>\n                <div>\n                  {editMode ? (\n                    <i\n                      className=\"fa fa-times clickable\"\n                      onClick={() => {\n                        props.deleteAllItems(item.item_no)\n                      }}\n                    ></i>\n                  ) : null}\n                </div>\n              </div>\n            ))\n          : null}\n      </div>\n\n      <div className=\"itemTotal_Total\">\n        <div> Total :</div>\n        <div>{shippedTotal}</div>\n        <div>{aqlSampleTotal}</div>\n        <div className={aqlSampleTotal !== inspectTotal ? \"highlightSection\" : null}>{inspectTotal}</div>\n        <div></div>\n      </div>\n    </div>\n  )\n}\n\nexport default ItemTotal\n","import React, { useState, Fragment, useEffect } from \"react\"\n\nconst DefectOptions = props => {\n  // remove columns : mc_no and id in prepration for calculating total by item#\n  const { editMode, defects, setDisplayAlert, setDefectLanguage, defectLanguage, defectList, showFull } = props\n\n  const [currentProduct, setCurrentProduct] = useState(\"Select\")\n  const [currentDefectArea, setCurrentDefectArea] = useState(\"\")\n  const [currentDefectDetail, setCurrentDefectDetail] = useState(\"\")\n  const [currentMajor, setCurrentMajor] = useState(\"\")\n  const [currentMinor, setCurrentMinor] = useState(\"\")\n  const [currentDefectAreaCode, setCurrentDefectAreaCode] = useState(\"\")\n  const [currentDefectDetailCode, setCurrentDefectDetailCode] = useState(\"\")\n\n  //  prepare for the defect selection - need to associate based on each specific product and then its associted defect.\n  let d = defectList\n  const productDefect = []\n\n  while (d.length > 0) {\n    const first = d[0]\n    productDefect.push(first)\n    d = d.filter(x => (x.product !== first.product || x.defect_code !== first.defect_code) && x._id !== first._id)\n  }\n\n  useEffect(() => {\n    if (!showFull) {\n      setCurrentDefectArea(\"\")\n      setCurrentDefectAreaCode(\"\")\n    }\n  }, [showFull])\n\n  const handleSelectChangeProduct = event => {\n    const { value } = event.target\n    if (disableProductSelect() === \"disabled\") {\n      if (value !== defects[0].product) {\n        setDisplayAlert({ message: \"Product '\" + defects[0].product + \"' has already been chosen !! Please empty all defects if you decide to change product ! \", position: 2, timeout: 2500, color: \"alert__red\" })\n      }\n      document.getElementById(\"defectOptionsProduct\").value = defects[0].product\n      document.getElementById(\"defectOptionsDefectArea\").value = \"Select\"\n      setCurrentProduct(defects[0].product)\n    } else {\n      setCurrentProduct(value)\n    }\n\n    setCurrentDefectArea(\"Select\")\n    setCurrentMajor(\"\")\n    setCurrentMinor(\"\")\n    setCurrentDefectAreaCode(\"\")\n    setCurrentDefectDetailCode(\"\")\n  }\n\n  function disableProductSelect() {\n    if (defects.length > 0) {\n      return \"disabled\"\n    } else return null\n  }\n\n  const handleSelectChangeDefect = event => {\n    const { value } = event.target\n    const area_array = value.split(\"-\")\n    setCurrentDefectAreaCode(area_array[0])\n    setCurrentDefectArea(area_array[1])\n    setCurrentDefectDetail(\"Select\")\n    setCurrentMajor(\"\")\n    setCurrentMinor(\"\")\n  }\n\n  const handleSelectChangeDefectDetail = event => {\n    const { value } = event.target\n    const detail_array = value.split(\"-\")\n    setCurrentDefectDetailCode(detail_array[0])\n    setCurrentDefectDetail(detail_array[1])\n    setCurrentMajor(\"\")\n    setCurrentMinor(\"\")\n  }\n\n  const handleCurrentMajorChange = event => {\n    const { value } = event.target\n    setCurrentMajor(value)\n  }\n\n  const handleCurrentMinorChange = event => {\n    const { value } = event.target\n    setCurrentMinor(value)\n  }\n\n  const handleChangeDefectLanguage = event => {\n    const { value } = event.target\n    if (defects.length > 0) {\n      setDefectLanguage(value)\n      //setDisplayAlert({ message: \"Language has already been chosen !! Please empty all defects if you decide to change language ! \", position: 2, timeout: 2500, color: \"alert__red\" })\n    } else {\n      setDefectLanguage(value)\n    }\n  }\n\n  const handleAddDefect = event => {\n    //event.preventDefault()\n    const major_int = isNaN(parseInt(currentMajor)) // check if empty, return true if empty\n    const minor_int = isNaN(parseInt(currentMinor)) // check if empty, return true if empty\n\n    if (currentProduct === \"Select\" || currentDefectArea === \"Select\" || currentDefectDetail === \"Select\") {\n      props.setDisplayAlert({ message: \"Please make sure you select Product, Defect and Defect Detail ! \", position: 2, timeout: 2500, color: \"alert__red\" })\n    } else if (major_int || minor_int || (currentMajor < 1 && currentMinor < 1)) {\n      props.setDisplayAlert({ message: \"Please make sure you enter either Major and Minor quantity ! \", position: 2, timeout: 2500, color: \"alert__red\" })\n    } else {\n      props.addToDefectList(currentProduct, currentDefectArea, currentDefectDetail, currentMajor, currentMinor, currentDefectAreaCode, currentDefectDetailCode, defectLanguage)\n    }\n  }\n\n  return (\n    // present the table\n\n    <Fragment>\n      <div className=\"defectOption_header\">\n        <div>Language</div>\n        <div>&nbsp;&nbsp;&nbsp;&nbsp;</div>\n        <div>\n          <select className=\"defectOption_language  clickable\" onChange={handleChangeDefectLanguage} value={defectLanguage}>\n            <option value=\"en\">English</option>\n            <option value=\"zh\">Chinese</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"defectOption\">\n        <div className=\"defectOption_product\">\n          <select onChange={handleSelectChangeProduct} id=\"defectOptionsProduct\" className=\"clickable\">\n            {/* <option disabled={disableProductSelect()}  value=\"Select\">Select</option> */}\n            <option value=\"Select\">Select</option>\n            <option value=\"Fashion Jewelry\" disabled={editMode ? \"\" : \"disabled\"}>\n              Fashion Jewelry\n            </option>\n            <option value=\"Footwear\" disabled={editMode ? \"\" : \"disabled\"}>\n              Footware\n            </option>\n            <option value=\"Handbags\" disabled={editMode ? \"\" : \"disabled\"}>\n              Handbags\n            </option>\n            <option value=\"Hardlines\" disabled={editMode ? \"\" : \"disabled\"}>\n              Hardlines\n            </option>\n            <option value=\"Softlines\" disabled={editMode ? \"\" : \"disabled\"}>\n              Softlines\n            </option>\n          </select>\n        </div>\n\n        <div className=\"defectOption_defectArea\">\n          <select onChange={handleSelectChangeDefect} id=\"defectOptionsDefectArea\" className=\"clickable\" value={currentDefectAreaCode + \"-\" + currentDefectArea}>\n            <option value=\"Select\">Select</option>\n            {productDefect\n              .filter(y => y.product === currentProduct && y.lang === defectLanguage)\n              .map(x => (\n                <option key={x._id} value={x.defect_code + \"-\" + x.defect_area} disabled={editMode ? \"\" : \"disabled\"}>\n                  {x.defect_code + \"-\" + x.defect_area}\n                </option>\n              ))}\n          </select>\n        </div>\n\n        <div className=\"defectOption_defectDetail\">\n          <select onChange={handleSelectChangeDefectDetail} className=\"clickable\">\n            <option value=\"Select\">Select</option>\n            {defectList\n              .filter(y => y.product === currentProduct && y.defect_code === currentDefectAreaCode && y.lang === defectLanguage)\n              .map(x => (\n                <option key={x._id} value={x.defect_detail_code + \"-\" + x.defect_detail} disabled={editMode ? \"\" : \"disabled\"}>\n                  {x.defect_detail_code + \"-\" + x.defect_detail}\n                </option>\n              ))}\n          </select>\n        </div>\n\n        <div className=\"defectOption_major\">\n          <input type=\"number\" name=\"major\" placeholder=\" Major\" value={currentMajor} min=\"0\" max=\"5\" onChange={handleCurrentMajorChange} readOnly={editMode ? \"\" : \"readOnly\"} />\n        </div>\n\n        <div className=\"defectOption_minor\">\n          <input type=\"number\" name=\"minor\" placeholder=\" Minor\" value={currentMinor} min=\"0\" max=\"5\" onChange={handleCurrentMinorChange} readOnly={editMode ? \"\" : \"readOnly\"} />\n        </div>\n\n        <div>\n          {editMode ? (\n            <button\n              onClick={() => {\n                handleAddDefect()\n              }}\n            >\n              Add\n            </button>\n          ) : null}\n        </div>\n        <div></div>\n      </div>\n    </Fragment>\n  )\n}\n\nexport default DefectOptions\n","import React, { Fragment } from \"react\"\n\nconst DefectList = props => {\n  const { defects, editMode, isCriticalDefect, defectLanguage, defectList }   = props\n\n  function defect_lang(product, area_code, detail) {\n      //console.log(\"input\", product, area_code, detail)\n      const defect = defectList.filter(x => x.product === product && x.defect_code === area_code && x.defect_detail_code === detail  && x.lang === defectLanguage)      \n      return defect[0]\n  }\n\n  return (\n    // present the table\n    // adding span below appends ... to the off-limit text\n    <Fragment>\n      <div className=\"defectList\">\n        <div className=\"defectList_gridHeader\">\n          <div>Product</div>\n          <div>Defect</div>\n          <div>Defect Detail</div>\n          <div className=\"defectList_major_header\">\n            Major/<br></br>Critical\n          </div>\n          <div className=\"defectList_minor_header\">Minor</div>\n          <div>Delete</div>\n        </div>\n\n        {defects.length > 0 ? (\n          defects.map(x => (\n            <div className=\"defectList_gridDetail\" key={x.id}>\n              <div className=\"defectList_gridItem defectList_product\">{x.product}</div>\n              <div className=\"defectList_gridItem defectList_defectArea\">{x.defect_area_code + \"-\" + defect_lang(x.product, x.defect_area_code, x.defect_detail_area).defect_area}</div>\n              <div className=\"defectList_gridItem  defectList_defectDetail\" style={{ color: isCriticalDefect(x.product, x.defect_detail_area) ? \"red\" : \"inherit\" }}>\n                <span>{x.defect_detail_area + \"-\" + defect_lang(x.product, x.defect_area_code, x.defect_detail_area).defect_detail}</span>\n              </div>\n              <div className=\"defectList_major\">{x.major}</div>\n              <div className=\"defectList_minor\">{x.minor}</div>\n              <div className=\"defectList_deleteButton\">\n                {editMode ? (\n                  <button\n                    onClick={() => {\n                      props.deleteDefect(x.id)\n                    }}\n                  >\n                    &times;\n                  </button>\n                ) : null}\n              </div>\n              <div></div>\n            </div>\n          ))\n        ) : (\n          <div>\n            <div colSpan={3}>No Defects</div>\n          </div>\n        )}\n      </div>\n    </Fragment>\n  )\n}\n\nexport default DefectList\n","import React from \"react\"\n\nconst ShowAlert = props => {\n  const alert = props.alert\n  const class_var = \"alert \".concat(alert.color)\n\n  return (\n    // present the table\n    <h5 className={class_var}>{alert.message}</h5>\n  )\n}\nexport default ShowAlert\n","import React from \"react\"\n\nconst CheckList = props => {\n  const { editMode, checkList } = props\n\n  checkList.sort((a, b) => a.id - b.id) // must sort to present in order...\n\n  const handleInputChange = (id, x) => {\n    var selected = []\n    if (editMode) {\n      if (id === 88) {\n        // Further Comments\n        selected = [\"Select\", \"Yes\", \"No\", \"Select\"]\n      } else {\n        selected = [\"Select\", \"OK\", \"NA\", \"X\", \"NI\"]\n      }\n\n      let index = selected.findIndex(y => y === x.result)\n      if (index === 4) {\n        index = 1\n      } else {\n        index = index + 1\n      }\n      const nextSelected = selected[index]\n      props.handleCheckItemChange(id, { ...x, result: nextSelected })\n    }\n  }\n\n  return (\n    <form\n      onSubmit={event => {\n        event.preventDefault() //  props.updateItem(item.id, item)\n      }}\n    >\n      <div className=\"checkList_header\">Basic Check List</div>\n      <div className=\"checkFormGrid\">\n        <div>\n          <table id=\"checkListTable\">\n            <thead>\n              <tr>\n                <th width=\"40%\">Category</th>\n                <th width=\"40%\">Item</th>\n                <th width=\"20%\">Result</th>\n                {/* <th>Drop Down Result</th> */}\n              </tr>\n            </thead>\n            <tbody>\n              {checkList\n                ? checkList\n                    .filter(y => y.id > 0 && y.id <= 42)\n                    .map(x => (\n                      <tr key={x.id}>\n                        {x.category ? <td>{x.category}</td> : null}\n                        {x.category ? (\n                          <td>{x.item}</td>\n                        ) : x.id === 0 ? (\n                          <td className=\"checkCellSeparation\" colSpan=\"3\"></td>\n                        ) : x.separator ? (\n                          <td className=\"checkCellSeparationHeader\" colSpan=\"3\">\n                            {x.separator}\n                          </td>\n                        ) : (\n                          <td colSpan=\"2\">{x.item}</td>\n                        )}\n\n                        {x.category || x.item ? (\n                          <td\n                            className=\"clickable checkCellResult\"\n                            onClick={() => {\n                              handleInputChange(x.id, x)\n                            }}\n                          >\n                            {x.result}\n                          </td>\n                        ) : null}\n                      </tr>\n                    ))\n                : null}\n            </tbody>\n          </table>\n        </div>\n\n        <div className=\"checkFormGridCell\">\n          <table id=\"checkListTable\" className=\"fixed\">\n            <thead>\n              <tr>\n                <th width=\"40%\">Category</th>\n                <th width=\"40%\">Item</th>\n                <th width=\"20%\">Result</th>\n                {/* <th>Drop Down Result</th> */}\n              </tr>\n            </thead>\n            <tbody>\n              {checkList\n                ? checkList\n                    .filter(y => y.id >= 43 && y.id <= 68)\n                    .map(x => (\n                      <tr key={x.id}>\n                        {x.category ? <td>{x.category}</td> : null}\n                        {x.category ? (\n                          <td>{x.item}</td>\n                        ) : x.id === 0 ? (\n                          <td className=\"checkCellSeparation\" colSpan=\"3\"></td>\n                        ) : x.separator ? (\n                          <td className=\"checkCellSeparationHeader\" colSpan=\"3\">\n                            {x.separator}\n                          </td>\n                        ) : (\n                          <td colSpan=\"2\">{x.item}</td>\n                        )}\n\n                        {x.category || x.item ? (\n                          <td\n                            className=\"clickable checkCellResult\"\n                            onClick={() => {\n                              handleInputChange(x.id, x)\n                            }}\n                          >\n                            {x.result}\n                          </td>\n                        ) : null}\n                      </tr>\n                    ))\n                : null}\n            </tbody>\n          </table>\n        </div>\n\n        <div className=\"checkFormGridCell\">\n          <table id=\"checkListTable\" className=\"fixed\">\n            <thead>\n              <tr>\n                <th width=\"40%\">Category</th>\n                <th width=\"40%\">Item</th>\n                <th width=\"20%\">Result</th>\n                {/* <th>Drop Down Result</th> */}\n              </tr>\n            </thead>\n            <tbody>\n              {checkList\n                ? checkList\n                    .filter(y => y.id >= 81)\n                    .map(x => (\n                      <tr key={x.id}>\n                        {x.category ? <td>{x.category}</td> : null}\n                        {x.category ? (\n                          <td>{x.item}</td>\n                        ) : x.id === 0 ? (\n                          <td className=\"checkCellSeparation\" colSpan=\"3\"></td>\n                        ) : x.separator ? (\n                          <td className=\"checkCellSeparationHeader\" colSpan=\"3\">\n                            {x.separator}\n                          </td>\n                        ) : (\n                          <td colSpan=\"2\">{x.item}</td>\n                        )}\n\n                        {x.category || x.item ? (\n                          <td\n                            // bgcolor=\"white\"\n                            className=\"clickable checkCellResult\"\n                            onClick={() => {\n                              handleInputChange(x.id, x)\n                            }}\n                          >\n                            {x.result}\n                          </td>\n                        ) : null}\n                      </tr>\n                    ))\n                : null}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </form>\n  )\n}\n\nexport default CheckList\n","import React, { Fragment, useState } from \"react\"\nimport axios from \"axios\"\nimport { trackPromise } from \"react-promise-tracker\"\n\nconst UploadForm = props => {\n  const { setDisplayAlert, inspectionID, editMode, currentSU, currentMF, setShowSharePointFiles, sharePointPath, inspectionDate } = props\n  const [selectedFile, setSelectedFile] = useState()\n\n  const handleFile = event => {\n    setSelectedFile({ file: event.target.files })\n  }\n\n  const handleUpload = event => {\n    //event.preventDefault()\n\n    //displayAlert('Do not hit \"UPLOAD\" button again ! Upload in progress')\n\n    const formData = new FormData()\n\n    try {\n      const files = selectedFile.file\n\n      for (let i = 0; i < files.length; i++) {\n        formData.append(`files[]`, files[i])\n        //console.log(files[i], \"hello  ---$$$\")\n      }\n\n      const inspection_date = inspectionDate.getMonth() + 1 + \"/\" + inspectionDate.getDate() + \"/\" + inspectionDate.getFullYear()\n\n      trackPromise(\n        axios({\n          url: \"/api/upload\",\n          method: \"POST\",\n          data: formData,\n          headers: {\n            inspection_id: inspectionID.mc + \"-\" + inspectionID.iteration + \"-\" + inspectionID.type.charAt(0),\n            //relative_url: \"2022InspRpt/SU\" + currentSU + \"MF\" + currentMF\n            relative_url: sharePointPath.concat(\"/\", \"SU\", currentSU, \"MF\", currentMF),\n            inspection_date: inspection_date\n          }\n        })\n          .then(res => {\n            for (var i = 0; i < res.data.length; i++) {\n              //const _id = res.data[i]._id\n              //const inspection_id = inspectionID\n              //const file_name = res.data[i].file_name\n              //const mime_type = res.data[i].mime_type\n              setShowSharePointFiles(true)\n            }\n            document.getElementById(\"sharePoint_file\").value = null\n            document.getElementById(\"sharePoint_refresh\").click()\n          })\n          .catch(err => {\n            // if (err.response.status === 413) {\n            //   console.log(err.response.data)\n            //   displayAlert(err.response.data)\n            // }\n            displayAlert(\"Your total size of upload cannot exceed 3MB\")\n          }),\n        \"sharePointUpload\"\n      )\n    } catch (error) {\n      displayAlert(\"Please select files and try again !!\")\n    }\n  }\n\n  // function getExtension(file_name) {\n  //   var parts = file_name.split(\".\")\n  //   return parts[parts.length - 1]\n  // }\n\n  // function showMimeIcon(file_name) {\n  //   const iconTypes = [\n  //     { ext: \"jpeg\", icon: \"file-image-o\" },\n  //     { ext: \"jpg\", icon: \"file-image-o\" },\n  //     { ext: \"bmp\", icon: \"file-image-o\" },\n  //     { ext: \"png\", icon: \"file-image-o\" },\n  //     { ext: \"jif\", icon: \"file-image-o\" },\n  //     { ext: \"mp4\", icon: \"file-movie-o\" },\n  //     { ext: \"avi\", icon: \"file-movie-o\" },\n  //     { ext: \"mpg\", icon: \"file-movie-o\" },\n  //     { ext: \"txt\", icon: \"file-text-o\" },\n  //     { ext: \"xlsx\", icon: \"file-excel-o\" },\n  //     { ext: \"xls\", icon: \"file-excel-o\" },\n  //     { ext: \"doc\", icon: \"file-word-o\" },\n  //     { ext: \"docx\", icon: \"file-word-o\" },\n  //     { ext: \"ppt\", icon: \"file-powepoint-o\" },\n  //     { ext: \"pdf\", icon: \"file-pdf-o\" },\n  //     { ext: \"pptx\", icon: \"file-pdf-o\" },\n  //     { ext: \"zip\", icon: \"file-zip-o\" }\n  //   ]\n\n  //   const fileExtension = getExtension(file_name)\n  //   const iconType = iconTypes.find(x => x.ext === fileExtension.toLowerCase()).icon\n  //   const iconFont = iconType ? iconType : \"fa-fa-file\" // file type not registered\n  //   return \"fa fa-\" + iconFont + \" addSpace\"\n  // }\n\n  // const deleteUpload = id => {\n  //   const newUploadTable = [...uploads]\n  //   const index = newUploadTable.findIndex(r => r._id === id)\n  //   const uploadItem = newUploadTable.find(r => r._id === id)\n  //   newUploadTable[index] = { ...uploadItem, enable: false }\n  //   //console.log(newUploadTable)\n  //   setUploads(newUploadTable)\n  // }\n\n  //encapsulate the props function as only message is different in this page\n  const displayAlert = message => {\n    setDisplayAlert({ message: message, position: 3, timeout: 3000, color: \"alert__red\" })\n  }\n\n  return (\n    <Fragment>\n      <div className=\"uploadDoc\">\n        {editMode ? (\n          <form>\n            <input type=\"file\" multiple name=\"file\" id=\"sharePoint_file\" onChange={handleFile} />\n            <button type=\"button\" onClick={handleUpload}>\n              Upload files\n            </button>\n          </form>\n        ) : null}\n\n        {/* <table id=\"uploadFiles\">\n          <tbody>\n            {uploads\n              .filter(y => y.enable)\n              .map(x => (\n                <tr key={x._id}>\n                  <td>\n                    <button\n                      className=\"button-delete small-button\"\n                      onClick={() => {\n                        deleteUpload(x._id)\n                      }}\n                    >\n                      &times;\n                    </button>\n                    <a href=\"/#\" onClick={downloadDoc(x._id, x.file_name)}>\n                      <i className={showMimeIcon(x.file_name)} />\n                      {x.file_name}\n                    </a>\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n        </table> */}\n      </div>\n    </Fragment>\n  )\n}\n\nexport default UploadForm\n","import React from \"react\"\nimport { usePromiseTracker } from \"react-promise-tracker\"\nimport Loader from \"react-loader-spinner\"\n\nexport const Spinner = props => {\n  const { promiseInProgress } = usePromiseTracker({ area: props.area })\n  const { spinnerMessage } = props\n\n  return (\n    promiseInProgress && (\n      <div\n        style={{\n          marginTop: \"0.5rem\",\n          width: \"100%\",\n          height: \"30\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          color: \"green\",\n          fontWeight: \"bold\"\n        }}\n      >\n        {/* <Loader type=\"ThreeDots\" color=\"#2BAD60\" height=\"50\" width=\"100\" /> */}\n        {/* <Loader type=\"Circles\" color=\"rgba(129, 160, 250, 255)\" height=\"40\" width=\"100\" /> */}\n        {spinnerMessage}\n        <Loader type=\"Circles\" color=\"green\" height=\"30\" width=\"100\" />\n      </div>\n    )\n  )\n}\n","import React, { Fragment } from \"react\"\n//import axios from \"axios\"\nimport { Spinner } from \"./Spinner\"\n\nconst SearchKey = props => {\n  const { checkDuplicateID, mcTable, setDisplayAlert, inspectionID, setInspectionID, clearScreen, searchInspByMC, currentMF, currentSU, editMode } = props\n\n  const handleKeyChange = event => {\n    const id = event.target.id\n    const { value } = event.target\n\n    switch (id) {\n      case \"searchKey_mc\":\n        setInspectionID({ ...inspectionID, mc: value })\n        if (value.length >= 3) searchInspByMC(value)\n        // pass first few characters of MC entered\n        else clearScreen()\n        break\n      case \"searchKey_iteration\":\n        setInspectionID({ ...inspectionID, iteration: value })\n        break\n      case \"searchKey_type\":\n        setInspectionID({ ...inspectionID, type: value })\n        break\n      default:\n        break\n    }\n  }\n\n  const validateMC = id => {\n    clearScreen()\n\n    const found = mcTable.find(x => x.mc_no === id.mc)\n    const sameMF = mcTable.find(x => x.mc_no === id.mc && x.su_no === currentSU && x.mf_no === currentMF)\n\n    if (!found) {\n      displayAlert(\"This MC doesn't exist\")\n    } else if (!sameMF) {\n      displayAlert(\"This MC exists but not for this manufacturer!\")\n    } else {\n      checkDuplicateID(id)\n    }\n  }\n\n  function isInvalidID() {\n    if (inspectionID.mc === \"\" || inspectionID.iteration === \"Select\" || inspectionID.iteration === \"\" || inspectionID.type === \"Select\") return true\n    else return false\n  }\n\n  //encapsulate the props function as only message is different in this page\n  const displayAlert = message => {\n    setDisplayAlert({ message: message, position: 0, timeout: 3000, color: \"alert__red\" })\n  }\n\n  return (\n    <Fragment>\n      <div className=\"searchKey\">\n        <div className=\"searchKey_pair\">\n          <label>MC# : </label>\n          <input type=\"text\" name=\"searchKey_mc\" id=\"searchKey_mc\" onChange={handleKeyChange} />\n        </div>\n        <div className=\"searchKey_pair\">\n          <label>Iteration : </label>\n          <input type=\"number\" name=\"searchKey_iteration\" id=\"searchKey_iteration\" placeholder=\"Iteration\" min=\"1\" max=\"9\" onChange={handleKeyChange} />\n        </div>\n        <div className=\"searchKey_pair\">\n          <label>Type : </label>\n          <select name=\"searchKey_type\" id=\"searchKey_type\" onChange={handleKeyChange}>\n            <option value=\"Select\">Select</option>\n            <option value=\"1st Line\">1st In-line</option>\n            <option value=\"2nd Line\">2nd In-Line</option>\n            <option value=\"3rd Line\">3rd In-Line</option>\n            <option value=\"4th Line\">4th In-Line</option>\n            <option value=\"5th Line\">5th In-Line</option>\n            <option value=\"1st Pre-final\">1st Pre-final</option>\n            <option value=\"2nd Pre-final\">2nd Pre-final</option>\n            <option value=\"Pre-Production Meeting\">Pre-Production Meeting</option>\n            <option value=\"Final\">Final</option>\n            <option value=\"Re-inspection for Failure\">Re-inspection for Failure</option>\n          </select>\n        </div>\n        <div></div>\n        {!editMode ? (\n          <div>\n            {!isInvalidID() ? (\n              <div>\n                <button\n                  onClick={() => {\n                    validateMC(inspectionID)\n                  }}\n                >\n                  Create Inspection\n                </button>\n              </div>\n            ) : null}\n          </div>\n        ) : null}\n      </div>\n      <Spinner area=\"searchKey\" />\n    </Fragment>\n  )\n}\n\nexport default SearchKey\n","import React, { Fragment } from \"react\"\n\nconst MainMenu = props => {\n  const { handleSave, handleDelete, handleSearch, inspectionID, printReport, editMode, setEditMode, userProfile, misc, showFull, clearScreen, updateHistory } = props\n\n  const submitted = misc.submitted\n  const editable = userProfile.ignore_submit === undefined ? false : userProfile.ignore_submit\n\n  const handleClick = event => {\n    const id = event.target.id\n\n    setEditMode(false)\n\n    if (id === \"save\") {\n      submitted ? handleSave(true) : handleSave(false)\n    }\n\n    if (id === \"edit\") {\n      setEditMode(true)\n    }\n\n    if (id === \"delete\") {\n      handleDelete(inspectionID)\n    }\n    if (id === \"search\") {\n      setEditMode(false)\n      handleSearch(inspectionID)\n    }\n    if (id === \"print\") {\n      printReport(\"Inspection_Report.xlsx\", false)\n    }\n    if (id === \"print_draft\") {\n      // print draft watermark\n      printReport(\"Inspection_Report.xlsx\", true)\n    }\n\n    if (id === \"cancel\") {\n      setEditMode(false)\n      clearScreen()\n    }\n  }\n  return (\n    <Fragment>\n      <div className=\"mainMenu\">\n        <div className=\"mainMenu_inspectionKey\">\n          Inspection Key : &nbsp;&nbsp;\n          {/* {(submitted || \"\") && showFull ? <i className=\"fa fa-lock mainMenu_lock\"></i> : null} */}\n          {(submitted || \"\") && showFull ? (\n            <i\n              className=\"fa fa-lock mainMenu_lock clickable\"\n              onClick={() => {\n                if (editable) {\n                  var confirm = window.confirm(\"Are you sure you want to unlock this inspeciton ? \")\n                  if (confirm === true) {\n                    handleSave(false)\n                  }\n                } else {\n                  alert(\"You have no rights to unlock this inspeciton !\")\n                }\n              }}\n            ></i>\n          ) : null}\n          {(!submitted || \"\") && showFull ? (\n            <i\n              className=\"fa fa-unlock mainMenu_unlock clickable\"\n              onClick={() => {\n                var confirm = window.confirm(\"Are you sure you want to submit or lock this inspeciton ? \")\n                if (confirm === true) {\n                  handleSave(true)\n                }\n              }}\n            ></i>\n          ) : null}\n        </div>\n        {editMode || \"\" ? (\n          <button id=\"save\" onClick={handleClick}>\n            Save\n          </button>\n        ) : null}\n        {!editMode ? (\n          <button id=\"search\" onClick={handleClick}>\n            Search\n          </button>\n        ) : null}\n        {!editMode && showFull && (!submitted || editable) ? (\n          <button id=\"edit\" onClick={handleClick}>\n            Edit&nbsp;\n            {(submitted || \"\") && showFull ? <i className=\"fa fa-lock\"></i> : null}\n          </button>\n        ) : null}\n        {editMode ? (\n          <button id=\"cancel\" onClick={handleClick}>\n            Cancel\n          </button>\n        ) : null}\n        {!editMode && submitted ? (\n          <button id=\"print\" onClick={handleClick}>\n            Print\n          </button>\n        ) : null}\n        {!editMode && !submitted && showFull ? (\n          <button id=\"print_draft\" onClick={handleClick}>\n            Print Draft\n          </button>\n        ) : null}\n\n        {(showFull || \"\") && editable && showFull && updateHistory.length > 0 ? (\n          <button id=\"delete\" onClick={handleClick} className=\"deleteButton\">\n            Delete\n          </button>\n        ) : null}\n      </div>\n    </Fragment>\n  )\n}\n\nexport default MainMenu\n","import React, { Fragment } from \"react\"\nimport { Spinner } from \"./Spinner\"\n\nconst SearchedMC = props => {\n  const { setInspectionID, handleSearch, searchedMC, setShowSearchedMC, mcTable, currentSU, currentMF } = props\n\n  const newSearchedMC = []\n  for (var i = 0; i < searchedMC.length; i++) {\n    const mc_no = searchedMC[i].mc\n    const rec = mcTable.find(x => x.mc_no === mc_no && x.su_no === currentSU && x.mf_no === currentMF)\n    if (rec) {\n      newSearchedMC.push(searchedMC[i])\n    }\n  }\n\n  const handleClick = id => {\n    setInspectionID(id)\n    handleSearch(id)\n    // Set search fields in SearchKey.js\n    document.getElementById(\"searchKey_mc\").value = id.mc\n    document.getElementById(\"searchKey_iteration\").value = id.iteration\n    document.getElementById(\"searchKey_type\").value = id.type\n    setShowSearchedMC(false)\n  }\n\n  return (\n    // present the table\n    <Fragment>\n      <div className=\"searchedMC\">\n        <div className=\"searchedMC_header1 searchedMC_header\">\n          <div></div>\n          <div>MC</div>\n          <div>Iteration</div>\n          <div>Type</div>\n        </div>\n        <div className=\"searchedMC_header2 searchedMC_header\">\n          <div></div>\n          <div>MC</div>\n          <div>Iteration</div>\n          <div>Type</div>\n        </div>\n        <div className=\"searchedMC_header3 searchedMC_header\">\n          <div></div>\n          <div>MC</div>\n          <div>Iteration</div>\n          <div>Type</div>\n        </div>\n        {newSearchedMC.length > 0\n          ? newSearchedMC.map(x => (\n              <div\n                className=\"searchedMC_detail\"\n                key={x.id}\n                onClick={() => {\n                  handleClick({ mc: x.mc, iteration: x.iteration, type: x.type })\n                }}\n              >\n                <div></div>\n                <div>{x.mc}</div>\n                <div>{x.iteration}</div>\n                <div>{x.type}</div>\n              </div>\n            ))\n          : null}\n      </div>\n      <Spinner area=\"mfrSelection\" />\n    </Fragment>\n  )\n}\n\nexport default SearchedMC\n","import React, { Fragment } from \"react\"\n\nconst SupplierInfo = props => {\n  const { currentSU, currentMF, currentSUName, currentMFName, setSelectingSupplier, setShowFull, setMFRsearch } = props\n\n  const changeSelectingSuppler = () => {\n    setSelectingSupplier(true)\n  }\n\n  return (\n    // present the table\n    <Fragment>\n      {!!currentSU ? (\n        <div className=\"supplierInfo\">\n          <button\n            onClick={() => {\n              setShowFull(false)\n              setMFRsearch(\"\")\n              changeSelectingSuppler()\n            }}\n          >\n            Select\n          </button>\n          <div className=\"supplierInfo_capitalize supplierInfoSU\" id=\"supplierInfo_bar\">\n            {currentSUName.toLowerCase()} ({currentSU})\n          </div>\n          <div className=\"supplierInfo_capitalize supplierInfoMF\">\n            {currentMFName.toLowerCase()} ({currentMF})\n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  )\n}\nexport default SupplierInfo\n","import React, { Fragment } from \"react\"\n\nconst MfrSelection = props => {\n  const { partyTable, setCurrentSU, setCurrentMF, setCurrentSUName, setCurrentMFName, selectingSupplier, setSelectingSupplier, setMFRsearch, mfrSearch } = props\n\n  const handleClick = (su, mf, su_name, mf_name) => {\n    setCurrentSU(su)\n    setCurrentMF(mf)\n    setCurrentSUName(su_name)\n    setCurrentMFName(mf_name)\n    setSelectingSupplier(false)\n  }\n\n  const handleMFRsearch = event => {\n    const { value } = event.target\n    setMFRsearch(value.toUpperCase())\n  }\n\n  return (\n    // present the table\n    <Fragment>\n      {partyTable && selectingSupplier ? (\n        <div>\n          <div className=\"mfrSelection_header\"> Select a manufacturer below:</div>\n          <div className=\"mfrSelection_input\">\n            <input type=\"text\" id=\"mfrSearch\" name=\"mfrSearch\" justify=\"left\" onChange={handleMFRsearch} style={{ textTransform: \"uppercase\" }} placeholder=\"Type to search\" />\n          </div>\n        </div>\n      ) : null}\n      {partyTable && selectingSupplier\n        ? partyTable\n            .filter(y => mfrSearch.length === 0 || y.SU_NAME.concat(\" (\", y.SU, \" \", y.MF, \" \", y.MF_NAME).search(mfrSearch) > 0)\n            .map(x => (\n              <div\n                className=\"mfrSelection\"\n                key={x.SU.concat(x.MF)}\n                onClick={() => {\n                  handleClick(x.SU, x.MF, x.SU_NAME, x.MF_NAME)\n                }}\n              >\n                <div className=\"mfrSelectionSU\">\n                  {x.SU_NAME} ({x.SU}){\" \"}\n                </div>\n                <div className=\"mfrSelectionMF\">\n                  {x.MF_NAME} ({x.MF}){\" \"}\n                </div>\n              </div>\n            ))\n        : null}\n    </Fragment>\n  )\n}\nexport default MfrSelection\n","import React from \"react\"\nimport DatePicker from \"react-datepicker\"\n\nconst Misc = props => {\n  const { setInspectionDate, inspectionDate, setMisc, misc, editMode } = props\n\n  const handleDate = date => {\n    setInspectionDate(date)\n  }\n\n  // Misc Fields (Text) Capture\n  const handleChange = (element, yes_or_no) => event => {\n    let value = event.target.value\n\n    if (misc) {\n      let newMisc = { ...misc }\n      switch (element) {\n        case 2: //b\n          newMisc = { ...newMisc, product_type: value }\n          break\n        case 3: //c\n          newMisc = { ...newMisc, lab_test_report: value }\n          break\n        case 4: //d\n          newMisc = { ...newMisc, lab_child_safety_report: value }\n          break\n        case 5: //e\n          newMisc = { ...newMisc, fibre_content: value }\n          break\n        case 6: //f\n          newMisc = { ...newMisc, comments: value }\n          break\n        case 7: //g\n          newMisc = { ...newMisc, governance_inspection: yes_or_no }\n          break\n        case 8: //h\n          newMisc = { ...newMisc, props65_report: value }\n          break\n        case 9: //i\n          newMisc = { ...newMisc, ship_mode: value }\n          break\n        case 10: //j\n          newMisc = { ...newMisc, pack_pct: value }\n          break\n        case 11: //k\n          newMisc = { ...newMisc, ship_window: value }\n          break\n        case 12: //l\n          newMisc = { ...newMisc, carton_list: value }\n          break\n        case 13: //m\n          newMisc = { ...newMisc, carton_total: value }\n          break\n        case 14: //n\n          newMisc = { ...newMisc, inspector: value }\n          break\n        case 15: //n\n          newMisc = { ...newMisc, qa_type: value }\n          break\n\n        default:\n          console.log(\"No element\")\n      }\n      setMisc(newMisc)\n    }\n  }\n\n  return (\n    <div className=\"misc\">\n      <div className=\"misc_a\">\n        <div className=\"misc_title misc_grid_a\">\n          <div>Inspection Date (A)</div>\n          <DatePicker className=\"datePicker\" dateFormat=\"MM/dd/yy\" selected={inspectionDate} onChange={date => handleDate(date)} readOnly={editMode ? \"\" : \"readOnly\"} />\n        </div>\n      </div>\n\n      <div className=\"misc_g misc_grid_g\">\n        <div className=\"misc_title\">Governance Inspection (G)</div>\n        <div>\n          <input type=\"radio\" id=\"misc_governance_inspection_yes\" name=\"misc_governance_inspection\" value={misc.governance_inspection || \"\"} checked={misc.governance_inspection === \"Yes\"} onChange={handleChange(7, \"Yes\")} disabled={editMode ? \"\" : \"disabled\"} />\n        </div>\n        <div>Yes</div>\n        <div></div>\n        <div>\n          <input type=\"radio\" id=\"misc_governance_inspection_no\" name=\"misc_governance_inspection\" value={misc.governance_inspection || \"\"} checked={misc.governance_inspection === \"No\"} onChange={handleChange(7, \"No\")} disabled={editMode ? \"\" : \"disabled\"} />\n        </div>\n        <div>No</div>\n      </div>\n\n      <div className=\"misc_j misc_grid_j\">\n        <div className=\"misc_title\">Pack % During Inspection (J)</div>\n        <input type=\"text\" id=\"misc_packPct\" name=\"misc_packPct\" value={misc.pack_pct || \"\"} justify=\"left\" placeholder=\"%\" onChange={handleChange(10)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_k misc_grid_k\">\n        <div className=\"misc_title\">Ship Window (K)</div>\n        <input type=\"text\" id=\"misc_shipWindow\" name=\"misc_shipWindow\" value={misc.ship_window || \"\"} justify=\"left\" placeholder=\"Ship Window\" onChange={handleChange(11)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_b misc_grid_b\">\n        <div className=\"misc_title\">Product Type (B)</div>\n        <input type=\"text\" id=\"misc_productType\" name=\"misc_productType\" value={misc.product_type || \"\"} justify=\"left\" placeholder=\"Product Type\" onChange={handleChange(2)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_o misc_grid_o\">\n          <div className=\"misc_title\">QA Type (O)</div>\n\n          <select id=\"misc_qaType\" name=\"misc_qaType\" value={misc.qa_type || \"Select\"} justify=\"left\" placeholder=\"QA Type\" onChange={handleChange(15)}>\n            <option value=\"Select\" disabled=\"disabled\">\n              Select\n            </option>\n            <option value=\"MQA\" disabled={editMode ? \"\" : \"disabled\"}>\n              MQA\n            </option>\n            <option value=\"SQA\" disabled={editMode ? \"\" : \"disabled\"}>\n              SQA\n            </option>\n          </select>\n      </div>\n\n      <div className=\"misc_n misc_grid_n\">\n        <div className=\"misc_title\">Inspector (N)</div>\n        <input type=\"text\" id=\"misc_inspector\" name=\"misc_inspector\" value={misc.inspector || \"\"} justify=\"left\" placeholder=\"Inspector\" onChange={handleChange(14)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n    \n      <div className=\"misc_c misc_grid_c\">\n        <div className=\"misc_title\">Lab Test Report (C)</div>\n\n        <select id=\"misc_labTest\" name=\"misc_labTest\" value={misc.lab_test_report || \"Select\"} justify=\"left\" placeholder=\"Test result\" onChange={handleChange(3)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"N/A\" disabled={editMode ? \"\" : \"disabled\"}>\n            N/A\n          </option>\n          <option value=\"Pending\" disabled={editMode ? \"\" : \"disabled\"}>\n            Pending         \n          </option>\n          <option value=\"Pass\" disabled={editMode ? \"\" : \"disabled\"}>\n            Pass\n          </option>\n          <option value=\"Fail\" disabled={editMode ? \"\" : \"disabled\"}>\n            Fail\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_d misc_grid_d\">\n        <div className=\"misc_title\">Child Safety Report (D)</div>\n\n        <select id=\"misc_childSafetyReport\" name=\"misc_childSafetyReport\" value={misc.lab_child_safety_report || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(4)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"N/A\" disabled={editMode ? \"\" : \"disabled\"}>\n            N/A\n          </option>\n          <option value=\"Pending\" disabled={editMode ? \"\" : \"disabled\"}>\n            Pending\n          </option>\n          <option value=\"Accept\" disabled={editMode ? \"\" : \"disabled\"}>\n            Accept\n          </option>\n          <option value=\"Reject\" disabled={editMode ? \"\" : \"disabled\"}>\n            Reject\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_h misc_grid_h\">\n        <div className=\"misc_title\">Props 65 Report (H)</div>\n        <select id=\"misc_props65Report\" name=\"misc_props65Report\" value={misc.props65_report || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(8)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"N/A\" disabled={editMode ? \"\" : \"disabled\"}>\n            N/A\n          </option>\n          <option value=\"Pending\" disabled={editMode ? \"\" : \"disabled\"}>\n            Pending\n          </option>\n          <option value=\"Accept\" disabled={editMode ? \"\" : \"disabled\"}>\n            Accept\n          </option>\n          <option value=\"Reject\" disabled={editMode ? \"\" : \"disabled\"}>\n            Reject\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_i misc_grid_i\">\n        <div className=\"misc_title\">Ship Mode (I)</div>\n\n        <select id=\"misc_shipMode\" name=\"misc_shipMode\" value={misc.ship_mode || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(9)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"Ocean\" disabled={editMode ? \"\" : \"disabled\"}>\n            Ocean\n          </option>\n          <option value=\"Air\" disabled={editMode ? \"\" : \"disabled\"}>\n            Air\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_e misc_grid_e\">\n        <div className=\"misc_title\">Fibre Content (E)</div>\n        <input type=\"text\" id=\"misc_fibreContent\" name=\"misc_fibreContent\" value={misc.fibre_content || \"\"} justify=\"left\" placeholder=\"Fibre Content\" onChange={handleChange(5)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_f misc_grid_f\">\n        <div className=\"misc_title\">Comments (F)</div>\n        <textarea rows=\"5\" cols=\"50\" id=\"misc_comments\" name=\"misc_comments\" value={misc.comments || \"\"} justify=\"left\" placeholder=\"Comments\" onChange={handleChange(6)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      \n\n      <div className=\"misc_l misc_grid_l\">\n        <div className=\"misc_title\">Carton List (L)</div>\n        <textarea rows=\"3\" cols=\"50\" id=\"misc_cartonList\" name=\"misc_cartonList\" value={misc.carton_list || \"\"} justify=\"left\" placeholder=\"Carton List\" onChange={handleChange(12)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_m misc_grid_m\">\n        <div className=\"misc_title\">Carton Total (M)</div>\n        <input type=\"text\" id=\"misc_cartonTotal\" name=\"misc_cartonTotal\" value={misc.carton_total || \"\"} justify=\"left\" placeholder=\"Carton Total\" onChange={handleChange(13)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n\n    </div>\n\n  )\n}\nexport default Misc\n","import React, { Fragment } from \"react\"\n\nconst Result = props => {\n  const { setMisc, misc, editMode, visualResult, calculateFinalResult } = props\n\n  function calculate_final_result(misc) {\n    if (misc.packing_result === \"Failed\" || (misc.measurement_result === \"Failed\") | (visualResult === \"Failed\")) {\n      return \"Failed\"\n    } else {\n      return \"Passed\"\n    }\n  }\n\n  const handleChange = (element, param2) => event => {\n    let value = event.target.value\n    if (misc) {\n      let newMisc = { ...misc }\n      switch (element) {\n        case 1: //a  Packing\n          newMisc = { ...newMisc, packing_result: value }\n          if (value === \"Failed\") {\n            newMisc = { ...newMisc, final_result: \"Failed\" }\n          } else {\n            newMisc = { ...newMisc, final_result: calculate_final_result(newMisc) }\n          }\n          break\n        case 2: //b  Measurement\n          newMisc = { ...newMisc, measurement_result: value }\n          if (value === \"Failed\") {\n            newMisc = { ...newMisc, final_result: \"Failed\" }\n          } else {\n            newMisc = { ...newMisc, final_result: calculate_final_result(newMisc) }\n          }\n          break\n        default:\n          console.log(\"No element\")\n      }\n      setMisc(newMisc)\n    }\n  }\n\n  return (\n    <Fragment>\n      <div className=\"result\">\n        <div className=\"result_f result_grid_f\"> Inspection Result Summary</div>\n        <div></div>\n        <div></div>\n\n        <div className=\"result_a result_grid_a\">\n          <div className=\"result_title\">Packing</div>\n          <select id=\"result_packingResult\" name=\"misc_packingResult\" value={misc.packing_result || \"Select\"} justify=\"left\" placeholder=\"Packing Result\" onChange={handleChange(1)}>\n            <option value=\"Select\" disabled=\"disabled\">\n              Select\n            </option>\n            <option value=\"Passed\" disabled={editMode ? \"\" : \"disabled\"}>\n              Passed\n            </option>\n            <option value=\"Failed\" disabled={editMode ? \"\" : \"disabled\"}>\n              Failed\n            </option>\n          </select>\n        </div>\n\n        <div className=\"result_b result_grid_b\">\n          <div className=\"result_title\">Measurement</div>\n          <select id=\"result_measurementResult\" name=\"misc_measurementResult\" value={misc.measurement_result || \"Select\"} justify=\"left\" placeholder=\"Measurement result\" onChange={handleChange(2)}>\n            <option value=\"Select\" disabled=\"disabled\">\n              Select\n            </option>\n            <option value=\"Passed\" disabled={editMode ? \"\" : \"disabled\"}>\n              Passed\n            </option>\n            <option value=\"Failed\" disabled={editMode ? \"\" : \"disabled\"}>\n              Failed\n            </option>\n          </select>\n        </div>\n\n        <div className=\"result_c result_grid_c\">\n          <div className=\"result_title\">Critical / Major / Minor</div>\n          <input type=\"text\" id=\"result_defectiveResult\" name=\"result_defectiveResult\" value={visualResult.defective_result || \"\"} justify=\"left\" placeholder=\"\" readOnly=\"readOnly\" />\n        </div>\n\n        <div className=\"result_d result_grid_d\">\n          <div className=\"result_title\">Sample Threshold (Major / Minor)</div>\n          <input type=\"text\" id=\"result_sampleThreshold\" name=\"result_sampleThreshold\" value={visualResult.sample_threshold || \"\"} justify=\"left\" placeholder=\"\" readOnly=\"readOnly\" />\n        </div>\n\n        <div className=\"result_e result_grid_e\">\n          <div className=\"result_title\">Final Result</div>\n          <input type=\"text\" id=\"result_finalResult\" name=\"result_finalResult\" value={calculateFinalResult()} justify=\"left\" placeholder=\"\" readOnly=\"readOnly\" />\n        </div>\n\n        <div className=\"result_g result_grid_g\">\n          <div className=\"result_title\">Visual Result</div>\n          <input type=\"text\" id=\"result_visualResult\" name=\"result_visualResult\" value={visualResult.visual_result || \"Passed\"} justify=\"left\" placeholder=\"\" readOnly=\"readOnly\" />\n        </div>\n      </div>\n    </Fragment>\n  )\n}\nexport default Result\n","import { React, Fragment } from \"react\"\n\nconst ChangeTrack = props => {\n  const { updateHistory, showHistory, setShowHistory, convertToLocal } = props\n\n  var history = [...updateHistory]\n\n  history.sort(function (a, b) {\n    // note : must change the string back to date object for comparison\n    if (Date.parse(a.updated_time) > Date.parse(b.updated_time)) return -1\n    else return 1\n  })\n\n  let root = document.querySelector(\":root\")\n\n  return (\n    <Fragment>\n      <div className=\"changeTrack_section_upper\">\n        <div>Change History</div>\n        <div></div>\n        <div>\n          Show &nbsp;\n          <i\n            className=\"clickable fa fa-plus\"\n            onClick={() => {\n              setShowHistory(true)\n            }}\n          ></i>\n          &nbsp;&nbsp;Hide &nbsp;\n          <i\n            className=\"clickable fa fa-minus\"\n            onClick={() => {\n              setShowHistory(false)\n            }}\n          ></i>\n        </div>\n        <div></div>\n        <div>\n          Expand &nbsp;\n          <i\n            className=\"clickable fa fa-plus\"\n            onClick={() => {\n              //change class attribute dynamically\n              root.style.setProperty(\"--changeTrack_max_height\", \"100rem\")\n            }}\n          ></i>\n          &nbsp;&nbsp; Collapse &nbsp;\n          <i\n            className=\"clickable fa fa-minus\"\n            onClick={() => {\n              //change class attribute dynamically\n              root.style.setProperty(\"--changeTrack_max_height\", \"4.3rem\")\n            }}\n          ></i>\n        </div>\n        <div></div>\n      </div>\n      {showHistory ? (\n        <div className=\"changeTrack_section_bottom\">\n          <div className=\"changeTrack_grid_header\">\n            <div>Local Time</div>\n            <div>Updated By</div>\n            <div>Mode</div>\n            <div>Result Details</div>\n            <div></div>\n          </div>\n\n          <div className=\"changeTrack_grid_outer_detail\">\n            {history.length > 0\n              ? history.map(line => (\n                  <div key={line.id} className=\"changeTrack_grid_detail\">\n                    <div>{convertToLocal(line.updated_time)}</div>\n                    <div>{line.updated_by}</div>\n                    <div>{line.updated_mode}</div>\n                    <div>{line.misc}</div>\n                  </div>\n                ))\n              : null}\n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  )\n}\n\nexport default ChangeTrack\n","import React, { Fragment } from \"react\"\n\nconst SharePoint = props => {\n  const { inspectionID, currentSU, currentMF, editMode, getSharePointFiles, setShowSharePointFiles, showSharePointFiles, setSharePointFiles, sharePointPath, createsharePointPDF } = props\n\n  // const handleClick_add = () => {\n  //   const url = \"https://macysinc.sharepoint.com/sites/OSO/\".concat(sharePointPath, \"/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F\", sharePointPath, \"%2F\", \"SU\", currentSU, \"MF\", currentMF, \"&dt=\", new Date().getTime())\n  //   var newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  //   if (newWindow) newWindow.opener = null\n  // }\n\n  const handleClick_view = () => {\n    const url = \"https://macysinc.sharepoint.com/sites/OSO/\".concat(sharePointPath, \"/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F\", sharePointPath, \"%2F\", \"SU\", currentSU, \"MF\", currentMF, \"&view=7&q=\", inspectionID.mc, \"&FilterField1=Inspection_x0020_ID&FilterValue1=\", inspectionID.mc, \"-\", inspectionID.iteration, \"-\", inspectionID.type[0], \"&dt=\", new Date().getTime())\n    var newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n    if (newWindow) newWindow.opener = null\n  }\n\n  const handleToggleSharePointFiles = () => {\n    if (showSharePointFiles === true) {\n      setShowSharePointFiles(false)\n      setSharePointFiles([])\n    } else {\n      setShowSharePointFiles(true)\n      getSharePointFiles()\n    }\n  }\n\n  const handleGetSharePointFiles = () => {\n    if (showSharePointFiles) {\n      setSharePointFiles([])\n      getSharePointFiles()\n    }\n  }\n\n  return (\n    <Fragment>\n      <div className=\"sharePoint_section\">Document Management on SharePoint</div>\n      <div className=\"sharePoint_grid\">\n        <div className=\"sharePoint_cell\">\n          <img src=\"../static/img/sharePointx.jpg\" alt=\"sharePoint\" className=\"sharePoint_photo\" />\n        </div>\n        <div></div>\n\n        <div className=\"sharePoint_cell\">\n          View files&nbsp;\n          <i\n            className=\"fa  fa-sign-in clickable\"\n            onClick={() => {\n              handleClick_view()\n            }}\n          ></i>\n        </div>\n\n        {/* Remove add function to sharePoint */}\n        {/* {editMode ? (\n          <div className=\"sharePoint_cell\">\n            Add files&nbsp;\n            <i\n              className=\"fa  fa-sign-in clickable\"\n              onClick={() => {\n                handleClick_add()\n              }}\n            ></i>\n          </div>\n        ) : (\n          <div className=\"sharePoint_cell\"></div>\n        )} */}\n\n        {/* Combine photo into PDF */}\n        {editMode ? (\n          <div className=\"sharePoint_cell\">\n            Create Photo Album&nbsp;\n            <i\n              className=\"fa  fa-file-pdf-o clickable\"\n              onClick={() => {\n                createsharePointPDF()\n              }}\n            ></i>\n          </div>\n        ) : (\n          <div className=\"sharePoint_cell\"></div>\n        )}\n\n        <div className=\"sharePoint_cell\">\n          Instant View : &nbsp;&nbsp;\n          {showSharePointFiles ? \"Collapse\" : \"Expand\"}\n          &nbsp;\n          <i\n            className={\"clickable fa \" + (showSharePointFiles ? \"fa-minus\" : \"fa-plus\")}\n            onClick={() => {\n              handleToggleSharePointFiles()\n            }}\n          ></i>\n          &nbsp; &nbsp;\n          <i\n            id=\"sharePoint_refresh\"\n            className=\"clickable fa fa-refresh\"\n            onClick={() => {\n              handleGetSharePointFiles()\n            }}\n          ></i>\n          &nbsp; &nbsp;\n        </div>\n      </div>\n    </Fragment>\n  )\n}\nexport default SharePoint\n","import React, { Fragment } from \"react\"\n\nconst ShowSharePointFiles = props => {\n  const { sharePointFiles, downloadSharePointFile, showSharePointFiles, convertToLocal, editMode, handleDeleteSPfile } = props\n\n  const ext = [\".jpg\", \".png\"]\n  function isSupportPicExt(filename) {\n    for (let i = 0; i < ext.length; i++) {\n      if (filename.toLowerCase().includes(ext[i])) {\n        return true\n      }\n    }\n    return false\n  }\n\n  // const openPhoto = url => {\n  //   const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  //   if (newWindow) newWindow.opener = null\n  // }\n\n  return (\n    <Fragment>\n      {showSharePointFiles ? (\n        <div className=\"showSharePointFiles_section\">\n          <div className=\"showSharePointFiles_grid_header\">\n            <div>File Name</div>\n            <div>Last Editor</div>\n            <div>Last Edit Time</div>\n            <div>File Size</div>\n            <div>Download</div>\n            <div>File Type</div>\n            <div>Delete</div>\n          </div>\n\n          <div>\n            {sharePointFiles.length > 0\n              ? sharePointFiles.map(line =>\n                  line.filename === \"No files\" ? (\n                    <div className=\"sharePointFiles_no_files\">{line.filename}</div>\n                  ) : (\n                    <div key={line.unique_id} className=\"showSharePointFiles_grid_detail\">\n                      <div>{line.filename}</div>\n                      <div>{line.editor === \"SharePoint App\" ? line.last_editor : line.editor}</div>\n                      <div>{convertToLocal(line.modified)}</div>\n                      <div>{line.size}</div>\n                      <div>\n                        <i\n                          className=\"clickable fa fa-download\"\n                          onClick={() => {\n                            downloadSharePointFile(line.filename)\n                          }}\n                        ></i>\n                      </div>\n                      {isSupportPicExt(line.filename) ? (\n                        <div className=\"sharePointFiles_photoBlock\">\n                          <img src={\"/showPhoto?folder=\" + line.folder + \"&filename=\" + line.filename} alt=\"\" />\n                        </div>\n                      ) : (\n                        <div>\n                          <i className=\"fa fa-file fa-file-doc\"></i>\n                        </div>\n                      )}\n\n                      {editMode ? (\n                        <div>\n                          <button\n                            id=\"sharePointFiles_deleteButton\"\n                            onClick={() => {\n                              handleDeleteSPfile(line.unique_id)\n                              //props.deleteDefect(x.id)\n                            }}\n                          >\n                            &times;\n                          </button>\n                        </div>\n                      ) : (\n                        <div>&nbsp;</div>\n                      )}\n                    </div>\n                  )\n                )\n              : null}\n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  )\n}\nexport default ShowSharePointFiles\n","import React, { Fragment } from \"react\"\nimport { Spinner } from \"./Spinner\"\n\nconst ShowSpinner = props => {\n  const { position } = props\n\n  return (\n    <Fragment>\n      {position === 1 ? <Spinner area=\"getUserProfile\" spinnerMessage=\"Loading your profile, please wait... \" /> : null}\n      {position === 2 ? (\n        <div>\n          <Spinner area=\"printReport\" spinnerMessage=\"Preparing the report, please wait... \" />\n          <Spinner area=\"saveInspection\" spinnerMessage=\"Saving the changes, please wait... \" />\n          <Spinner area=\"deleteInspection\" spinnerMessage=\"Deleting, please wait... \" />\n          <Spinner area=\"createInspection\" spinnerMessage=\"Loading, please wait... \" />\n        </div>\n      ) : null}\n      {position === 3 ? (\n        <div>\n          <Spinner area=\"sharePointFiles\" spinnerMessage=\"Loading SharePoint info, please wait... \" />\n          <Spinner area=\"downloadSharePointfiles\" spinnerMessage=\"Downloading SharePoint info, please wait... \" />\n          <Spinner area=\"sharePointUpload\" spinnerMessage=\"Uploading file(s) to SharePoint, please wait... \" />\n        </div>\n      ) : null}\n      {position === 10 ? <Spinner area=\"pastInspection\" spinnerMessage=\"Loading past inspections, please wait... \" /> : null}\n    </Fragment>\n  )\n}\nexport default ShowSpinner\n","import React, { useState, Fragment, useEffect } from \"react\"\n\nimport axios from \"axios\"\nimport ItemTable from \"./components/ItemTable\"\nimport ItemTotal from \"./components/ItemTotal\"\nimport DefectOptions from \"./components/DefectOptions\"\nimport DefectList from \"./components/DefectList\"\nimport ShowAlert from \"./components/ShowAlert\"\nimport CheckList from \"./components/CheckList\"\nimport UploadForm from \"./components/UploadForm\"\nimport SearchKey from \"./components/SearchKey\"\nimport MainMenu from \"./components/MainMenu\"\nimport SearchedMC from \"./components/SearchedMC\"\nimport SupplierInfo from \"./components/SupplierInfo\"\n// import PhotoBlock from \"./components/PhotoBlock\"\nimport MfrSelection from \"./components/MfrSelection\"\nimport Misc from \"./components/Misc\"\nimport Result from \"./components/Result\"\nimport ChangeTrack from \"./components/ChangeTrack\"\nimport SharePoint from \"./components/SharePoint\"\nimport ShowSharePointFiles from \"./components/ShowSharePointFiles\"\n\nimport { v4 as uuidv4 } from \"uuid\"\nimport { trackPromise } from \"react-promise-tracker\"\nimport ShowSpinner from \"./components/ShowSpinner\"\n\nconst App = () => {\n  //const initialFormState = { id: null, mc_no: \"\", item_no: \"\", order_qty: \"\", ship_qty: \"\" }\n  const initialInspectionID = { mc: \"\", iteration: \"Select\", type: \"Select\" }\n\n  // Setting state\n  const [items, setItems] = useState([])\n  const [showSearchedMC, setShowSearchedMC] = useState(false)\n  const [defects, setDefects] = useState([])\n  // set position 100 as impossible range as equivalent to empty\n  const [alert, setAlert] = useState({ position: 100 })\n  const [mcTable, setMCTable] = useState([])\n  const [checkList, setCheckList] = useState([])\n  const [inspectionDate, setInspectionDate] = useState(new Date())\n  const [inspectionID, setInspectionID] = useState(initialInspectionID)\n  const [uploads, setUploads] = useState([])\n  const [userProfile, setUserProfile] = useState([])\n  const [currentSU, setCurrentSU] = useState(\"\")\n  const [currentMF, setCurrentMF] = useState(\"\")\n  const [searchedMC, setSearchedMC] = useState([])\n  const [itemSearchString, setItemSearchString] = useState(\"\")\n  const [partyTable, setPartyTable] = useState([])\n  const [currentSUName, setCurrentSUName] = useState(\"\")\n  const [currentMFName, setCurrentMFName] = useState(\"\")\n  const [selectingSupplier, setSelectingSupplier] = useState(true)\n  const [mfList, setMfList] = useState([])\n  const [aqlTable, setAqlTable] = useState([])\n  const [editMode, setEditMode] = useState(false)\n  const [misc, setMisc] = useState({})\n  const [main, setMain] = useState({})\n  const [showFull, setShowFull] = useState(false)\n  const [itemsTotal, setItemsTotal] = useState([])\n  const [shippedTotal, setShippedTotal] = useState(0)\n  const [sampleTotal, setSampleTotal] = useState(0)\n  const [visualResult, setVisualResult] = useState({})\n\n  const [constructTotal, setConstructTotal] = useState(false)\n  const [inspectTotal, setInspectTotal] = useState(0)\n  const [aqlSampleTotal, setAqlSampleTotal] = useState(0)\n  const [updateHistory, setUpdateHistory] = useState([])\n  const [showHistory, setShowHistory] = useState(false)\n  const [sharePointFiles, setSharePointFiles] = useState([])\n  const [showSharePointFiles, setShowSharePointFiles] = useState(false)\n  const [checkListTemplate, setCheckListTemplate] = useState([])\n\n  const [defectLanguage, setDefectLanguage] = useState(\"en\")\n  const [defectList, setDefectList] = useState([])\n  const [criticalDefects, setCriticalDefects] = useState([])\n\n  const [sharePointPath, setSharePointPath] = useState()\n  const [mfrSearch, setMFRsearch] = useState(\"\")\n\n  // Data\n\n  useEffect(() => {\n    let root = document.querySelector(\":root\")\n    const userAgent = navigator.userAgent.toLowerCase()\n    const isTablet = /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent)\n\n    // Remove padding of scroll width if it is tablet to make columns of ChangeTrack section aligned\n    if (isTablet) {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"7fr\")\n    } else {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"6.7fr\")\n    }\n\n    // check Safari browser\n    if (userAgent.includes(\"safari\") && userAgent.includes(\"macintosh\")) {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"7fr\")\n    }\n\n    trackPromise(\n      axios({\n        url: \"/api/getUserProfile\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        }\n        //data: JSON.stringify({})   seems like this line has to be removed to avoid error from Heroku as this line is passing empty parameter.\n      })\n        .then(response => response.data)\n        .then(response => {\n          setUserProfile(response[\"userProfile\"])\n          setMCTable(response[\"mcTable\"])\n          setPartyTable(response[\"partyTable\"])\n          setMfList(response[\"mfList\"])\n          setAqlTable(response[\"aqlTable\"])\n          setCheckListTemplate(response[\"checkListTemplate\"])\n          setSharePointPath(response[\"sharePointPath\"])\n        })\n        .catch(error => {\n          console.log(error)\n        }),\n      \"getUserProfile\"\n    )\n\n    fetch(\"/api/getDefectTable\", {\n      method: \"GET\"\n      // ,\n      // \"headers\": {\n      //   \"x-rapidapi-host\": \"fairestdb.p.rapidapi.com\",\n      //   \"x-rapidapi-key\": \"apikey\"\n      // }\n    })\n      .then(response => response.json())\n      .then(response => {\n        setDefectList(response)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n\n    fetch(\"/api/getCriticalDefects\", {\n      method: \"GET\"\n      // ,\n      // \"headers\": {\n      //   \"x-rapidapi-host\": \"fairestdb.p.rapidapi.com\",\n      //   \"x-rapidapi-key\": \"apikey\"\n      // }\n    })\n      .then(response => response.json())\n      .then(response => {\n        setCriticalDefects(response)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }, [])\n\n  useEffect(() => {\n    var x = document.getElementsByClassName(\"itemTotal_Detail\")\n    var len = x.length\n    var first_found = -1\n    var i, j, long, scroll_y\n\n    for (j = 0; j < len; j++) {\n      x[j].style.backgroundColor = \"#0746f54d\" /*back to original color*/\n    }\n\n    for (i = 0; i < len; i++) {\n      const currentChild = x[i].firstElementChild.innerHTML\n      if (currentChild.includes(itemSearchString) && itemSearchString !== \"\") {\n        x[i].style.backgroundColor = \"yellow\"\n        if (first_found === -1) {\n          first_found = i\n        }\n      }\n    }\n\n    if (first_found > 0) {\n      document.getElementById(\"scroller\").scrollTo(0, 0)\n      long = document.getElementById(\"scroller\").scrollHeight\n      scroll_y = (long / len) * first_found\n      document.getElementById(\"scroller\").scrollBy(0, scroll_y)\n    } else {\n      document.getElementsByName(\"itemTotal_searchString\")[0].value = \"\"\n      //document.getElementsByName(\"itemTotal_searchString\")[0].placeholder = \"Not found! Try again!\"\n      document.getElementsByName(\"itemTotal_searchString\")[0].placeholder = \"\"\n    }\n\n    //document.getElementsByName('mc_no')[0].value =  search_string    // trigger highlight in item table - itemTable block.\n\n    x = document.getElementsByClassName(\"itemTable_Detail\")\n    len = x.length\n    first_found = -1\n\n    for (j = 0; j < len; j++) {\n      x[j].style.backgroundColor = \"#0746f54d\" /*back to original color*/\n    }\n\n    for (i = 0; i < len; i++) {\n      const currentChild = x[i].children[1].innerHTML\n      if (currentChild.includes(itemSearchString) && itemSearchString !== \"\") {\n        x[i].style.backgroundColor = \"yellow\"\n        if (first_found === -1) {\n          first_found = i\n        }\n      }\n    }\n\n    if (first_found > 0) {\n      document.getElementById(\"itemTableScroller\").scrollTo(0, 0)\n      long = document.getElementById(\"itemTableScroller\").scrollHeight\n      scroll_y = (long / len) * first_found\n      document.getElementById(\"itemTableScroller\").scrollBy(0, scroll_y)\n    }\n  }, [itemSearchString, items])\n\n  // calcuate itemsTotal based on items\n\n  useEffect(() => {\n    if (constructTotal) {\n      const items1 = items\n        ? items.map(function (obj) {\n            return {\n              item_no: obj.item_no,\n              //order_qty: obj.order_qty,\n              ship_qty: obj.ship_qty\n            }\n          })\n        : null\n\n      // use reduce to calculate total by item#\n      const items2 = items\n        ? items1.reduce((prev, next) => {\n            if (next.item_no in prev) {\n              prev[next.item_no].ship_qty = parseInt(prev[next.item_no].ship_qty) + parseInt(next.ship_qty)\n            } else {\n              prev[next.item_no] = next\n            }\n            return prev\n          }, {})\n        : null\n\n      // present each item total\n      const items3 = Object.keys(items2).map(item_no => items2[item_no])\n\n      var _shippedTotal = 0\n      for (var i = 0; i < items3.length; i += 1) {\n        _shippedTotal = _shippedTotal + items3[i].ship_qty\n      }\n\n      let newItemsTotal = [...items3]\n      for (i = 0; i < newItemsTotal.length; i += 1) {\n        const ship_qty = newItemsTotal[i].ship_qty\n        const sampleSize = getSampleSize(aqlTable, ship_qty, _shippedTotal)\n        let inspectQty = sampleSize\n        newItemsTotal[i] = { ...newItemsTotal[i], sample_qty: sampleSize, inspect_qty: inspectQty }\n      }\n\n      setItemsTotal(newItemsTotal)\n      setConstructTotal(false)\n    }\n  }, [items, constructTotal, aqlTable, shippedTotal])\n\n  function getSampleSize(_aql, ship_qty, shippedTotal) {\n    if (shippedTotal === 0 || isNaN(ship_qty)) {\n      return 0\n    }\n    const aql = _aql.filter(x => x.size_start <= shippedTotal && x.size_end >= shippedTotal)\n    const sampleQty = (ship_qty / shippedTotal) * aql[0][\"25sample\"]\n    return Math.round(sampleQty) //  > 0.5 roundup to integer\n  }\n\n  // ****\n\n  // updateMiscResult\n\n  useEffect(() => {\n    var sampleThreshold = \"\"\n    var defectiveResult = \"\"\n    var visualResult = \"\"\n\n    var sampleThresholdMajor = 0\n    var sampleThresholdMinor = 0\n\n    var total_major = 0\n    var total_minor = 0\n    var total_critical = 0\n\n    for (var i = 0; i < defects.length; i += 1) {\n      if (defects[i].critical) {\n        total_critical = total_critical + parseInt(defects[i].major)\n      } else if (parseInt(defects[i].major) > 0) {\n        total_major = total_major + parseInt(defects[i].major)\n      }\n\n      if (parseInt(defects[i].minor) > 0) {\n        total_minor = total_minor + parseInt(defects[i].minor)\n      }\n    }\n\n    if (shippedTotal) {\n      const aql = aqlTable.filter(x => x.size_start <= shippedTotal && x.size_end >= shippedTotal)\n      sampleThreshold = aql[0][\"25accept\"].toString() + \" / \" + aql[0][\"40accept\"].toString()\n      sampleThresholdMajor = aql[0][\"25accept\"]\n      sampleThresholdMinor = aql[0][\"40accept\"]\n    }\n\n    // Check Inspection Result -  1) If Critical -> Failed,  2) Major + (Minor/4) > Threshold of Major -> Failed, 3) Packing Failed or Measurement Failed -> Failed\n\n    if (total_critical + total_major + total_minor > 0) {\n      defectiveResult = \" \" + total_critical.toString() + \" / \" + total_major.toString() + \" / \" + total_minor.toString()\n\n      if (total_major + Math.floor(total_minor / 4) > sampleThresholdMajor) {\n        visualResult = \"Failed\"\n      } else if (total_minor > sampleThresholdMinor) {\n        visualResult = \"Failed\"\n      }\n    }\n\n    if (total_critical > 0) {\n      visualResult = \"Failed\"\n    }\n\n    if (visualResult !== \"Failed\" && defectiveResult.length > 0) {\n      visualResult = \"Passed\"\n    }\n\n    setVisualResult({ visual_result: visualResult, defective_result: defectiveResult, sample_threshold: sampleThreshold })\n  }, [defects, aqlTable, shippedTotal])\n\n  const handleSupplierInfo = (su, mf) => {\n    partyTable.map(x => (x.SU === su ? setCurrentSUName(x.SU_NAME) : null))\n    partyTable.map(x => (x.MF === mf ? setCurrentMFName(x.MF_NAME) : null))\n  }\n\n  // CRUD operations\n  const addMC = mc => {\n    mcTable.map(x => (x.mc_no === mc ? ((x.id = uuidv4()), setItems(prev => prev.concat(x))) : null))\n    handleSupplierInfo(currentSU, currentMF)\n    setConstructTotal(true)\n    setShowFull(true)\n    setEditMode(true)\n    fillCheckList() // since it's empty\n  }\n\n  const deleteAllItems = item_no => {\n    // setEditing(false)\n    setItems(items.filter(item => item.item_no !== item_no))\n    setItemsTotal(itemsTotal.filter(item => item.item_no !== item_no))\n  }\n\n  const deleteItem = id => {\n    // setEditing(false)\n    //setItems(items.filter(item => item.id !== id))\n  }\n\n  const addToDefectList = (product, defect_area, defect_detail, major, minor, defect_area_code, defect_detail_area, defect_language) => {\n    setDefects(prev => prev.concat({ id: uuidv4(), product, defect_area, defect_detail, major, minor, defect_area_code, defect_detail_area, defect_language, critical: isCriticalDefect(product, defect_detail_area) }))\n  }\n\n  const deleteDefect = id => {\n    // setEditing(false)\n    setDefects(defects.filter(defect => defect.id !== id))\n  }\n\n  const setDisplayAlert = alert => {\n    //{ message: \"hi\", position: 0, timeout: 3000, color: \"alert__green\" }\n    setAlert(alert)\n    setTimeout(function () {\n      setAlert({ position: 100 })\n    }, alert.timeout)\n  }\n\n  const handleCheckItemChange = (id, change) => {\n    const newCheckList = [...checkList]\n    const index = newCheckList.findIndex(r => r.id === id)\n    newCheckList[index] = change\n    setCheckList(newCheckList)\n    //setCheckList([...checkList], { id: change })\n  }\n\n  const undoTable = () => {\n    setItems(JSON.parse(localStorage.getItem(\"items\")))\n    setItemsTotal(JSON.parse(localStorage.getItem(\"itemsTotal\")))\n  }\n\n  const resetInspectQty = () => {\n    const _total = [...itemsTotal]\n    for (var i = 0; i < _total.length; i++) {\n      const _sample_qty = getSampleSize(aqlTable, _total[i].ship_qty, shippedTotal)\n      _total[i].sample_qty = _sample_qty\n      _total[i].inspect_qty = _sample_qty\n    }\n    setItemsTotal(_total)\n  }\n\n  const handleSave = submitted => {\n    // Convert inspection date to time 00.00.00\n    const main = { su_no: currentSU, mf_no: currentMF, inspection_date: inspectionDate.toDateString(), submitted: submitted }\n    const _id = { mc: inspectionID.mc, iteration: inspectionID.iteration, type: inspectionID.type }\n    let newMisc = { ...misc }\n    newMisc = { ...newMisc, final_result: calculateFinalResult(), visual_result: visualResult, defectLanguage: defectLanguage, submitted: submitted }\n\n    trackPromise(\n      axios({\n        url: \"/api/save\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: _id, main: main, misc: newMisc, mf: currentMF, checkList: checkList, items: items, itemsTotal: itemsTotal, defects: defects, uploads: uploads, updateHistory: updateHistory })\n      })\n        .then(res => {\n          clearScreen()\n          setDisplayAlert({ message: \"Saved Successfully !\", position: 0, timeout: 1000, color: \"alert__green\" })\n        })\n        .catch(err => {\n          console.log(err.response.data)\n          setDisplayAlert({ message: \"There was an error in saving, please contact the admin !!\", position: 0, timeout: 2000, color: \"alert__red\" })\n        }),\n      \"saveInspection\"\n    )\n  }\n\n  const handleSearch = id => {\n    //console.log(\"entering api/search\")\n\n    trackPromise(\n      axios({\n        url: \"/api/search\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        },\n        data: JSON.stringify({ _id: id })\n      })\n        // .then(response => {\n        //   console.log(\"status\", response.status)\n        // })\n        .then(response => response.data)\n        .then(response => {\n          setShowFull(true)\n          setItems(response[\"items\"])\n          setItemsTotal(response[\"itemsTotal\"])\n\n          localStorage.setItem(\"items\", JSON.stringify(response[\"items\"]))\n          localStorage.setItem(\"itemsTotal\", JSON.stringify(response[\"itemsTotal\"]))\n\n          setInspectionDate(response[\"main\"].inspection_date ? new Date(response[\"main\"].inspection_date) : null)\n          setMain(response[\"main\"])\n          setMisc(response[\"misc\"] ? response[\"misc\"] : {})\n          if (response[\"misc\"][\"defectLanguage\"] === undefined) {\n            setDefectLanguage(\"en\")\n          } else {\n            setDefectLanguage(response[\"misc\"][\"defectLanguage\"])\n          }\n\n          setCheckList(response[\"checkList\"])\n\n          handleSupplierInfo(response[\"main\"].su_no, response[\"main\"].mf_no)\n\n          if (response[\"defects\"] === undefined) {\n            setDefects([])\n          } else {\n            //console.log(response[\"defects\"])\n            setDefects(response[\"defects\"])\n          }\n\n          if (response[\"uploads\"] === undefined) {\n            setUploads(\"\")\n          } else {\n            //console.log(response[\"uploads\"])\n            setUploads(response[\"uploads\"])\n          }\n          if (response[\"update_history\"] === undefined) {\n            setUpdateHistory([])\n          } else {\n            setUpdateHistory(response[\"update_history\"])\n          }\n          setSharePointFiles(false)\n          setShowSharePointFiles(false)\n          setShowHistory(false)\n        })\n        .catch(err => {\n          //console.log(\"err\", err.response.status)\n          if (err.response.status === 406) {\n            setDisplayAlert({ message: \"Not a valid MC for this manufacturer !\", position: 0, timeout: 2000, color: \"alert__red\" })\n          } else if (err.response.status === 501) {\n            window.location = \"/login/timeout\"\n          } else setDisplayAlert({ message: \"No such Inspection ID, please try again !\", position: 0, timeout: 2000, color: \"alert__red\" })\n        }),\n      \"searchKey\"\n    )\n  }\n\n  const handleDelete = id => {\n    var confirm = window.confirm(\"Are you sure you want to delete this inspection ? \")\n    if (confirm !== true) {\n      return\n    }\n    trackPromise(\n      axios({\n        url: \"/api/delete\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: id })\n      })\n        .then(response => (response.status === 200 ? (clearScreen(), setDisplayAlert({ message: \"Deleted successfully !\", position: 0, timeout: 1500, color: \"alert__green\" })) : null))\n        .catch(err => {\n          setDisplayAlert({ message: \"Error deleting the inspection ID !\", position: 0, timeout: 1500, color: \"alert__red\" })\n        }),\n      \"deleteInspection\"\n    )\n  }\n\n  const clearScreen = () => {\n    setItems([])\n    setDefects([])\n    setCheckList([])\n    setSearchedMC([])\n    setUploads([])\n    setShowSearchedMC(false)\n    setMisc([])\n    setUpdateHistory([])\n    setShowFull(false)\n    setEditMode(false)\n    setShowHistory(false)\n    setSharePointFiles([])\n    setShowSharePointFiles(false)\n    setShowHistory(true)\n  }\n\n  // ** implement delay function\n  const delay = ms => new Promise(res => setTimeout(res, ms))\n\n  const handleSessionTimeOut = async () => {\n    setDisplayAlert({ message: \"Session timeout, please login again !\", position: 0, timeout: 3000, color: \"alert__red\" })\n    await delay(3000)\n    window.location = \"/login/timeout\"\n  }\n\n  const searchInspByMC = mc => {\n    setShowSearchedMC(true)\n\n    trackPromise(\n      //fetch(\"/api/searchInspByMC\", {\n      axios({\n        url: \"/api/searchInspByMC\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        },\n        data: JSON.stringify({ mc: mc, mfList: mfList })\n      })\n        .then(response => response.data)\n        .then(response => {\n          setSearchedMC(response)\n          setSharePointFiles(false)\n        })\n        .catch(err => {\n          //console.log('err', err)\n          err.response.status === 501 ? handleSessionTimeOut() : setDisplayAlert({ message: \"Something went wrong !\", position: 0, timeout: 2000, color: \"alert__red\" })\n        }),\n      \"mfrSelection\"\n    )\n  }\n\n  const downloadDoc = (_id, file_name) => event => {\n    //event.preventDefault()\n\n    fetch(\"/download/\" + _id, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/octet-stream\",\n        \"Content-Disposition\": \"attachment\"\n      }\n    })\n      .then(response => response.blob())\n      .then(blob => {\n        // Create blob link to download\n        const url = window.URL.createObjectURL(new Blob([blob]))\n        const link = document.createElement(\"a\")\n        link.href = url\n        link.setAttribute(\"download\", file_name)\n\n        // Append to html link element page\n        document.body.appendChild(link)\n\n        // Start download\n        link.click()\n\n        // Clean up and remove the link\n        link.parentNode.removeChild(link)\n      })\n  }\n\n  const downloadSharePointFile = file_name => {\n    //event.preventDefault()\n\n    const file_url = \"/sites/OSO/\".concat(sharePointPath, \"/\", \"SU\", currentSU, \"MF\", currentMF, \"/\", file_name)\n\n    trackPromise(\n      fetch(\"/downloadSharePointFile\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/octet-stream\",\n          \"Content-Disposition\": \"attachment\",\n          \"Cache-Control\": \"no-cache\",\n          file_url: file_url\n        }\n      })\n        .then(response => response.blob())\n        .then(blob => {\n          // Create blob link to download\n          const url = window.URL.createObjectURL(new Blob([blob]))\n          const link = document.createElement(\"a\")\n          link.href = url\n          link.setAttribute(\"download\", file_name)\n\n          // Append to html link element page\n          document.body.appendChild(link)\n\n          // Start download\n          link.click()\n\n          // Clean up and remove the link\n          link.parentNode.removeChild(link)\n        }),\n      \"downloadSharePointfiles\"\n    )\n  }\n\n  const printReport = (file_name, draft) => {\n    //event.preventDefault()\n    if (misc.qa_type === undefined) {\n      setDisplayAlert({ message: \"QA Type must be chosen !\", position: 0, timeout: 2000, color: \"alert__red\" })\n      return\n    }\n\n    file_name = \"MMG Inspection Report - \" + inspectionID[\"mc\"] + \"-\" + inspectionID[\"iteration\"] + \"-\" + inspectionID[\"type\"] + (draft ? \" (Draft) \" : \"\") + \".xlsx\"\n\n    trackPromise(\n      fetch(\"/printreport\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/octet-stream\",\n          \"Content-Disposition\": \"attachment\",\n          \"Cache-Control\": \"no-cache\",\n          inspectionID: JSON.stringify({ inspectionID })\n        }\n      })\n        .then(response => response.blob())\n        .then(blob => {\n          // Create blob link to download\n          const url = window.URL.createObjectURL(new Blob([blob]))\n          const link = document.createElement(\"a\")\n          link.href = url\n          link.setAttribute(\"download\", file_name)\n\n          // Append to html link element page\n          document.body.appendChild(link)\n\n          // Start download\n          link.click()\n\n          // Clean up and remove the link\n          link.parentNode.removeChild(link)\n        }),\n      \"printReport\"\n    )\n  }\n\n  const getSharePointFiles = () => {\n    trackPromise(\n      axios({\n        url: \"/api/getsharepointfiles\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        },\n        data: JSON.stringify({ folder: \"SU\" + currentSU + \"MF\" + currentMF, inspection_id: inspectionID.mc + \"-\" + inspectionID.iteration + \"-\" + inspectionID.type[0] })\n      })\n        .then(response => response.data)\n        .then(response => {\n          setSharePointFiles(response)\n        })\n        .catch(err => {\n          if (err.response.status === 404) {\n            setDisplayAlert({ message: \"Folder on SharePoint was not created !\", position: 3, timeout: 2000, color: \"alert__red\" })\n          }\n        }),\n      \"sharePointFiles\"\n    )\n  }\n\n  const createsharePointPDF = () => {\n    var confirm = window.confirm(\"Are you sure you want to move all photos to PDF ? All photo files will be deleted !\")\n    if (confirm !== true) {\n      return\n    }\n    const inspection_date = inspectionDate.getMonth() + 1 + \"/\" + inspectionDate.getDate() + \"/\" + inspectionDate.getFullYear()\n    trackPromise(\n      axios({\n        url: \"/api/createsharepointpdf\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\",\n          inspection_id: inspectionID.mc + \"-\" + inspectionID.iteration + \"-\" + inspectionID.type.charAt(0),\n          //relative_url: \"2022InspRpt/SU\" + currentSU + \"MF\" + currentMF\n          relative_url: sharePointPath.concat(\"/\", \"SU\", currentSU, \"MF\", currentMF),\n          inspection_date: inspection_date\n        },\n        data: JSON.stringify({ folder: \"SU\" + currentSU + \"MF\" + currentMF, inspection_id: inspectionID.mc + \"-\" + inspectionID.iteration + \"-\" + inspectionID.type[0] })\n      })\n        .then(response => response.data)\n        .then(response => {\n          setSharePointFiles(response)\n          document.getElementById(\"sharePoint_refresh\").click()\n        })\n        .catch(err => {\n          if (err.response.status === 404) {\n            setDisplayAlert({ message: \"PDF creation error !\", position: 3, timeout: 2000, color: \"alert__red\" })\n          } else if (err.response.status === 405) {\n            setDisplayAlert({ message: \"No photos to generate PDF !\", position: 3, timeout: 2000, color: \"alert__red\" })\n          }\n        }),\n      \"sharePointFiles\"\n    )\n  }\n\n  //encapsulate the props function as only message is different in this page\n  const displayAlert = message => {\n    setDisplayAlert({ message: message, position: 0, timeout: 3000, color: \"alert__red\" })\n  }\n\n  const checkDuplicateID = id => {\n    trackPromise(\n      axios({\n        url: \"/api/checkDuplicateID\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: id })\n      }).then(res => (res.status === 200 ? displayAlert(\"This key has been used by previous inspection ! Please check and or consider a new iteration!\") : addMC(id.mc))),\n      \"createInspection\"\n    )\n  }\n\n  const handleDeleteSPfile = id => {\n    var confirm = window.confirm(\"Are you sure you want to delete the SharePoint file ? \")\n    if (confirm !== true) {\n      return\n    }\n    trackPromise(\n      axios({\n        url: \"/api/deleteSPfile\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: id })\n      })\n        .then(response => (response.status === 200 ? (setDisplayAlert({ message: \"SharePoint file deleted successfully !\", position: 3, timeout: 3000, color: \"alert__green\" }), document.getElementById(\"sharePoint_refresh\").click()) : null))\n        .catch(err => {\n          setDisplayAlert({ message: \"Error deleting the SP file !\", position: 4, timeout: 1500, color: \"alert__red\" })\n        }),\n      \"deleteInspection\"\n    )\n  }\n\n  function isCriticalDefect(product, defect) {\n    for (var i = 0; i < criticalDefects.length; i += 1) {\n      if (criticalDefects[i].product === product && criticalDefects[i].defect_detail_code === defect) {\n        return true\n      }\n    }\n    return false\n  }\n\n  function calculateFinalResult() {\n    let final_result = \"\"\n    if (misc.measurement_result === \"Failed\" || misc.packing_result === \"Failed\" || visualResult.visual_result === \"Failed\") {\n      final_result = \"Failed\"\n    } else if (visualResult.visual_result === \"\") {\n      final_result = \"Passed\"\n    } else {\n      final_result = \"Passed\"\n    }\n    return final_result\n  }\n\n  // convert to local time\n  function convertToLocal(date) {\n    const t = new Date(date).toTimeString()\n    const d = new Date(date).toDateString()\n    var local = d + \" \" + t\n    var local_end = local.search(\"GMT+\") - 1\n    local = local.substring(0, local_end)\n    return local\n  }\n\n  const fillCheckList = () => {\n    // Populate values to the checklist template.\n    const newCheckList = [...checkListTemplate]\n    newCheckList.sort((a, b) => a.id - b.id) // must sort to present in order...\n    setCheckList(newCheckList)\n  }\n\n  return (\n    <Fragment>\n      {/* <UserProfile userProfile={userProfile} /> */}\n      <SupplierInfo currentSU={currentSU} currentMF={currentMF} currentSUName={currentSUName} currentMFName={currentMFName} setSelectingSupplier={setSelectingSupplier} setShowFull={setShowFull} setMFRsearch={setMFRsearch} />\n      <MfrSelection partyTable={partyTable} setCurrentSU={setCurrentSU} setCurrentMF={setCurrentMF} setCurrentSUName={setCurrentSUName} setCurrentMFName={setCurrentMFName} selectingSupplier={selectingSupplier} setSelectingSupplier={setSelectingSupplier} setMFRsearch={setMFRsearch} mfrSearch={mfrSearch} />\n\n      <ShowSpinner position={1} />\n      <MainMenu handleSave={handleSave} handleSearch={handleSearch} inspectionID={inspectionID} handleDelete={handleDelete} printReport={printReport} editMode={editMode} setEditMode={setEditMode} userProfile={userProfile} main={main} misc={misc} showFull={showFull} clearScreen={clearScreen} updateHistory={updateHistory} />\n\n      <div className=\"flex-row\">\n        <div className=\"flex-large\">\n          <Fragment>\n            {/* <h2>Search Inspection</h2> */}\n            <SearchKey checkDuplicateID={checkDuplicateID} mcTable={mcTable} setDisplayAlert={setDisplayAlert} inspectionID={inspectionID} setInspectionID={setInspectionID} clearScreen={clearScreen} searchInspByMC={searchInspByMC} currentSU={currentSU} currentMF={currentMF} editMode={editMode} />\n\n            {showSearchedMC ? <SearchedMC inspectionID={inspectionID} setInspectionID={setInspectionID} handleSearch={handleSearch} searchInspByMC={searchInspByMC} searchedMC={searchedMC} setShowSearchedMC={setShowSearchedMC} mcTable={mcTable} currentSU={currentSU} currentMF={currentMF} /> : null}\n          </Fragment>\n        </div>\n      </div>\n      {alert.position === 0 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n      <ShowSpinner position={2} />\n\n      {/* Result  */}\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large\">\n          <Fragment>\n            <Result setInspectionDate={setInspectionDate} inspectionDate={inspectionDate} setMisc={setMisc} misc={misc} editMode={editMode} isCriticalDefect={isCriticalDefect} aqlTable={aqlTable} shippedTotal={shippedTotal} visualResult={visualResult} calculateFinalResult={calculateFinalResult}></Result>\n          </Fragment>\n        </div>\n      </div>\n\n      {/* Misc section with inspection Date  */}\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large\">\n          <Fragment>\n            <Misc setInspectionDate={setInspectionDate} inspectionDate={inspectionDate} setMisc={setMisc} misc={misc} editMode={editMode}></Misc>\n          </Fragment>\n        </div>\n      </div>\n\n      {alert.position === 1 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large\">\n          <div className=\"itemTable_2col\">\n            <ItemTable items={items} deleteItem={deleteItem} setItems={setItems} setDisplayAlert={setDisplayAlert} mcTable={mcTable} addMC={addMC} editMode={editMode} currentSU={currentSU} currentMF={currentMF} />\n            <div></div>\n            <ItemTotal items={items} deleteAllItems={deleteAllItems} setItemSearchString={setItemSearchString} aqlTable={aqlTable} editMode={editMode} showFull={showFull} shippedTotal={shippedTotal} sampleTotal={sampleTotal} itemsTotal={itemsTotal} getSampleSize={getSampleSize} setItemsTotal={setItemsTotal} setShippedTotal={setShippedTotal} setSampleTotal={setSampleTotal} inspectTotal={inspectTotal} setInspectTotal={setInspectTotal} setAqlSampleTotal={setAqlSampleTotal} aqlSampleTotal={aqlSampleTotal} undoTable={undoTable} resetInspectQty={resetInspectQty} setDisplayAlert={setDisplayAlert} />\n          </div>\n        </div>\n      </div>\n      <div className=\"flex-row\">\n        <div className={\"flex-large \" + (showFull ? null : \"hideSection\")}>\n          <DefectOptions items={items} addToDefectList={addToDefectList} setDisplayAlert={setDisplayAlert} editMode={editMode} defects={defects} defectLanguage={defectLanguage} setDefectLanguage={setDefectLanguage} defectList={defectList} showFull={showFull} />\n        </div>\n      </div>\n      {alert.position === 2 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n      <div className=\"flex-row\">\n        <div className={\"flex-large \" + (showFull ? null : \"hideSection\")}>\n          <DefectList defects={defects} deleteDefect={deleteDefect} editMode={editMode} isCriticalDefect={isCriticalDefect} defectLanguage={defectLanguage} defectList={defectList} />\n        </div>\n      </div>\n      <div className=\"flex-row\">\n        <div className={\"flex-large \" + (showFull ? null : \"hideSection\")}>\n          <CheckList checkList={checkList} handleCheckItemChange={handleCheckItemChange} editMode={editMode} />\n        </div>\n      </div>\n      {alert.position === 3 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large \">\n          <SharePoint currentSU={currentSU} currentMF={currentMF} inspectionID={inspectionID} editMode={editMode} getSharePointFiles={getSharePointFiles} setShowSharePointFiles={setShowSharePointFiles} showSharePointFiles={showSharePointFiles} setSharePointFiles={setSharePointFiles} sharePointPath={sharePointPath} createsharePointPDF={createsharePointPDF} />\n          <ShowSpinner position={3} />\n        </div>\n      </div>\n\n      {alert.position === 4 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large \">\n          <ShowSharePointFiles sharePointFiles={sharePointFiles} downloadSharePointFile={downloadSharePointFile} showSharePointFiles={showSharePointFiles} convertToLocal={convertToLocal} editMode={editMode} handleDeleteSPfile={handleDeleteSPfile} />\n        </div>\n      </div>\n\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        {/* <div className={\"flex-row  hideSection\"}> */}\n        <div className=\"flex-large \">\n          <UploadForm setDisplayAlert={setDisplayAlert} inspectionID={inspectionID} setUploads={setUploads} uploads={uploads} downloadDoc={downloadDoc} editMode={editMode} currentSU={currentSU} currentMF={currentMF} setShowSharePointFiles={setShowSharePointFiles} sharePointPath={sharePointPath} inspectionDate={inspectionDate} />\n        </div>\n\n        {/* <div className=\"flex-large\">\n          <PhotoBlock uploadTable={uploads} downloadDoc={downloadDoc} currentSU={currentSU} currentMF={currentMF} inspectionID={inspectionID} />\n        </div> */}\n      </div>\n\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large \">\n          <ChangeTrack updateHistory={updateHistory} showHistory={showHistory} setShowHistory={setShowHistory} convertToLocal={convertToLocal} />\n        </div>\n      </div>\n      <div>&nbsp;</div>\n      <div>&nbsp;</div>\n    </Fragment>\n  )\n}\nexport default App\n","import React from \"react\"\r\n\r\nconst Home = props => {\r\n  const { env } = props\r\n\r\n  return (\r\n    <div className=\"welcome\">\r\n      <div>\r\n        {/* <img src=\"static/img/frontpageMap.jpg\" aria-hidden alt=\"MMG Inspection Map\"  />                 */}\r\n        {env === \"DEV\" ? <iframe src=\"http://localhost:5000/map-marker\" title=\"map\" style={{ width: \"100%\", height: \"103%\", border: 0 }}></iframe> : <iframe src=\"https://mmgapp2.herokuapp.com/map-marker\" title=\"map\" style={{ width: \"100%\", height: \"103%\", border: 0 }}></iframe>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Home\r\n","import { React, useState, useEffect, Fragment } from \"react\"\r\nimport axios from \"axios\"\r\n//import { Spinner } from \"./components/Spinner\"\r\nimport { trackPromise } from \"react-promise-tracker\"\r\nimport ShowSpinner from \"./components/ShowSpinner\"\r\n\r\nconst About = props => {\r\n  //const { setItems, items, setDisplayAlert, mcTable, addMC, editMode, currentSU, currentMF } = props\r\n\r\n  const [result, setResult] = useState([])\r\n\r\n  function sortInspectionDate(_result) {\r\n    _result.sort(function (a, b) {\r\n      // note : must change the string back to date object for comparison\r\n      if (Date.parse(a[\"main\"].inspection_date) > Date.parse(b[\"main\"].inspection_date)) return -1\r\n      else return 1\r\n    })\r\n\r\n    return _result\r\n  }\r\n\r\n  useEffect(() => {\r\n    trackPromise(\r\n      axios({\r\n        url: \"/api/pastXdaysResult\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n          api: \"yes\"\r\n        }\r\n        //data: JSON.stringify({})   seems like this line has to be removed to avoid error from Heroku as this line is passing empty parameter.\r\n      })\r\n        .then(response => response.data)\r\n        .then(response => {\r\n          const _result = sortInspectionDate(response)\r\n          setResult(_result)\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        }),\r\n      \"pastInspection\"\r\n    )\r\n    return () => {\r\n      setResult({}) // This worked for me\r\n    }\r\n  }, [])\r\n\r\n  // convert to local time\r\n  function convertToLocalDate(date) {\r\n    //const t = new Date(date).toTimeString()\r\n    //return d + \" \" + t\r\n    const d = new Date(date).toDateString()\r\n    return d\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"xDaysResult\">\r\n        {result.length > 0 ? (\r\n          <div className=\"xDaysResult_gridHeader\">\r\n            <div className=\"xDaysResult_gridHeaderItem\">Inspection Date</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Supplier</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Manufacturer</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Inspection ID</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Result</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\"></div>\r\n          </div>\r\n        ) : null}\r\n\r\n        {result.length > 0\r\n          ? result.map(item => (\r\n              <div key={item.id} className=\"xDaysResult_gridDetail\">\r\n                <div className=\"xDaysResult_gridItem\">{convertToLocalDate(item[\"main\"].inspection_date)}</div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"main\"].su_no}</div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"main\"].mf_no}</div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"_id\"].mc + \"-\" + item[\"_id\"].iteration + \"-\" + item[\"_id\"].type} </div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"misc\"].final_result}</div>\r\n                <div></div>\r\n              </div>\r\n            ))\r\n          : null}\r\n      </div>\r\n      {/* <Spinner area=\"pastInspection\" /> */}\r\n      <ShowSpinner position={10} />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default About\r\n","//import React, { useState, Fragment } from \"react\"\nimport React, { Fragment } from \"react\"\n\nconst MainMenu = props => {\n  const { userProfile } = props\n  return (\n    <Fragment>\n      <div className=\"userProfile\">\n        <div className=\"userProfile_title\">\n          <div>\n            <img src=\"static/img/macys-header.jpg\" aria-hidden alt=\"\" width=\"30\" height=\"30\" />\n          </div>\n          <div>MMG Inspection App</div>\n        </div>\n        <div className=\"userProfile_personal\">\n          <div className=\"userProfile_name\">{userProfile.first_name ? \"Hi, \" + userProfile.first_name : null} </div>\n          <div className=\"userProfile_photo\">{userProfile.email ? userProfile.email.includes(\"@macys.com\") ? <img src={\"/api/getPhoto\"} aria-hidden alt=\"Searching for photo...\" width=\"60\" height=\"60\" /> : <img src=\"static/img/anonymous.jpg\" aria-hidden alt=\"No factory photo !!\" width=\"60\" height=\"60\" /> : <div>Searching for photo...</div>}</div>\n        </div>\n      </div>\n    </Fragment>\n  )\n}\n\nexport default MainMenu\n","import { Route, Routes, HashRouter as Router, Link } from \"react-router-dom\"\nimport React, { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport AppInspection from \"./AppInspection\"\nimport Home from \"./Home\"\nimport XDaysResult from \"./XDaysResult\"\nimport UserProfile from \"./components/UserProfile\"\nimport { trackPromise } from \"react-promise-tracker\"\n\nconst logout = () => {\n  localStorage.clear()\n  window.location = \"/logout\"\n}\n\nconst gotoPowerBI = () => {\n  const url = \"https://app.powerbi.com/reportEmbed?reportId=f0a7cd56-e22b-490a-9ad7-012d4a0d5251&autoAuth=true&filterPanelEnabled=False&pageName=ReportSectionf1be12cf083e1c0eba15\"\n\n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  if (newWindow) newWindow.opener = null\n}\n\nconst App = () => {\n  const [userProfile, setUserProfile] = useState({})\n\n  useEffect(() => {\n    trackPromise(\n      axios({\n        url: \"/api/getUserProfile\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        }\n        //data: JSON.stringify({})   seems like this line has to be removed to avoid error from Heroku as this line is passing empty parameter.\n      })\n        .then(response => response.data)\n        .then(response => {\n          setUserProfile(response[\"userProfile\"])\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    )\n  }, [])\n\n  return (\n    <div className=\"container app_container\">\n      <div className=\"flex-row\">\n        <div className=\"flex-large\">\n          <UserProfile userProfile={userProfile} />\n          <Router>\n            <nav>\n              <ul className=\"app_header\">\n                <li>\n                  <Link to=\"/\" className=\"link\">\n                    Home\n                  </Link>\n                </li>\n                <li>\n                  <Link to=\"/appInspection\" className=\"link\">\n                    Inspection\n                  </Link>\n                </li>\n\n                {userProfile.email !== undefined && userProfile.email.includes(\"macys.com\") ? (\n                  <li>\n                    <Link to=\"/xDaysResult\" className=\"link\">\n                      Past Inspection Results\n                    </Link>\n                  </li>\n                ) : null}\n\n                {userProfile.email !== undefined && userProfile.email.includes(\"macys.com\") ? (\n                  <li\n                    className=\"link\"\n                    onClick={() => {\n                      gotoPowerBI()\n                    }}\n                  >\n                    Power BI\n                  </li>\n                ) : null}\n\n                <button\n                  className=\"fa fa-sign-out\"\n                  onClick={() => {\n                    logout()\n                  }}\n                >\n                  Logout\n                </button>\n                {/* <div className=\"userProfile_photo\">{userProfile.email ? userProfile.email.includes(\"@macys.com\") ? <img src={\"/api/getPhoto\"} aria-hidden alt=\"Searching for photo...\" width=\"60\" height=\"60\" /> : <img src=\"static/img/anonymous.jpg\" aria-hidden alt=\"No factory photo !!\" width=\"60\" height=\"60\" /> : <div>Searching for photo...</div>} </div>*/}\n              </ul>\n            </nav>\n\n            <Routes>\n              <Route path=\"/\" element={<Home env={userProfile.environment} />} />\n              <Route path=\"/appInspection\" element={<AppInspection />} />\n              <Route path=\"/xDaysResult\" element={<XDaysResult />} />\n            </Routes>\n          </Router>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./css/main.css\"\nimport \"./css/index.css\"\nimport \"./css/defectList.css\"\nimport \"./css/defectOptions.css\"\nimport \"./css/checkList.css\"\nimport \"./css/uploadDoc.css\"\nimport \"./css/photoBlock.css\"\nimport \"./css/searchKey.css\"\nimport \"./css/appInspection.css\"\nimport \"./css/mainMenu.css\"\nimport \"./css/searchedMC.css\"\nimport \"./css/userProfile.css\"\nimport \"./css/supplierInfo.css\"\nimport \"./css/itemTable.css\"\nimport \"./css/itemTotal.css\"\nimport \"./css/misc.css\"\nimport \"./css/mfrSelection.css\"\nimport \"react-datepicker/dist/react-datepicker.css\"\nimport \"./css/result.css\"\nimport \"./css/changeTrack.css\"\nimport \"./css/sharePoint.css\"\nimport \"./css/showSharePointFiles.css\"\nimport \"./css/appInspection.css\"\nimport \"./css/app.css\"\nimport \"./css/xDaysResult.css\"\n\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}