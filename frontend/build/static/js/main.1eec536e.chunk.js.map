{"version":3,"sources":["components/ItemTotal.js","components/DefectOptions.js","components/DefectList.js","components/ShowAlert.js","components/CheckList.js","components/UploadForm.js","components/Spinner.js","components/SearchKey.js","components/MainMenu.js","components/SearchedMC.js","components/SupplierInfo.js","components/MfrSelection.js","components/Misc.js","components/Result.js","components/ChangeTrack.js","components/SharePoint.js","components/ShowSharePointFiles.js","components/ShowSpinner.js","AppInspection.js","Home.js","XDaysResult.js","components/UserProfile.js","App.js","index.js"],"names":["ItemTotal","props","items","mcTable","addMC","currentSU","currentMF","editMode","setDisplayAlert","ship","setShip","poList","totalShip","totalInspect","totalSample","reset","handleDeleteShip","handleDeletePO","setPOList","aqlTable","handleHighlight","useState","mc","setMC","summary","setSummary","shipSummary","setShipSummary","useEffect","listener","event","code","preventDefault","document","getElementById","click","addEventListener","removeEventListener","el","sortTable","sort","order","nShip","a","b","po_no","item_no","sortSummaryTable","nSum","handleInputChange","value","target","displayAlert","message","position","timeout","color","handleInspQty","index","findIndex","r","newEntry","find","inspect_qty","parseInt","className","type","id","name","justify","placeholder","onChange","readOnly","onClick","inMCTable","x","mc_no","inItems","duplicate","validMF","su_no","mf_no","validateMC","map","customer","order_qty","ship_qty","Math","round","nSummary","cShip","filter","v","i","indexOf","forEach","u","reduce","prev","curr","sample_qty","push","toggleSummary","onInput","e","toUpperCase","min","max","total_qty","aql","size_start","size_end","tShip","nPO","indexPO","newEntryPO","DefectOptions","defects","setDefectLanguage","defectLanguage","defectList","showFull","addToDefectList","currentProduct","setCurrentProduct","currentDefectArea","setCurrentDefectArea","currentDefectAreaCode","setCurrentDefectAreaCode","currentDefectDetail","setCurrentDefectDetail","currentDefectDetailCode","setCurrentDefectDetailCode","currentMajor","setCurrentMajor","currentMinor","setCurrentMinor","optionListDefect","setOptionListDefect","optionListDefectDetail","setOptionListDefectDetail","buildOptDefectList","useCallback","choice","_list","product","lang","defect_area","defect_code","code_area","concat","Set","_defect_code","split","defect_detail_code","defect_detail","code_detail","length","disabled","area_array","detail_array","major_int","isNaN","minor_int","handleAddDefect","DefectList","isCriticalDefect","defect_lang","area_code","detail","defect_area_code","defect_detail_area","style","major","minor","deleteDefect","colSpan","ShowAlert","alert","class_var","CheckList","checkList","selected","y","result","nextSelected","handleCheckItemChange","onSubmit","width","category","item","separator","UploadForm","inspectionID","setShowSharePointFiles","sharePointPath","inspectionDate","selectedFile","setSelectedFile","multiple","file","files","formData","FormData","append","inspection_date","getMonth","getDate","getFullYear","trackPromise","axios","url","method","data","headers","inspection_id","iteration","charAt","relative_url","then","res","catch","err","error","Spinner","promiseInProgress","usePromiseTracker","area","spinnerMessage","marginTop","height","display","justifyContent","alignItems","fontWeight","SearchKey","checkDuplicateID","setInspectionID","clearScreen","searchInspByMC","inspType","handleKeyChange","insp_type","insp_type_long","found","MainMenu","handleSave","handleDelete","handleSearch","printReport","setEditMode","userProfile","misc","updateHistory","oldMC","submitted","editable","undefined","ignore_submit","handleClick","current","window","confirm","SearchedMC","searchedMC","setShowSearchedMC","newSearchedMC","main","_id","SupplierInfo","currentSUName","currentMFName","setSelectingSupplier","setShowFull","setMFRsearch","toLowerCase","MfrSelection","partyTable","setCurrentSU","setCurrentMF","setCurrentSUName","setCurrentMFName","selectingSupplier","mfrSearch","getMCtable","textTransform","SU_NAME","SU","MF","MF_NAME","search","su","mf","su_name","mf_name","Misc","setInspectionDate","setMisc","mqaMembers","packTypes","productCategories","handleChange","element","yes_or_no","newMisc","product_type","lab_test_report","lab_child_safety_report","fibre_content","comments","governance_inspection","props65_report","ship_mode","pack_pct","ship_window","carton_list","carton_total","pack_type","qa_type","sqa","email","mqa","correlation_inspection","product_category","label","console","log","dateFormat","date","handleDate","checked","rows","cols","Result","visualResult","calculateFinalResult","calculate_final_result","packing_result","measurement_result","param2","final_result","defective_result","sample_threshold","visual_result","ChangeTrack","showHistory","setShowHistory","convertToLocal","history","Date","parse","updated_time","root","querySelector","setProperty","line","updated_by","updated_mode","SharePoint","getSharePointFiles","showSharePointFiles","setSharePointFiles","createsharePointPDF","src","alt","getTime","newWindow","open","opener","handleClick_view","handleClick_add","ShowSharePointFiles","sharePointFiles","downloadSharePointFile","handleDeleteSPfile","ext","isSupportPicExt","filename","includes","editor","last_editor","modified","size","folder","unique_id","ShowSpinner","App","setItems","showSearchedMC","setDefects","setAlert","setMCTable","setCheckList","uploads","setUploads","setUserProfile","setSearchedMC","setPartyTable","mfList","setMfList","setAqlTable","setMain","setVisualResult","setUpdateHistory","checkListTemplate","setCheckListTemplate","setDefectList","criticalDefects","setCriticalDefects","setSharePointPath","setPackTypes","setMQAmembers","setProductCategories","setInspType","setTotalShip","setTotalInspect","setTotalSample","initLoad","useRef","currentSearchedItem","userAgent","navigator","test","api","response","fetch","json","sampleThreshold","defectiveResult","sampleThresholdMajor","sampleThresholdMinor","total_major","total_minor","total_critical","critical","toString","floor","trim","j","scroll_y","getElementsByClassName","len","first_found","backgroundColor","getElementsByTagName","innerHTML","scrollTo","scrollHeight","scrollBy","children","oList","nShipQty","nInspectQty","nSampleQty","handleSupplierInfo","newMC","aItems","nItems","nShipItems","handleAddItems","item_desc","fabric_note","fillCheckList","setTimeout","JSON","stringify","response_mf","localStorage","setItem","status","location","delay","ms","Promise","handleSessionTimeOut","defect","t","toTimeString","local","toDateString","local_end","substring","newCheckList","itemsTotal","file_name","draft","localTime","now","blob","URL","createObjectURL","Blob","link","createElement","href","setAttribute","body","appendChild","parentNode","removeChild","uniqueItem1","uniqueShip1","defect_language","uuidv4","change","file_url","downloadDoc","Home","env","title","border","About","setResult","_result","sortInspectionDate","first_name","UserProfile","to","gotoPowerBI","clear","path","environment","AppInspection","XDaysResult","ReactDOM","render"],"mappings":"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","file":"static/js/main.1eec536e.chunk.js","sourcesContent":["import { React, useEffect, useState } from \"react\"\n\nconst ItemTotal = props => {\n  const { items, mcTable, addMC, currentSU, currentMF, editMode, setDisplayAlert, ship, setShip, poList, totalShip, totalInspect, totalSample, reset, handleDeleteShip, handleDeletePO, setPOList, aqlTable, handleHighlight } = props\n\n  const [mc, setMC] = useState(\"\")\n  const [summary, setSummary] = useState(true)\n  const [shipSummary, setShipSummary] = useState([])\n\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        //console.log(\"Enter key was pressed. Run your function.\");\n        event.preventDefault()\n        document.getElementById(\"itemTable_MCBtn\").click()\n      }\n    }\n\n    if (document.getElementById(\"itemTable_MC\")) document.getElementById(\"itemTable_MC\").addEventListener(\"keydown\", listener)\n\n    return () => {\n      if (document.getElementById(\"itemTable_MC\")) document.getElementById(\"itemTable_MC\").removeEventListener(\"keydown\", listener)\n    }\n  }, [])\n\n  /* Item Total */\n\n  useEffect(() => {\n    const listener = event => {\n      if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n        //console.log(\"Enter key was pressed. Run your function.\");\n        event.preventDefault()\n        document.getElementById(\"highLightItemBtn\").click()\n      }\n    }\n    var el = document.getElementById(\"itemTotal_searchString\")\n\n    if (el) {\n      el.addEventListener(\"keydown\", listener)\n      return () => {\n        el.removeEventListener(\"keydown\", listener)\n      }\n    }\n  }, [])\n\n  const sortTable = (sort, order) => {\n    handleHighlight(\"\")\n    const nShip = [...ship]\n    /*table = document.getElementById(\"itemTable\") */\n    if (sort === 0 && order === \"asc\") {\n      nShip.sort(function (a, b) {\n        return a.po_no > b.po_no ? 1 : -1\n      })\n    } else if (sort === 0 && order === \"desc\") {\n      nShip.sort(function (a, b) {\n        return a.po_no < b.po_no ? 1 : -1\n      })\n    } else if (sort === 1 && order === \"asc\") {\n      nShip.sort(function (a, b) {\n        return a.item_no > b.item_no ? 1 : -1\n      })\n    } else if (sort === 1 && order === \"desc\") {\n      nShip.sort(function (a, b) {\n        return a.item_no < b.item_no ? 1 : -1\n      })\n    }\n    setShip(nShip)\n  }\n\n  const sortSummaryTable = (sort, order) => {\n    handleHighlight(\"\")\n    const nSum = [...shipSummary]\n    /*table = document.getElementById(\"itemTable\") */\n    if (sort === 0 && order === \"asc\") {\n      nSum.sort(function (a, b) {\n        return a.item_no > b.item_no ? 1 : -1\n      })\n    } else if (sort === 0 && order === \"desc\") {\n      nSum.sort(function (a, b) {\n        return a.item_no < b.item_no ? 1 : -1\n      })\n    }\n    setShipSummary(nSum)\n  }\n\n  //* add new MC\n\n  const handleInputChange = event => {\n    const value = event.target.value\n    setMC(value)\n  }\n\n  const validateMC = () => {\n    //event.preventDefault()\n    const inMCTable = mcTable.find(x => x.mc_no === mc)\n    const inItems = items.find(x => x.mc_no === mc)\n    const duplicate = ship.find(x => x.mc_no === mc)\n    const validMF = mcTable.find(x => x.mc_no === mc && x.su_no === currentSU && x.mf_no === currentMF)\n\n    if (!inMCTable) {\n      setDisplayAlert({ message: \"This MC is not found in forthcoming or may not belong to this manufacturer!\", position: 1, timeout: 4000, color: \"alert__red\" })\n    } else if (!validMF) {\n      displayAlert(\"This MC seems not for this manufacturer!\")\n    } else if (duplicate) {\n      displayAlert(\"MC was already entered in the ship item list, please check ! \")\n    } else if (inMCTable || !inItems) {\n      addMC(mc)\n    }\n  }\n\n  //encapsulate the props function as only message is different in this page\n  const displayAlert = message => {\n    setDisplayAlert({ message: message, position: 1, timeout: 1500, color: \"alert__red\" })\n  }\n\n  const handleShipQty = (po_no, item_no) => event => {\n    let value = event.target.value\n\n    if (value === \"\") {\n      return\n    }\n    if (parseInt(value) > 20000) {\n      value = 20000\n      setDisplayAlert({ message: \"Number of ship units is too large!\", position: 1, timeout: 3000, color: \"alert__red\" })\n    }\n\n    let nShip = [...ship]\n    const index = nShip.findIndex(r => r.po_no === po_no && r.item_no === item_no)\n    const newEntry = nShip.find(r => r.po_no === po_no && r.item_no === item_no)\n    nShip[index] = { ...newEntry, ship_qty: parseInt(value) }\n    //console.log(\"handleShipQty\", nShip)\n\n    // recalculate sample\n    const total_qty = nShip.reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0) // total new ship qty\n    const aql = aqlTable.filter(x => x.size_start <= total_qty && x.size_end >= total_qty)\n    nShip = nShip.map(x => ({ ...x, sample_qty: Math.round((x.ship_qty / total_qty) * aql[0][\"25sample\"]), inspect_qty: Math.round((x.ship_qty / total_qty) * aql[0][\"25sample\"]) }))\n\n    setShip(nShip)\n\n    const tShip = nShip.filter(x => x.po_no === po_no).reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0) // total new ship qty\n    const nPO = [...poList]\n    //console.log(\"nPO\", nPO)\n    const indexPO = nPO.findIndex(r => r.po_no === po_no)\n    const newEntryPO = nPO.find(r => r.po_no === po_no)\n    nPO[indexPO] = { ...newEntryPO, ship_qty: tShip }\n    setPOList(nPO)\n  }\n\n  const handleInspQty = (po_no, item_no) => event => {\n    let value = event.target.value\n    const nShip = [...ship]\n    const index = nShip.findIndex(r => r.po_no === po_no && r.item_no === item_no)\n    const newEntry = nShip.find(r => r.po_no === po_no && r.item_no === item_no)\n    nShip[index] = { ...newEntry, inspect_qty: parseInt(value) }\n    setShip(nShip)\n  }\n\n  const toggleSummary = () => {\n    // reconstruct PO based on ship rec (existing and newly added)\n\n    let nSummary = []\n    let cShip = [...ship]\n    let allItems = cShip.map(x => x.item_no)\n    let uniqueItems = allItems.filter((v, i, a) => a.indexOf(v) === i)\n\n    uniqueItems.forEach(function (u) {\n      const order_qty = cShip.filter(x => x.item_no === u).reduce((prev, curr) => prev + parseInt(curr.order_qty), 0)\n      const ship_qty = cShip.filter(x => x.item_no === u).reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0)\n      const sample_qty = cShip.filter(x => x.item_no === u).reduce((prev, curr) => prev + parseInt(curr.sample_qty), 0)\n      const inspect_qty = cShip.filter(x => x.item_no === u).reduce((prev, curr) => prev + parseInt(curr.inspect_qty), 0)\n      nSummary.push({ item_no: u, order_qty, ship_qty, sample_qty, inspect_qty })\n    })\n\n    setShipSummary(nSummary)\n    setSummary(prev => !prev)\n  }\n\n  return (\n    // present the table\n\n    <div className=\"itemTable_2col\">\n      <div>\n        <div className=\"itemTable_Section\">\n          <div>Add MC:</div>\n          &nbsp;\n          <div>{editMode ? <input type=\"text\" id=\"itemTable_MC\" name=\"itemTable_mc\" justify=\"left\" placeholder=\"Additional MC here\" onChange={handleInputChange} /> : <input type=\"text\" id=\"itemTable_MC\" name=\"itemTable_MC\" justify=\"left\" placeholder=\"Include additional MC here\" readOnly onChange={handleInputChange} />}</div>\n          &nbsp;&nbsp;\n          <div>\n            {editMode ? (\n              <i\n                id=\"itemTable_MCBtn\"\n                className=\"fa fa-plus clickable\"\n                onClick={() => {\n                  validateMC(mc)\n                }}\n              ></i>\n            ) : null}\n          </div>\n        </div>\n        <div className=\"itemTable_Header\">\n          <div>PO</div>\n          <div>DIV</div>\n          <div>Order Qty</div>\n          <div>Ship Qty</div>\n          <div>%Ship</div>\n          <div>Delete</div>\n          <div></div>\n        </div>\n\n        <div id=\"itemTableScroller\" className=\"itemTable_GridContainer\">\n          {!poList\n            ? null\n            : poList.map((x, index) => (\n                <div key={index} className=\"itemTable_Detail\">\n                  <div>{x.po_no}</div>\n                  <div>{x.customer}</div>\n                  <div>{x.order_qty}</div>\n                  <div>{x.ship_qty}</div>\n                  <div>{Math.round((x.ship_qty / x.order_qty) * 100)}%</div>\n                  <div>\n                    {/* <div>{editMode ? <button onClick={e => deletePO(x.po_no)}>x</button> : null}</div> */}\n                    {editMode ? (\n                      <i\n                        className=\"fa fa-times clickable\"\n                        onClick={() => {\n                          handleDeletePO(x.mc_no, x.po_no)\n                        }}\n                      ></i>\n                    ) : null}\n                  </div>\n                </div>\n              ))}\n        </div>\n      </div>\n      <div></div>\n      <div>\n        <div className=\"itemTotal_Section\">\n          {editMode ? (\n            <div>\n              {summary ? \"Summary\" : \"Edit\"}\n              {editMode ? (\n                <i\n                  className=\"fa fa-refresh itemTotal_undo_color clickable \"\n                  onClick={() => {\n                    toggleSummary()\n                    handleHighlight(\"\")\n                  }}\n                ></i>\n              ) : null}\n            </div>\n          ) : null}\n\n          {editMode ? (\n            <div>\n              Reset Inspect &nbsp;\n              <i\n                className=\"fa fa-refresh itemTotal_refresh_color clickable\"\n                onClick={() => {\n                  reset()\n                }}\n              ></i>\n            </div>\n          ) : null}\n\n          {/* <div>\n            Undo\n            <i\n              className=\"fa fa-undo itemTotal_undo_color clickable \"\n              onClick={() => {\n                getLocal()\n              }}\n            ></i>\n          </div> */}\n\n          <div>Highlight Item :</div>\n\n          <div>\n            <input type=\"text\" name=\"itemTotal_searchString\" id=\"itemTotal_searchString\" justify=\"left\" onInput={e => (e.target.value = (\"\" + e.target.value).toUpperCase())} placeholder=\"Enter item here\" />\n          </div>\n          <div>\n            <i\n              className=\"fa fa-search clickable\"\n              id=\"highLightItemBtn\"\n              onClick={() => {\n                handleHighlight(document.getElementById(\"itemTotal_searchString\").value)\n              }}\n            ></i>\n          </div>\n        </div>\n\n        {summary ? (\n          <div>\n            <div className=\"itemTotal_Header\">\n              <div>\n                PO\n                <i\n                  className=\"fa fa-chevron-circle-up clickable\"\n                  onClick={() => {\n                    sortTable(0, \"asc\")\n                  }}\n                ></i>\n                &nbsp;\n                <i\n                  className=\"fa fa-chevron-circle-down clickable\"\n                  onClick={() => {\n                    sortTable(0, \"desc\")\n                  }}\n                ></i>\n              </div>\n              <div>\n                By Item\n                <i\n                  className=\"fa fa-chevron-circle-up clickable\"\n                  onClick={() => {\n                    sortTable(1, \"asc\")\n                  }}\n                ></i>\n                &nbsp;\n                <i\n                  className=\"fa fa-chevron-circle-down clickable\"\n                  onClick={() => {\n                    sortTable(1, \"desc\")\n                  }}\n                ></i>\n              </div>\n              <div>Ship</div>\n              <div>Sample</div>\n              <div>Inspect</div>\n              <div>Delete</div>\n            </div>\n\n            <div id=\"scroller\" className=\"itemTotal_GridContainer\">\n              {!ship\n                ? null\n                : ship.map((x, index) => (\n                    <div key={index} className=\"itemTotal_Detail\">\n                      <div>{x.po_no}</div>\n                      <div>{x.item_no}</div>\n                      <div>\n                        <input type=\"number\" id=\"itemTotal_shipQty\" name=\"itemTotal_shipQty\" value={x.ship_qty || 1} min=\"1\" max=\"1500\" onChange={handleShipQty(x.po_no, x.item_no)} readOnly={editMode ? \"\" : \"readOnly\"} />\n                      </div>\n                      <div>{x.sample_qty}</div>\n\n                      <div>\n                        <input type=\"number\" id=\"itemTotal_InspectQty\" name=\"itemTotal_InspectQty\" value={x.inspect_qty || 1} min=\"1\" max=\"15000\" onChange={handleInspQty(x.po_no, x.item_no)} readOnly={editMode ? \"\" : \"readOnly\"} />\n                      </div>\n\n                      <div>\n                        {editMode ? (\n                          <i\n                            className=\"fa fa-times clickable\"\n                            onClick={() => {\n                              handleDeleteShip(x.mc_no, x.po_no, x.item_no)\n                            }}\n                          ></i>\n                        ) : null}\n                      </div>\n                    </div>\n                  ))}\n            </div>\n          </div>\n        ) : (\n          <div>\n            <div className=\"itemTotal_Header2\">\n              <div></div>\n              <div>\n                By Item\n                <i\n                  className=\"fa fa-chevron-circle-up clickable\"\n                  onClick={() => {\n                    sortSummaryTable(0, \"asc\")\n                  }}\n                ></i>\n                &nbsp;\n                <i\n                  className=\"fa fa-chevron-circle-down clickable\"\n                  onClick={() => {\n                    sortSummaryTable(0, \"desc\")\n                  }}\n                ></i>\n              </div>\n              <div>Ship</div>\n              <div>Sample</div>\n              <div>Inspect</div>\n              <div></div>\n              <div></div>\n            </div>\n\n            <div id=\"scroller\" className=\"itemTotal_GridContainer\">\n              {!shipSummary\n                ? null\n                : shipSummary.map((x, index) => (\n                    <div key={index} className=\"itemTotal_Detail\">\n                      <div></div>\n                      <div>{x.item_no}</div>\n                      <div>{x.ship_qty}</div>\n                      <div>{x.sample_qty}</div>\n                      <div>{x.inspect_qty}</div>\n                      <div></div>\n                    </div>\n                  ))}\n            </div>\n          </div>\n        )}\n\n        {summary ? (\n          <div>\n            <div className=\"itemTotal_Total\">\n              <div></div>\n              <div> Total :</div>\n              <div>{totalShip}</div>\n              <div>{totalSample}</div>\n              <div className={totalSample !== totalInspect ? \"highlightSection\" : null}>{totalInspect}</div>\n              <div></div>\n              <div></div>\n            </div>\n          </div>\n        ) : (\n          <div>\n            <div className=\"itemTotal_Total\">\n              <div></div>\n              <div> Total :</div>\n              <div>{totalShip}</div>\n              <div>{totalSample}</div>\n              <div className={totalSample !== totalInspect ? \"highlightSection\" : null}>{totalInspect}</div>\n              <div></div>\n              <div></div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default ItemTotal\n","import React, { useState, Fragment, useEffect, useCallback } from \"react\"\n\nconst DefectOptions = props => {\n  // remove columns : mc_no and id in prepration for calculating total by item#\n  const { editMode, defects, setDisplayAlert, setDefectLanguage, defectLanguage, defectList, showFull, addToDefectList } = props\n\n  const [currentProduct, setCurrentProduct] = useState(\"Select\")\n\n  const [currentDefectArea, setCurrentDefectArea] = useState(\"\")\n  const [currentDefectAreaCode, setCurrentDefectAreaCode] = useState(\"\")\n\n  const [currentDefectDetail, setCurrentDefectDetail] = useState(\"\")\n  const [currentDefectDetailCode, setCurrentDefectDetailCode] = useState(\"\")\n\n  const [currentMajor, setCurrentMajor] = useState(\"\")\n  const [currentMinor, setCurrentMinor] = useState(\"\")\n\n  const [optionListDefect, setOptionListDefect] = useState([])\n  const [optionListDefectDetail, setOptionListDefectDetail] = useState([])\n\n  //  prepare for the defect selection - need to associate based on each specific product and then its associted defect.\n  //  Trying to shortlist the defect code based on product\n\n  const buildOptDefectList = useCallback(\n    (choice, value) => {\n      //console.log(\"Callback called\")\n      let _list = \"\"\n      switch (choice) {\n        case \"defect\": // select defect\n          _list = defectList.filter(x => x.product === value && x.lang === defectLanguage)\n          _list = _list.map(({ defect_area, defect_code }) => ({ code_area: \"\".concat(defect_code, \"~\", defect_area) }))\n          _list = _list.map(({ code_area }) => code_area)\n          _list = [...new Set(_list)].sort()\n          setOptionListDefect(_list)\n          break\n        case \"detail\": // select detail\n          const _defect_code = value.split(\"~\")[0] // based defect code\n          _list = defectList.filter(x => x.product === currentProduct && x.lang === defectLanguage && x.defect_code === _defect_code)\n          _list = _list.map(({ defect_detail_code, defect_detail }) => ({ code_detail: \"\".concat(defect_detail_code, \"~\", defect_detail) }))\n          _list = _list.map(({ code_detail }) => code_detail)\n          _list = [...new Set(_list)].sort()\n          setOptionListDefectDetail(_list)\n          break\n        default:\n          break\n      }\n    },\n    [defectList, currentProduct, defectLanguage]\n  )\n\n  useEffect(() => {\n    if (currentProduct && currentProduct !== \"Select\") {\n      buildOptDefectList(\"defect\", currentProduct)\n    }\n  }, [currentProduct, buildOptDefectList])\n\n  useEffect(() => {\n    if (!showFull) {\n      setCurrentDefectArea(\"\")\n      setCurrentDefectAreaCode(\"\")\n      setCurrentMajor(\"\")\n      setCurrentMinor(\"\")\n    } else if (showFull && defects.length > 0) {\n      setCurrentProduct(defects[0].product)\n      //buildOptDefectList(\"defect\", defects[0].product)\n    } else if (showFull && defects.length === 0) {\n      setCurrentProduct(\"\")\n      setCurrentDefectArea(\"Select\")\n      setCurrentMajor(\"\")\n      setCurrentMinor(\"\")\n      setCurrentDefectAreaCode(\"\")\n      setCurrentDefectDetailCode(\"\")\n    }\n  }, [showFull, defects])\n\n  const handleSelectChangeProduct = event => {\n    const { value } = event.target\n\n    // check if the switching language (=value) exists\n    const total_lang_rec = defectList.filter(x => x.product === value && x.lang === defectLanguage)\n    // Following if block must precede other\n\n    if (total_lang_rec.length === 0) {\n      setDisplayAlert({ message: \"No product selected or Language has NOT been set for this product !!\", position: 2, timeout: 2500, color: \"alert__red\" })\n      return\n    }\n\n    if (disableProductSelect() === \"disabled\") {\n      if (value !== defects[0].product) {\n        setDisplayAlert({ message: \"Product '\" + defects[0].product + \"' has already been chosen !! Please empty all defects if you decide to change product ! \", position: 2, timeout: 2500, color: \"alert__red\" })\n        return\n      }\n      document.getElementById(\"defectOptionsProduct\").value = defects[0].product\n      document.getElementById(\"defectOptionsDefectArea\").value = \"Select\"\n      setCurrentProduct(defects[0].product)\n    } else {\n      setCurrentProduct(value)\n    }\n\n    buildOptDefectList(\"defect\", value)\n    setCurrentDefectArea(\"Select\")\n    setCurrentMajor(\"\")\n    setCurrentMinor(\"\")\n    setCurrentDefectAreaCode(\"\")\n    setCurrentDefectDetailCode(\"\")\n  }\n\n  function disableProductSelect() {\n    if (defects.length > 0) {\n      return \"disabled\"\n    } else return null\n  }\n\n  const handleSelectChangeDefect = event => {\n    const { value } = event.target\n    const area_array = value.split(\"~\")\n    setCurrentDefectAreaCode(area_array[0])\n    setCurrentDefectArea(area_array[1])\n    buildOptDefectList(\"detail\", value)\n    setCurrentDefectDetail(\"Select\")\n    setCurrentMajor(\"\")\n    setCurrentMinor(\"\")\n  }\n\n  const handleSelectChangeDefectDetail = event => {\n    const { value } = event.target\n    const detail_array = value.split(\"~\")\n    setCurrentDefectDetailCode(detail_array[0])\n    setCurrentDefectDetail(detail_array[1])\n    setCurrentMajor(\"\")\n    setCurrentMinor(\"\")\n  }\n\n  const handleCurrentMajorChange = event => {\n    const { value } = event.target\n    setCurrentMajor(value)\n  }\n\n  const handleCurrentMinorChange = event => {\n    const { value } = event.target\n    setCurrentMinor(value)\n  }\n\n  const handleChangeDefectLanguage = event => {\n    const { value } = event.target\n\n    // check if the switching language (=value) exists\n    const total_lang_rec = defectList.filter(x => x.product === currentProduct && x.lang === value)\n    // Following if block must precede other\n\n    if (total_lang_rec.length === 0) {\n      setDisplayAlert({ message: \"No product selected or Language has NOT been set for this product !!\", position: 2, timeout: 2500, color: \"alert__red\" })\n      return\n    }\n    setDefectLanguage(value)\n    setCurrentDefectArea(\"Select\")\n    setOptionListDefectDetail([])\n  }\n\n  const handleAddDefect = event => {\n    //event.preventDefault()\n    const major_int = isNaN(parseInt(currentMajor)) // check if empty, return true if empty\n    const minor_int = isNaN(parseInt(currentMinor)) // check if empty, return true if empty\n\n    if (currentProduct === \"Select\" || currentDefectArea === \"Select\" || currentDefectDetail === \"Select\") {\n      props.setDisplayAlert({ message: \"Please make sure you select Product, Defect and Defect Detail ! \", position: 2, timeout: 2500, color: \"alert__red\" })\n    } else if (major_int || minor_int || (currentMajor < 1 && currentMinor < 1)) {\n      props.setDisplayAlert({ message: \"Please make sure you enter either Major and Minor quantity ! \", position: 2, timeout: 2500, color: \"alert__red\" })\n    } else {\n      addToDefectList(currentProduct, currentDefectArea, currentDefectDetail, currentMajor, currentMinor, currentDefectAreaCode, currentDefectDetailCode, defectLanguage)\n    }\n  }\n\n  return (\n    // present the table\n\n    <Fragment>\n      <div className=\"defectOption_header\">\n        <div>Language</div>\n\n        <div>&nbsp;&nbsp;&nbsp;&nbsp;</div>\n        <div>\n          <select className=\"defectOption_language  clickable\" onChange={handleChangeDefectLanguage} value={defectLanguage}>\n            <option value=\"en\">English</option>\n            <option value=\"zh\">Chinese</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"defectOption\">\n        <div className=\"defectOption_product\">\n          <select onChange={handleSelectChangeProduct} id=\"defectOptionsProduct\" className=\"clickable\" value={currentProduct}>\n            {/* <option disabled={disableProductSelect()}  value=\"Select\">Select</option> */}\n            <option value=\"Select\">Select</option>\n            <option value=\"Fashion Jewelry\" disabled={editMode ? \"\" : \"disabled\"}>\n              Fashion Jewelry\n            </option>\n            <option value=\"Footwear\" disabled={editMode ? \"\" : \"disabled\"}>\n              Footware\n            </option>\n            <option value=\"Handbags\" disabled={editMode ? \"\" : \"disabled\"}>\n              Handbags\n            </option>\n            <option value=\"Hardlines\" disabled={editMode ? \"\" : \"disabled\"}>\n              Hardlines\n            </option>\n            <option value=\"Softlines\" disabled={editMode ? \"\" : \"disabled\"}>\n              Softlines\n            </option>\n          </select>\n        </div>\n\n        <div className=\"defectOption_defectArea\">\n          <select onChange={handleSelectChangeDefect} id=\"defectOptionsDefectArea\" className=\"clickable\" value={currentDefectAreaCode + \"~\" + currentDefectArea}>\n            <option value=\"Select\">Select</option>\n            {optionListDefect.map((x, index) => (\n              <option key={index} value={x} disabled={editMode ? \"\" : \"disabled\"}>\n                {x}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"defectOption_defectDetail\">\n          <select onChange={handleSelectChangeDefectDetail} id=\"defectOptionsDefectDetail\" className=\"clickable\" value={currentDefectDetailCode + \"~\" + currentDefectDetail}>\n            <option value=\"Select\">Select</option>\n            {optionListDefectDetail.map((x, index) => (\n              <option key={index} value={x} disabled={editMode ? \"\" : \"disabled\"}>\n                {x}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"defectOption_major\">\n          <input type=\"number\" name=\"major\" placeholder=\" Major\" value={currentMajor} min=\"0\" max=\"5\" onChange={handleCurrentMajorChange} readOnly={editMode ? \"\" : \"readOnly\"} />\n        </div>\n\n        <div className=\"defectOption_minor\">\n          <input type=\"number\" name=\"minor\" placeholder=\" Minor\" value={currentMinor} min=\"0\" max=\"5\" onChange={handleCurrentMinorChange} readOnly={editMode ? \"\" : \"readOnly\"} />\n        </div>\n\n        <div>\n          {editMode ? (\n            <button\n              onClick={() => {\n                handleAddDefect()\n              }}\n            >\n              Add\n            </button>\n          ) : null}\n        </div>\n        <div></div>\n      </div>\n    </Fragment>\n  )\n}\n\nexport default DefectOptions\n","import React, { Fragment } from \"react\"\n\nconst DefectList = props => {\n  const { defects, editMode, isCriticalDefect, defectLanguage, defectList } = props\n\n  function defect_lang(product, area_code, detail) {\n    //console.log(\"input\", product, area_code, detail)\n    const defect = defectList.filter(x => x.product === product && x.defect_code === area_code && x.defect_detail_code === detail && x.lang === defectLanguage)\n    return defect[0]\n  }\n\n  return (\n    // present the table\n    // adding span below appends ... to the off-limit text\n    <Fragment>\n      <div className=\"defectList\">\n        <div className=\"defectList_gridHeader\">\n          <div>Product</div>\n          <div>Defect</div>\n          <div>Defect Detail</div>\n          <div className=\"defectList_major_header\">\n            Major/<br></br>Critical\n          </div>\n          <div className=\"defectList_minor_header\">Minor</div>\n          <div>Delete</div>\n        </div>\n\n        {defects.length > 0 ? (\n          defects.map(x => (\n            <div className=\"defectList_gridDetail\" key={x.id}>\n              <div className=\"defectList_gridItem defectList_product\">{x.product}</div>\n              <div className=\"defectList_gridItem defectList_defectArea\">{x.defect_area_code + \"~\" + defect_lang(x.product, x.defect_area_code, x.defect_detail_area).defect_area}</div>\n              <div className=\"defectList_gridItem  defectList_defectDetail\" style={{ color: isCriticalDefect(x.product, x.defect_detail_area) ? \"red\" : \"inherit\" }}>\n                <span>{x.defect_detail_area + \"~\" + defect_lang(x.product, x.defect_area_code, x.defect_detail_area).defect_detail}</span>\n              </div>\n              <div className=\"defectList_major\">{x.major}</div>\n              <div className=\"defectList_minor\">{x.minor}</div>\n              <div className=\"defectList_deleteButton\">\n                {editMode ? (\n                  <button\n                    onClick={() => {\n                      props.deleteDefect(x.id)\n                    }}\n                  >\n                    &times;\n                  </button>\n                ) : null}\n              </div>\n              <div></div>\n            </div>\n          ))\n        ) : (\n          <div>\n            <div colSpan={3}>No Defects</div>\n          </div>\n        )}\n      </div>\n    </Fragment>\n  )\n}\n\nexport default DefectList\n","import React from \"react\"\n\nconst ShowAlert = props => {\n  const alert = props.alert\n  const class_var = \"alert \".concat(alert.color)\n\n  return (\n    // present the table\n    <h5 className={class_var}>{alert.message}</h5>\n  )\n}\nexport default ShowAlert\n","import React from \"react\"\n\nconst CheckList = props => {\n  const { editMode, checkList } = props\n\n  checkList.sort((a, b) => a.id - b.id) // must sort to present in order...\n\n  const handleInputChange = (id, x) => {\n    var selected = []\n    if (editMode) {\n      if (id === 88) {\n        // Further Comments\n        selected = [\"Select\", \"Yes\", \"No\", \"Select\"]\n      } else {\n        selected = [\"Select\", \"OK\", \"NA\", \"X\", \"NI\"]\n      }\n\n      let index = selected.findIndex(y => y === x.result)\n      if (index === 4) {\n        index = 1\n      } else {\n        index = index + 1\n      }\n      const nextSelected = selected[index]\n      props.handleCheckItemChange(id, { ...x, result: nextSelected })\n    }\n  }\n\n  return (\n    <form\n      onSubmit={event => {\n        event.preventDefault() //  props.updateItem(item.id, item)\n      }}\n    >\n      <div className=\"checkList_header\">Basic Check List</div>\n      <div className=\"checkFormGrid\">\n        <div>\n          <table id=\"checkListTable\">\n            <thead>\n              <tr>\n                <th width=\"40%\">Category</th>\n                <th width=\"40%\">Item</th>\n                <th width=\"20%\">Result</th>\n                {/* <th>Drop Down Result</th> */}\n              </tr>\n            </thead>\n            <tbody>\n              {checkList\n                ? checkList\n                    .filter(y => y.id > 0 && y.id <= 42)\n                    .map(x => (\n                      <tr key={x.id}>\n                        {x.category ? <td>{x.category}</td> : null}\n                        {x.category ? (\n                          <td>{x.item}</td>\n                        ) : x.id === 0 ? (\n                          <td className=\"checkCellSeparation\" colSpan=\"3\"></td>\n                        ) : x.separator ? (\n                          <td className=\"checkCellSeparationHeader\" colSpan=\"3\">\n                            {x.separator}\n                          </td>\n                        ) : (\n                          <td colSpan=\"2\">{x.item}</td>\n                        )}\n\n                        {x.category || x.item ? (\n                          <td\n                            className=\"clickable checkCellResult\"\n                            onClick={() => {\n                              handleInputChange(x.id, x)\n                            }}\n                          >\n                            {x.result}\n                          </td>\n                        ) : null}\n                      </tr>\n                    ))\n                : null}\n            </tbody>\n          </table>\n        </div>\n\n        <div className=\"checkFormGridCell\">\n          <table id=\"checkListTable\" className=\"fixed\">\n            <thead>\n              <tr>\n                <th width=\"40%\">Category</th>\n                <th width=\"40%\">Item</th>\n                <th width=\"20%\">Result</th>\n                {/* <th>Drop Down Result</th> */}\n              </tr>\n            </thead>\n            <tbody>\n              {checkList\n                ? checkList\n                    .filter(y => y.id >= 43 && y.id <= 68)\n                    .map(x => (\n                      <tr key={x.id}>\n                        {x.category ? <td>{x.category}</td> : null}\n                        {x.category ? (\n                          <td>{x.item}</td>\n                        ) : x.id === 0 ? (\n                          <td className=\"checkCellSeparation\" colSpan=\"3\"></td>\n                        ) : x.separator ? (\n                          <td className=\"checkCellSeparationHeader\" colSpan=\"3\">\n                            {x.separator}\n                          </td>\n                        ) : (\n                          <td colSpan=\"2\">{x.item}</td>\n                        )}\n\n                        {x.category || x.item ? (\n                          <td\n                            className=\"clickable checkCellResult\"\n                            onClick={() => {\n                              handleInputChange(x.id, x)\n                            }}\n                          >\n                            {x.result}\n                          </td>\n                        ) : null}\n                      </tr>\n                    ))\n                : null}\n            </tbody>\n          </table>\n        </div>\n\n        <div className=\"checkFormGridCell\">\n          <table id=\"checkListTable\" className=\"fixed\">\n            <thead>\n              <tr>\n                <th width=\"40%\">Category</th>\n                <th width=\"40%\">Item</th>\n                <th width=\"20%\">Result</th>\n                {/* <th>Drop Down Result</th> */}\n              </tr>\n            </thead>\n            <tbody>\n              {checkList\n                ? checkList\n                    .filter(y => y.id >= 81)\n                    .map(x => (\n                      <tr key={x.id}>\n                        {x.category ? <td>{x.category}</td> : null}\n                        {x.category ? (\n                          <td>{x.item}</td>\n                        ) : x.id === 0 ? (\n                          <td className=\"checkCellSeparation\" colSpan=\"3\"></td>\n                        ) : x.separator ? (\n                          <td className=\"checkCellSeparationHeader\" colSpan=\"3\">\n                            {x.separator}\n                          </td>\n                        ) : (\n                          <td colSpan=\"2\">{x.item}</td>\n                        )}\n\n                        {x.category || x.item ? (\n                          <td\n                            // bgcolor=\"white\"\n                            className=\"clickable checkCellResult\"\n                            onClick={() => {\n                              handleInputChange(x.id, x)\n                            }}\n                          >\n                            {x.result}\n                          </td>\n                        ) : null}\n                      </tr>\n                    ))\n                : null}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </form>\n  )\n}\n\nexport default CheckList\n","import React, { Fragment, useState } from \"react\"\nimport axios from \"axios\"\nimport { trackPromise } from \"react-promise-tracker\"\n\nconst UploadForm = props => {\n  const { setDisplayAlert, inspectionID, editMode, currentSU, currentMF, setShowSharePointFiles, sharePointPath, inspectionDate } = props\n  const [selectedFile, setSelectedFile] = useState()\n\n  const handleFile = event => {\n    setSelectedFile({ file: event.target.files })\n  }\n\n  const handleUpload = event => {\n    //event.preventDefault()\n\n    //displayAlert('Do not hit \"UPLOAD\" button again ! Upload in progress')\n\n    const formData = new FormData()\n\n    try {\n      const files = selectedFile.file\n\n      for (let i = 0; i < files.length; i++) {\n        formData.append(`files[]`, files[i])\n        //console.log(files[i], \"hello  ---$$$\")\n      }\n\n      const inspection_date = inspectionDate.getMonth() + 1 + \"/\" + inspectionDate.getDate() + \"/\" + inspectionDate.getFullYear()\n\n      trackPromise(\n        axios({\n          url: \"/api/upload\",\n          method: \"POST\",\n          data: formData,\n          headers: {\n            inspection_id: inspectionID.mc + \"-\" + inspectionID.iteration + \"-\" + inspectionID.type.charAt(0),\n            //relative_url: \"2022InspRpt/SU\" + currentSU + \"MF\" + currentMF\n            relative_url: sharePointPath.concat(\"/\", \"SU\", currentSU, \"MF\", currentMF),\n            inspection_date: inspection_date\n          }\n        })\n          .then(res => {\n            for (var i = 0; i < res.data.length; i++) {\n              //const _id = res.data[i]._id\n              //const inspection_id = inspectionID\n              //const file_name = res.data[i].file_name\n              //const mime_type = res.data[i].mime_type\n              setShowSharePointFiles(true)\n            }\n            document.getElementById(\"sharePoint_file\").value = null\n            document.getElementById(\"sharePoint_refresh\").click()\n          })\n          // process upload erros if any\n          .catch(err => {\n            //console.log(\"err\", err.message)\n\n            // if (err.response.status === 413) {\n            //   setDisplayAlert({ message: err.response.data, position: 3, timeout: 4000, color: \"alert__red\" })\n            // } else {\n            setDisplayAlert({ message: \"Exceed a size limit of upload !!\", position: 3, timeout: 4000, color: \"alert__red\" })\n          }),\n        \"sharePointUpload\"\n      )\n    } catch (error) {\n      displayAlert(\"Please select files and try again !!\")\n    }\n  }\n\n  // function getExtension(file_name) {\n  //   var parts = file_name.split(\".\")\n  //   return parts[parts.length - 1]\n  // }\n\n  // function showMimeIcon(file_name) {\n  //   const iconTypes = [\n  //     { ext: \"jpeg\", icon: \"file-image-o\" },\n  //     { ext: \"jpg\", icon: \"file-image-o\" },\n  //     { ext: \"bmp\", icon: \"file-image-o\" },\n  //     { ext: \"png\", icon: \"file-image-o\" },\n  //     { ext: \"jif\", icon: \"file-image-o\" },\n  //     { ext: \"mp4\", icon: \"file-movie-o\" },\n  //     { ext: \"avi\", icon: \"file-movie-o\" },\n  //     { ext: \"mpg\", icon: \"file-movie-o\" },\n  //     { ext: \"txt\", icon: \"file-text-o\" },\n  //     { ext: \"xlsx\", icon: \"file-excel-o\" },\n  //     { ext: \"xls\", icon: \"file-excel-o\" },\n  //     { ext: \"doc\", icon: \"file-word-o\" },\n  //     { ext: \"docx\", icon: \"file-word-o\" },\n  //     { ext: \"ppt\", icon: \"file-powepoint-o\" },\n  //     { ext: \"pdf\", icon: \"file-pdf-o\" },\n  //     { ext: \"pptx\", icon: \"file-pdf-o\" },\n  //     { ext: \"zip\", icon: \"file-zip-o\" }\n  //   ]\n\n  //   const fileExtension = getExtension(file_name)\n  //   const iconType = iconTypes.find(x => x.ext === fileExtension.toLowerCase()).icon\n  //   const iconFont = iconType ? iconType : \"fa-fa-file\" // file type not registered\n  //   return \"fa fa-\" + iconFont + \" addSpace\"\n  // }\n\n  // const deleteUpload = id => {\n  //   const newUploadTable = [...uploads]\n  //   const index = newUploadTable.findIndex(r => r._id === id)\n  //   const uploadItem = newUploadTable.find(r => r._id === id)\n  //   newUploadTable[index] = { ...uploadItem, enable: false }\n  //   //console.log(newUploadTable)\n  //   setUploads(newUploadTable)\n  // }\n\n  //encapsulate the props function as only message is different in this page\n  const displayAlert = message => {\n    setDisplayAlert({ message: message, position: 3, timeout: 3000, color: \"alert__red\" })\n  }\n\n  return (\n    <Fragment>\n      <div className=\"uploadDoc\">\n        {editMode ? (\n          <form>\n            <input type=\"file\" multiple name=\"file\" id=\"sharePoint_file\" onChange={handleFile} />\n            <button type=\"button\" onClick={handleUpload}>\n              Upload files\n            </button>\n          </form>\n        ) : null}\n\n        {/* <table id=\"uploadFiles\">\n          <tbody>\n            {uploads\n              .filter(y => y.enable)\n              .map(x => (\n                <tr key={x._id}>\n                  <td>\n                    <button\n                      className=\"button-delete small-button\"\n                      onClick={() => {\n                        deleteUpload(x._id)\n                      }}\n                    >\n                      &times;\n                    </button>\n                    <a href=\"/#\" onClick={downloadDoc(x._id, x.file_name)}>\n                      <i className={showMimeIcon(x.file_name)} />\n                      {x.file_name}\n                    </a>\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n        </table> */}\n      </div>\n    </Fragment>\n  )\n}\n\nexport default UploadForm\n","import React from \"react\"\nimport { usePromiseTracker } from \"react-promise-tracker\"\nimport Loader from \"react-loader-spinner\"\n\nexport const Spinner = props => {\n  const { promiseInProgress } = usePromiseTracker({ area: props.area })\n  const { spinnerMessage } = props\n\n  return (\n    promiseInProgress && (\n      <div\n        style={{\n          marginTop: \"0.5rem\",\n          width: \"100%\",\n          height: \"30\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          color: \"green\",\n          fontWeight: \"bold\"\n        }}\n      >\n        {/* <Loader type=\"ThreeDots\" color=\"#2BAD60\" height=\"50\" width=\"100\" /> */}\n        {/* <Loader type=\"Circles\" color=\"rgba(129, 160, 250, 255)\" height=\"40\" width=\"100\" /> */}\n        {spinnerMessage}\n        <Loader type=\"Circles\" color=\"green\" height=\"30\" width=\"100\" />\n      </div>\n    )\n  )\n}\n","import React, { Fragment } from \"react\"\n//import axios from \"axios\"\nimport { Spinner } from \"./Spinner\"\n\nconst SearchKey = props => {\n  const { checkDuplicateID, mcTable, setDisplayAlert, inspectionID, setInspectionID, clearScreen, searchInspByMC, editMode, inspType, showFull } = props\n\n  const handleKeyChange = event => {\n    const id = event.target.id\n    const { value } = event.target\n\n    switch (id) {\n      case \"searchKey_mc\":\n        setInspectionID({ ...inspectionID, mc: value })\n        if (value.length >= 3) searchInspByMC(value)\n        // pass first few characters of MC entered\n        else clearScreen()\n        break\n      case \"searchKey_iteration\":\n        setInspectionID({ ...inspectionID, iteration: value })\n        break\n      case \"searchKey_type\":\n        setInspectionID({ ...inspectionID, type: value })\n        break\n      default:\n        break\n    }\n  }\n\n  const validateMC = id => {\n    const found = mcTable.find(x => x.mc_no === id.mc)\n    clearScreen()\n\n    if (!found) {\n      displayAlert(\"This MC doesn't exists or it doesn't belong to this manufacturer!\")\n    } else {\n      checkDuplicateID(id)\n    }\n  }\n\n  function isInvalidID() {\n    if (inspectionID.mc === \"\" || inspectionID.iteration === \"Select\" || inspectionID.iteration === \"\" || inspectionID.type === \"Select\") return true\n    else return false\n  }\n\n  //encapsulate the props function as only message is different in this page\n  const displayAlert = message => {\n    setDisplayAlert({ message: message, position: 0, timeout: 3000, color: \"alert__red\" })\n  }\n\n  return (\n    <Fragment>\n      <div className=\"searchKey\">\n        <div className=\"searchKey_pair\">\n          <label>MC# : </label>\n          <input type=\"text\" name=\"searchKey_mc\" id=\"searchKey_mc\" onChange={handleKeyChange} readOnly={showFull ? \"readOnly\" : \"\"} />\n        </div>\n        <div className=\"searchKey_pair\">\n          <label>Iteration : </label>\n          <input type=\"number\" name=\"searchKey_iteration\" id=\"searchKey_iteration\" placeholder=\"Iteration\" min=\"1\" max=\"9\" onChange={handleKeyChange} readOnly={showFull ? \"readOnly\" : \"\"} />\n        </div>\n        <div className=\"searchKey_pair\">\n          <label>Type : </label>\n          <select name=\"searchKey_type\" id=\"searchKey_type\" onChange={handleKeyChange}>\n            <option value=\"Select\">Select</option>\n            {inspType &&\n              inspType.map(x => (\n                <option key={x.insp_type} value={x.insp_type} disabled={showFull ? \"disabled\" : \"\"}>\n                  {x.insp_type_long}\n                </option>\n              ))}\n          </select>\n        </div>\n        <div></div>\n        {!editMode ? (\n          <div>\n            {!isInvalidID() ? (\n              <div>\n                <button\n                  onClick={() => {\n                    validateMC(inspectionID)\n                  }}\n                >\n                  Create Inspection\n                </button>\n              </div>\n            ) : null}\n          </div>\n        ) : null}\n      </div>\n      <Spinner area=\"searchKey\" />\n    </Fragment>\n  )\n}\n\nexport default SearchKey\n","import React, { Fragment } from \"react\"\n\nconst MainMenu = props => {\n  const { handleSave, handleDelete, handleSearch, inspectionID, printReport, editMode, setEditMode, userProfile, misc, showFull, clearScreen, updateHistory, setDisplayAlert, oldMC } = props\n\n  const submitted = misc.submitted\n  const editable = userProfile.ignore_submit === undefined ? false : userProfile.ignore_submit\n\n  const handleClick = event => {\n    const id = event.target.id\n\n    setEditMode(false)\n\n    if (id === \"save\") {\n      submitted ? handleSave(true) : handleSave(false)\n    }\n\n    if (id === \"edit\") {\n      // oldMC doesn't allow edit\n      if (oldMC.current) {\n        setDisplayAlert({ message: \"You can NOT edit inspecton with obsolete MC.  This is for view only !\", position: 0, timeout: 2500, color: \"alert__red\" })\n        return\n      }\n      setEditMode(true)\n    }\n\n    if (id === \"delete\") {\n      handleDelete(inspectionID)\n    }\n    if (id === \"search\") {\n      setEditMode(false)\n      handleSearch(inspectionID)\n    }\n    if (id === \"print\") {\n      printReport(\"Inspection_Report.xlsx\", false)\n    }\n    if (id === \"print_draft\") {\n      // print draft watermark\n      printReport(\"Inspection_Report.xlsx\", true)\n    }\n\n    if (id === \"cancel\") {\n      setEditMode(false)\n      clearScreen()\n    }\n  }\n  return (\n    <Fragment>\n      <div className=\"mainMenu\">\n        <div className=\"mainMenu_inspectionKey\">\n          Inspection Key : &nbsp;&nbsp;\n          {/* {(submitted || \"\") && showFull ? <i className=\"fa fa-lock mainMenu_lock\"></i> : null} */}\n          {(submitted || \"\") && showFull ? (\n            <i\n              className=\"fa fa-lock mainMenu_lock clickable\"\n              onClick={() => {\n                if (editable) {\n                  var confirm = window.confirm(\"Are you sure you want to unlock this inspeciton ? \")\n                  if (confirm === true) {\n                    handleSave(false)\n                  }\n                } else {\n                  alert(\"You have no rights to unlock this inspeciton !\")\n                }\n              }}\n            ></i>\n          ) : null}\n          {(!submitted || \"\") && showFull ? (\n            <i\n              className=\"fa fa-unlock mainMenu_unlock clickable\"\n              onClick={() => {\n                var confirm = window.confirm(\"Are you sure you want to submit or lock this inspeciton ? \")\n                if (confirm === true) {\n                  handleSave(true)\n                }\n              }}\n            ></i>\n          ) : null}\n        </div>\n        {editMode || \"\" ? (\n          <button id=\"save\" onClick={handleClick}>\n            Save\n          </button>\n        ) : null}\n        {!editMode ? (\n          <button id=\"search\" onClick={handleClick}>\n            Search\n          </button>\n        ) : null}\n        {!editMode && showFull && (!submitted || editable) ? (\n          <button id=\"edit\" onClick={handleClick}>\n            Edit&nbsp;\n            {(submitted || \"\") && showFull ? <i className=\"fa fa-lock\"></i> : null}\n          </button>\n        ) : null}\n        {showFull && (!submitted || editable) ? (\n          // {editMode ? (\n          <button id=\"cancel\" onClick={handleClick}>\n            Cancel\n          </button>\n        ) : null}\n        {!editMode && submitted ? (\n          <button id=\"print\" onClick={handleClick}>\n            Print\n          </button>\n        ) : null}\n        {!editMode && !submitted && showFull ? (\n          <button id=\"print_draft\" onClick={handleClick}>\n            Print Draft\n          </button>\n        ) : null}\n\n        {(showFull || \"\") && editable && showFull && updateHistory.length > 0 ? (\n          <button id=\"delete\" onClick={handleClick} className=\"deleteButton\">\n            Delete\n          </button>\n        ) : null}\n      </div>\n    </Fragment>\n  )\n}\n\nexport default MainMenu\n","import React, { Fragment } from \"react\"\nimport { Spinner } from \"./Spinner\"\n\nconst SearchedMC = props => {\n  const { setInspectionID, handleSearch, searchedMC, setShowSearchedMC, currentMF } = props\n\n  const newSearchedMC = []\n  for (var i = 0; i < searchedMC.length; i++) {\n    if (searchedMC[i].main[\"mf_no\"] === currentMF) {\n      newSearchedMC.push(searchedMC[i]._id)\n    }\n  }\n\n  const handleClick = id => {\n    setInspectionID(id)\n    handleSearch(id)\n    // Set search fields in SearchKey.js\n    document.getElementById(\"searchKey_mc\").value = id.mc\n    document.getElementById(\"searchKey_iteration\").value = id.iteration\n    document.getElementById(\"searchKey_type\").value = id.type\n    setShowSearchedMC(false)\n  }\n\n  return (\n    // present the table\n    <Fragment>\n      <div className=\"searchedMC\">\n        <div className=\"searchedMC_header1 searchedMC_header\">\n          <div></div>\n          <div>MC</div>\n          <div className=\"searchedMC_detail_center\">Iteration</div>\n          <div className=\"searchedMC_detail_center\">Type</div>\n        </div>\n        <div className=\"searchedMC_header2 searchedMC_header\">\n          <div></div>\n          <div>MC</div>\n          <div className=\"searchedMC_detail_center\">Iteration</div>\n          <div className=\"searchedMC_detail_center\">Type</div>\n        </div>\n        <div className=\"searchedMC_header3 searchedMC_header\">\n          <div></div>\n          <div>MC</div>\n          <div className=\"searchedMC_detail_center\">Iteration</div>\n          <div className=\"searchedMC_detail_center\">Type</div>\n        </div>\n\n        {newSearchedMC.length > 0\n          ? newSearchedMC.map((x, index) => (\n              <div\n                className=\"searchedMC_detail\"\n                key={index}\n                onClick={() => {\n                  handleClick({ mc: x.mc, iteration: x.iteration, type: x.type })\n                }}\n              >\n                <div></div>\n                <div>{x.mc}</div>\n                <div className=\"searchedMC_detail_center\">{x.iteration}</div>\n                <div className=\"searchedMC_detail_center\">{x.type}</div>\n              </div>\n            ))\n          : null}\n      </div>\n      <Spinner area=\"mfrSelection\" />\n    </Fragment>\n  )\n}\n\nexport default SearchedMC\n","import React, { Fragment } from \"react\"\n\nconst SupplierInfo = props => {\n  const { currentSU, currentMF, currentSUName, currentMFName, setSelectingSupplier, setShowFull, setMFRsearch } = props\n\n  const changeSelectingSuppler = () => {\n    setMFRsearch(\"\")\n    setSelectingSupplier(true)\n  }\n\n  return (\n    // present the table\n    <Fragment>\n      {!!currentSU ? (\n        <div className=\"supplierInfo\">\n          <button\n            onClick={() => {\n              setShowFull(false)\n              changeSelectingSuppler()\n            }}\n          >\n            Select\n          </button>\n          <div className=\"supplierInfo_capitalize supplierInfoSU\" id=\"supplierInfo_bar\">\n            {currentSUName.toLowerCase()} ({currentSU})\n          </div>\n          <div className=\"supplierInfo_capitalize supplierInfoMF\">\n            {currentMFName.toLowerCase()} ({currentMF})\n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  )\n}\nexport default SupplierInfo\n","import React, { Fragment } from \"react\"\n\nconst MfrSelection = props => {\n  const { partyTable, setCurrentSU, setCurrentMF, setCurrentSUName, setCurrentMFName, selectingSupplier, setSelectingSupplier, setMFRsearch, mfrSearch, getMCtable, setEditMode } = props\n\n  const handleClick = (su, mf, su_name, mf_name) => {\n    setCurrentSU(su)\n    setCurrentMF(mf)\n    setCurrentSUName(su_name)\n    setCurrentMFName(mf_name)\n    setSelectingSupplier(false)\n    getMCtable(su, mf)\n    setEditMode(false)\n  }\n\n  const handleMFRsearch = event => {\n    const { value } = event.target\n    setMFRsearch(value.toUpperCase())\n  }\n\n  return (\n    // present the table\n    <Fragment>\n      {partyTable && selectingSupplier ? (\n        <div>\n          <div className=\"mfrSelection_header\"> Select a manufacturer below:</div>\n          <div className=\"mfrSelection_input\">\n            <input type=\"text\" id=\"mfrSearch\" name=\"mfrSearch\" value={mfrSearch || \"\"} justify=\"left\" onChange={handleMFRsearch} style={{ textTransform: \"uppercase\" }} placeholder=\"Type to search\" />\n          </div>\n        </div>\n      ) : null}\n\n      {partyTable && selectingSupplier\n        ? partyTable\n            .filter(y => mfrSearch.length === 0 || \"\".concat(\" \", y.SU_NAME, \" \", y.SU, \" \", y.MF, \" \", y.MF_NAME).search(mfrSearch) > 0)\n            .map(x => (\n              <div\n                className=\"mfrSelection\"\n                key={x.SU.concat(x.MF)}\n                onClick={() => {\n                  handleClick(x.SU, x.MF, x.SU_NAME, x.MF_NAME)\n                }}\n              >\n                <div className=\"mfrSelectionSU\">\n                  {x.SU_NAME} ({x.SU}){\" \"}\n                </div>\n                <div className=\"mfrSelectionMF\">\n                  {x.MF_NAME} ({x.MF}){\" \"}\n                </div>\n              </div>\n            ))\n        : null}\n    </Fragment>\n  )\n}\nexport default MfrSelection\n","import React from \"react\"\nimport DatePicker from \"react-datepicker\"\n\nconst Misc = props => {\n  const { setInspectionDate, inspectionDate, setMisc, misc, editMode, mqaMembers, packTypes, userProfile, productCategories } = props\n\n  const handleDate = date => {\n    setInspectionDate(date)\n  }\n\n  // Misc Fields (Text) Capture\n  const handleChange = (element, yes_or_no) => event => {\n    let value = event.target.value\n\n    if (misc) {\n      let newMisc = { ...misc }\n      switch (element) {\n        case 2: //b\n          newMisc = { ...newMisc, product_type: value }\n          break\n        case 3: //c\n          newMisc = { ...newMisc, lab_test_report: value }\n          break\n        case 4: //d\n          newMisc = { ...newMisc, lab_child_safety_report: value }\n          break\n        case 5: //e\n          newMisc = { ...newMisc, fibre_content: value }\n          break\n        case 6: //f\n          newMisc = { ...newMisc, comments: value }\n          break\n        case 7: //g\n          newMisc = { ...newMisc, governance_inspection: yes_or_no }\n          break\n        case 8: //h\n          newMisc = { ...newMisc, props65_report: value }\n          break\n        case 9: //i\n          newMisc = { ...newMisc, ship_mode: value }\n          break\n        case 10: //j\n          newMisc = { ...newMisc, pack_pct: value }\n          break\n        case 11: //k\n          newMisc = { ...newMisc, ship_window: value }\n          break\n        case 12: //l\n          newMisc = { ...newMisc, carton_list: value }\n          break\n        case 13: //m\n          newMisc = { ...newMisc, carton_total: value }\n          break\n        case 14: //n\n          newMisc = { ...newMisc, pack_type: value }\n          break\n        case 15: //O\n          newMisc = { ...newMisc, qa_type: value }\n          if (value === \"SQA\") newMisc = { ...newMisc, sqa: userProfile.email }\n          break\n        case 16: //p\n          newMisc = { ...newMisc, mqa: value }\n          break\n        case 17: //p\n          newMisc = { ...newMisc, sqa: value }\n          break\n        case 18: //q\n          newMisc = { ...newMisc, correlation_inspection: yes_or_no }\n          break\n        case 19: //r\n          newMisc = { ...newMisc, product_category: value }\n          break\n        case 20: //s\n          newMisc = { ...newMisc, label: value }\n          break\n\n        default:\n          console.log(\"No element\")\n      }\n      setMisc(newMisc)\n    }\n  }\n\n  return (\n    <div className=\"misc\">\n      <div className=\"misc_a\">\n        <div className=\"misc_title misc_grid_a\">\n          <div>Inspection Date (A)</div>\n          <DatePicker className=\"datePicker\" dateFormat=\"MM/dd/yy\" selected={inspectionDate} onChange={date => handleDate(date)} readOnly={editMode ? \"\" : \"readOnly\"} />\n        </div>\n      </div>\n\n      <div className=\"misc_g misc_grid_g\">\n        <div className=\"misc_title\">Governance Inspection (G)</div>\n        <div>\n          <input type=\"radio\" id=\"misc_governance_inspection_yes\" name=\"misc_governance_inspection\" value={misc.governance_inspection || \"\"} checked={misc.governance_inspection === \"Yes\"} onChange={handleChange(7, \"Yes\")} disabled={editMode ? \"\" : \"disabled\"} />\n        </div>\n        <div>Yes</div>\n        <div></div>\n        <div>\n          <input type=\"radio\" id=\"misc_governance_inspection_no\" name=\"misc_governance_inspection\" value={misc.governance_inspection || \"\"} checked={misc.governance_inspection === \"No\"} onChange={handleChange(7, \"No\")} disabled={editMode ? \"\" : \"disabled\"} />\n        </div>\n        <div>No</div>\n      </div>\n\n      <div className=\"misc_j misc_grid_j\">\n        <div className=\"misc_title\">Pack % During Inspection (J)</div>\n        <input type=\"text\" id=\"misc_packPct\" name=\"misc_packPct\" value={misc.pack_pct || \"\"} justify=\"left\" placeholder=\"%\" onChange={handleChange(10)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_k misc_grid_k\">\n        <div className=\"misc_title\">Ship Window (K)</div>\n        <input type=\"text\" id=\"misc_shipWindow\" name=\"misc_shipWindow\" value={misc.ship_window || \"\"} justify=\"left\" placeholder=\"Ship Window\" onChange={handleChange(11)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_b misc_grid_b\">\n        <div className=\"misc_title\">Product Type (B)</div>\n        <input type=\"text\" id=\"misc_productType\" name=\"misc_productType\" value={misc.product_type || \"\"} justify=\"left\" placeholder=\"Product Type\" onChange={handleChange(2)} readOnly={editMode ? \"\" : \"readOnly\"} style={{ textTransform: \"uppercase\" }} />\n      </div>\n\n      <div className=\"misc_o misc_grid_o\">\n        <div className=\"misc_title\">QA Type (O)</div>\n\n        <select id=\"misc_qaType\" name=\"misc_qaType\" value={misc.qa_type || \"Select\"} justify=\"left\" placeholder=\"QA Type\" onChange={handleChange(15)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"MQA\" disabled={editMode ? \"\" : \"disabled\"}>\n            MQA\n          </option>\n          <option value=\"SQA\" disabled={editMode ? \"\" : \"disabled\"}>\n            SQA\n          </option>\n        </select>\n      </div>\n\n      {/* <div className=\"misc_n misc_grid_n\">\n        <div className=\"misc_title\">Inspector (N)</div>\n        <input type=\"text\" id=\"misc_inspector\" name=\"misc_inspector\" value={misc.inspector || \"\"} justify=\"left\" placeholder=\"Inspector\" onChange={handleChange(14)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div> */}\n\n      <div className=\"misc_c misc_grid_c\">\n        <div className=\"misc_title\">Lab Test Report (C)</div>\n\n        <select id=\"misc_labTest\" name=\"misc_labTest\" value={misc.lab_test_report || \"Select\"} justify=\"left\" placeholder=\"Test result\" onChange={handleChange(3)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"N/A\" disabled={editMode ? \"\" : \"disabled\"}>\n            N/A\n          </option>\n          <option value=\"Pending\" disabled={editMode ? \"\" : \"disabled\"}>\n            Pending\n          </option>\n          <option value=\"Pass\" disabled={editMode ? \"\" : \"disabled\"}>\n            Pass\n          </option>\n          <option value=\"Fail\" disabled={editMode ? \"\" : \"disabled\"}>\n            Fail\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_d misc_grid_d\">\n        <div className=\"misc_title\">Child Safety Report (D)</div>\n\n        <select id=\"misc_childSafetyReport\" name=\"misc_childSafetyReport\" value={misc.lab_child_safety_report || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(4)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"N/A\" disabled={editMode ? \"\" : \"disabled\"}>\n            N/A\n          </option>\n          <option value=\"Pending\" disabled={editMode ? \"\" : \"disabled\"}>\n            Pending\n          </option>\n          <option value=\"Accept\" disabled={editMode ? \"\" : \"disabled\"}>\n            Accept\n          </option>\n          <option value=\"Reject\" disabled={editMode ? \"\" : \"disabled\"}>\n            Reject\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_h misc_grid_h\">\n        <div className=\"misc_title\">Props 65 Report (H)</div>\n        <select id=\"misc_props65Report\" name=\"misc_props65Report\" value={misc.props65_report || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(8)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"N/A\" disabled={editMode ? \"\" : \"disabled\"}>\n            N/A\n          </option>\n          <option value=\"Pending\" disabled={editMode ? \"\" : \"disabled\"}>\n            Pending\n          </option>\n          <option value=\"Accept\" disabled={editMode ? \"\" : \"disabled\"}>\n            Accept\n          </option>\n          <option value=\"Reject\" disabled={editMode ? \"\" : \"disabled\"}>\n            Reject\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_i misc_grid_i\">\n        <div className=\"misc_title\">Ship Mode (I)</div>\n\n        <select id=\"misc_shipMode\" name=\"misc_shipMode\" value={misc.ship_mode || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(9)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"Ocean\" disabled={editMode ? \"\" : \"disabled\"}>\n            Ocean\n          </option>\n          <option value=\"Air\" disabled={editMode ? \"\" : \"disabled\"}>\n            Air\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_s misc_grid_s\">\n        <div className=\"misc_title\">Brand (S)</div>\n        <input type=\"text\" id=\"misc_label\" name=\"misc_label\" value={misc.label || \"\"} justify=\"left\" onChange={handleChange(20)} readOnly={editMode ? \"\" : \"readOnly\"} style={{ textTransform: \"uppercase\" }} />\n      </div>\n\n      <div className=\"misc_e misc_grid_e\">\n        <div className=\"misc_title\">Fibre Content (E)</div>\n        <input type=\"text\" id=\"misc_fibreContent\" name=\"misc_fibreContent\" value={misc.fibre_content || \"\"} justify=\"left\" placeholder=\"Fibre Content\" onChange={handleChange(5)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_f misc_grid_f\">\n        <div className=\"misc_title\">Comments (F)</div>\n        <textarea rows=\"5\" cols=\"50\" id=\"misc_comments\" name=\"misc_comments\" value={misc.comments || \"\"} justify=\"left\" placeholder=\"Comments\" onChange={handleChange(6)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_l misc_grid_l\">\n        <div className=\"misc_title\">Carton List (L)</div>\n        <textarea rows=\"3\" cols=\"50\" id=\"misc_cartonList\" name=\"misc_cartonList\" value={misc.carton_list || \"\"} justify=\"left\" placeholder=\"Carton List\" onChange={handleChange(12)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_m misc_grid_m\">\n        <div className=\"misc_title\">Carton Total (M)</div>\n        <input type=\"text\" id=\"misc_cartonTotal\" name=\"misc_cartonTotal\" value={misc.carton_total || \"\"} justify=\"left\" placeholder=\"Carton Total\" onChange={handleChange(13)} readOnly={editMode ? \"\" : \"readOnly\"} />\n      </div>\n\n      <div className=\"misc_i misc_grid_i\">\n        <div className=\"misc_title\">Ship Mode (I)</div>\n        <select id=\"misc_shipMode\" name=\"misc_shipMode\" value={misc.ship_mode || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(9)}>\n          <option value=\"Select\" disabled=\"disabled\">\n            Select\n          </option>\n          <option value=\"Ocean\" disabled={editMode ? \"\" : \"disabled\"}>\n            Ocean\n          </option>\n          <option value=\"Air\" disabled={editMode ? \"\" : \"disabled\"}>\n            Air\n          </option>\n        </select>\n      </div>\n\n      <div className=\"misc_p misc_grid_p\">\n        <div className=\"misc_title\">{misc.qa_type === \"MQA\" || misc.qa_type === undefined ? <span>MQA (P)</span> : <span>SQA (P)</span>}</div>\n        {misc.qa_type === \"MQA\" || misc.qa_type === undefined ? (\n          <select id=\"misc_mqa\" name=\"misc_mqa\" value={misc.mqa || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(16)}>\n            <option value=\"Select\">Select</option>\n            {mqaMembers &&\n              mqaMembers.map(x => (\n                <option key={x.mqa} value={x.mqa} disabled={editMode ? \"\" : \"disabled\"}>\n                  {x.mqa}\n                </option>\n              ))}\n          </select>\n        ) : (\n          <input type=\"text\" id=\"misc_sqa\" name=\"misc_sqa\" value={misc.sqa || \"\"} justify=\"left\" placeholder=\"Inspector\" onChange={handleChange(17)} readOnly=\"readOnly\" />\n        )}\n      </div>\n\n      <div className=\"misc_n misc_grid_n\">\n        <div className=\"misc_title\">Pack Type (N)</div>\n\n        <select id=\"misc_pack_type\" name=\"misc_pack_type\" value={misc.pack_type || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(14)}>\n          <option value=\"Select\">Select</option>\n          {packTypes &&\n            packTypes.map(x => (\n              <option key={x.type} value={x.type} disabled={editMode ? \"\" : \"disabled\"}>\n                {x.type}\n              </option>\n            ))}\n        </select>\n      </div>\n\n      <div className=\"misc_q misc_grid_q\">\n        <div className=\"misc_title\">Correlation Inspection (Q)</div>\n        <div>\n          <input type=\"radio\" id=\"misc_correlation_yes\" name=\"misc_correlation_inspection\" value={misc.correlation_inspection || \"\"} checked={misc.correlation_inspection === \"Yes\"} onChange={handleChange(18, \"Yes\")} disabled={editMode ? \"\" : \"disabled\"} />\n        </div>\n        <div>Yes</div>\n        <div></div>\n        <div>\n          <input type=\"radio\" id=\"misc_correlation_inspection_no\" name=\"misc_correlation_inspection\" value={misc.correlation_inspection || \"\"} checked={misc.correlation_inspection === \"No\"} onChange={handleChange(18, \"No\")} disabled={editMode ? \"\" : \"disabled\"} />\n        </div>\n        <div>No</div>\n      </div>\n\n      <div className=\"misc_r misc_grid_r\">\n        <div className=\"misc_title\">Product Category (R)</div>\n\n        <select id=\"misc_product_category\" name=\"misc_product_category\" value={misc.product_category || \"Select\"} justify=\"left\" placeholder=\" \" onChange={handleChange(19)}>\n          <option value=\"Select\">Select</option>\n          {productCategories &&\n            productCategories.map(x => (\n              <option key={x.category} value={x.category} disabled={editMode ? \"\" : \"disabled\"}>\n                {x.category}\n              </option>\n            ))}\n        </select>\n      </div>\n    </div>\n  )\n}\nexport default Misc\n","import React, { Fragment } from \"react\"\n\nconst Result = props => {\n  const { setMisc, misc, editMode, visualResult, calculateFinalResult } = props\n\n  function calculate_final_result(misc) {\n    if (misc.packing_result === \"Failed\" || (misc.measurement_result === \"Failed\") | (visualResult === \"Failed\")) {\n      return \"Failed\"\n    } else {\n      return \"Passed\"\n    }\n  }\n\n  const handleChange = (element, param2) => event => {\n    let value = event.target.value\n    if (misc) {\n      let newMisc = { ...misc }\n      switch (element) {\n        case 1: //a  Packing\n          newMisc = { ...newMisc, packing_result: value }\n          if (value === \"Failed\") {\n            newMisc = { ...newMisc, final_result: \"Failed\" }\n          } else {\n            newMisc = { ...newMisc, final_result: calculate_final_result(newMisc) }\n          }\n          break\n        case 2: //b  Measurement\n          newMisc = { ...newMisc, measurement_result: value }\n          if (value === \"Failed\") {\n            newMisc = { ...newMisc, final_result: \"Failed\" }\n          } else {\n            newMisc = { ...newMisc, final_result: calculate_final_result(newMisc) }\n          }\n          break\n        default:\n          console.log(\"No element\")\n      }\n      setMisc(newMisc)\n    }\n  }\n\n  return (\n    <Fragment>\n      <div className=\"result\">\n        <div className=\"result_f result_grid_f\"> Inspection Result Summary</div>\n        <div></div>\n        <div></div>\n\n        <div className=\"result_a result_grid_a\">\n          <div className=\"result_title\">Packing</div>\n          <select id=\"result_packingResult\" name=\"misc_packingResult\" value={misc.packing_result || \"Select\"} justify=\"left\" placeholder=\"Packing Result\" onChange={handleChange(1)}>\n            <option value=\"Select\" disabled=\"disabled\">\n              Select\n            </option>\n            <option value=\"Passed\" disabled={editMode ? \"\" : \"disabled\"}>\n              Passed\n            </option>\n            <option value=\"Failed\" disabled={editMode ? \"\" : \"disabled\"}>\n              Failed\n            </option>\n          </select>\n        </div>\n\n        <div className=\"result_b result_grid_b\">\n          <div className=\"result_title\">Measurement</div>\n          <select id=\"result_measurementResult\" name=\"misc_measurementResult\" value={misc.measurement_result || \"Select\"} justify=\"left\" placeholder=\"Measurement result\" onChange={handleChange(2)}>\n            <option value=\"Select\" disabled=\"disabled\">\n              Select\n            </option>\n            <option value=\"Passed\" disabled={editMode ? \"\" : \"disabled\"}>\n              Passed\n            </option>\n            <option value=\"Failed\" disabled={editMode ? \"\" : \"disabled\"}>\n              Failed\n            </option>\n          </select>\n        </div>\n\n        <div className=\"result_c result_grid_c\">\n          <div className=\"result_title\">Critical / Major / Minor</div>\n          <input type=\"text\" id=\"result_defectiveResult\" name=\"result_defectiveResult\" value={visualResult.defective_result || \"\"} justify=\"left\" placeholder=\"\" readOnly=\"readOnly\" />\n        </div>\n\n        <div className=\"result_d result_grid_d\">\n          <div className=\"result_title\">Sample Threshold (Major / Minor)</div>\n          <input type=\"text\" id=\"result_sampleThreshold\" name=\"result_sampleThreshold\" value={visualResult.sample_threshold || \"\"} justify=\"left\" placeholder=\"\" readOnly=\"readOnly\" />\n        </div>\n\n        <div className=\"result_e result_grid_e\">\n          <div className=\"result_title\">Final Result</div>\n          <input type=\"text\" id=\"result_finalResult\" name=\"result_finalResult\" value={calculateFinalResult()} justify=\"left\" placeholder=\"\" readOnly=\"readOnly\" />\n        </div>\n\n        <div className=\"result_g result_grid_g\">\n          <div className=\"result_title\">Visual Result</div>\n          <input type=\"text\" id=\"result_visualResult\" name=\"result_visualResult\" value={visualResult.visual_result || \"Passed\"} justify=\"left\" placeholder=\"\" readOnly=\"readOnly\" />\n        </div>\n      </div>\n    </Fragment>\n  )\n}\nexport default Result\n","import { React, Fragment } from \"react\"\n\nconst ChangeTrack = props => {\n  const { updateHistory, showHistory, setShowHistory, convertToLocal } = props\n\n  var history = [...updateHistory]\n\n  history.sort(function (a, b) {\n    // note : must change the string back to date object for comparison\n    if (Date.parse(a.updated_time) > Date.parse(b.updated_time)) return -1\n    else return 1\n  })\n\n  let root = document.querySelector(\":root\")\n\n  return (\n    <Fragment>\n      <div className=\"changeTrack_section_upper\">\n        <div>Change History</div>\n        <div></div>\n        <div>\n          Show &nbsp;\n          <i\n            className=\"clickable fa fa-plus\"\n            onClick={() => {\n              setShowHistory(true)\n            }}\n          ></i>\n          &nbsp;&nbsp;Hide &nbsp;\n          <i\n            className=\"clickable fa fa-minus\"\n            onClick={() => {\n              setShowHistory(false)\n            }}\n          ></i>\n        </div>\n        <div></div>\n        <div>\n          Expand &nbsp;\n          <i\n            className=\"clickable fa fa-plus\"\n            onClick={() => {\n              //change class attribute dynamically\n              root.style.setProperty(\"--changeTrack_max_height\", \"100rem\")\n            }}\n          ></i>\n          &nbsp;&nbsp; Collapse &nbsp;\n          <i\n            className=\"clickable fa fa-minus\"\n            onClick={() => {\n              //change class attribute dynamically\n              root.style.setProperty(\"--changeTrack_max_height\", \"4.3rem\")\n            }}\n          ></i>\n        </div>\n        <div></div>\n      </div>\n      {showHistory ? (\n        <div className=\"changeTrack_section_bottom\">\n          <div className=\"changeTrack_grid_header\">\n            <div>Local Time</div>\n            <div>Updated By</div>\n            <div>Mode</div>\n            <div>Result Details</div>\n            <div></div>\n          </div>\n\n          <div className=\"changeTrack_grid_outer_detail\">\n            {history.length > 0\n              ? history.map(line => (\n                  <div key={line.id} className=\"changeTrack_grid_detail\">\n                    <div>{convertToLocal(line.updated_time)}</div>\n                    <div>{line.updated_by}</div>\n                    <div>{line.updated_mode}</div>\n                    <div>{line.misc}</div>\n                  </div>\n                ))\n              : null}\n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  )\n}\n\nexport default ChangeTrack\n","import React, { Fragment } from \"react\"\n\nconst SharePoint = props => {\n  const { inspectionID, currentSU, currentMF, getSharePointFiles, setShowSharePointFiles, showSharePointFiles, setSharePointFiles, sharePointPath, createsharePointPDF, editMode } = props\n\n  const handleClick_add = () => {\n    const url = \"https://macysinc.sharepoint.com/sites/OSO/\".concat(sharePointPath, \"/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F\", sharePointPath, \"%2F\", \"SU\", currentSU, \"MF\", currentMF, \"&dt=\", new Date().getTime())\n    var newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n    if (newWindow) newWindow.opener = null\n  }\n\n  const handleClick_view = () => {\n    const url = \"https://macysinc.sharepoint.com/sites/OSO/\".concat(sharePointPath, \"/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F\", sharePointPath, \"%2F\", \"SU\", currentSU, \"MF\", currentMF, \"&view=7&q=\", inspectionID.mc, \"&FilterField1=Inspection_x0020_ID&FilterValue1=\", inspectionID.mc, \"-\", inspectionID.iteration, \"-\", inspectionID.type[0], \"&dt=\", new Date().getTime())\n    var newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n    if (newWindow) newWindow.opener = null\n  }\n\n  const handleToggleSharePointFiles = () => {\n    if (showSharePointFiles === true) {\n      setShowSharePointFiles(false)\n      setSharePointFiles([])\n    } else {\n      setShowSharePointFiles(true)\n      getSharePointFiles()\n    }\n  }\n\n  const handleGetSharePointFiles = () => {\n    if (showSharePointFiles) {\n      setSharePointFiles([])\n      getSharePointFiles()\n    }\n  }\n\n  return (\n    <Fragment>\n      <div className=\"sharePoint_section\">Document Management on SharePoint</div>\n      <div className=\"sharePoint_grid\">\n        <div className=\"sharePoint_cell\">\n          <img src=\"../static/img/sharePointx.jpg\" alt=\"sharePoint\" className=\"sharePoint_photo\" />\n        </div>\n        <div></div>\n\n        <div className=\"sharePoint_cell\">\n          View files&nbsp;\n          <i\n            className=\"fa  fa-sign-in clickable\"\n            onClick={() => {\n              handleClick_view()\n            }}\n          ></i>\n        </div>\n\n        {editMode ? (\n          <div className=\"sharePoint_cell\">\n            Add files&nbsp;\n            <i\n              className=\"fa  fa-sign-in clickable\"\n              onClick={() => {\n                handleClick_add()\n              }}\n            ></i>\n          </div>\n        ) : (\n          <div className=\"sharePoint_cell\"></div>\n        )}\n\n        {/* Combine photo into PDF */}\n        {/* disable below 3/9/22 */}\n        {false ? (\n          <div className=\"sharePoint_cell\">\n            Create Photo Album&nbsp;\n            <i\n              className=\"fa  fa-file-pdf-o clickable\"\n              onClick={() => {\n                createsharePointPDF()\n              }}\n            ></i>\n          </div>\n        ) : null}\n\n        <div className=\"sharePoint_cell\">\n          Instant View : &nbsp;&nbsp;\n          {showSharePointFiles ? \"Collapse\" : \"Expand\"}\n          &nbsp;\n          <i\n            className={\"clickable fa \" + (showSharePointFiles ? \"fa-minus\" : \"fa-plus\")}\n            onClick={() => {\n              handleToggleSharePointFiles()\n            }}\n          ></i>\n          &nbsp; &nbsp;\n          <i\n            id=\"sharePoint_refresh\"\n            className=\"clickable fa fa-refresh\"\n            onClick={() => {\n              handleGetSharePointFiles()\n            }}\n          ></i>\n          &nbsp; &nbsp;\n        </div>\n      </div>\n    </Fragment>\n  )\n}\nexport default SharePoint\n","import React, { Fragment } from \"react\"\n\nconst ShowSharePointFiles = props => {\n  const { sharePointFiles, downloadSharePointFile, showSharePointFiles, convertToLocal, editMode, handleDeleteSPfile } = props\n\n  const ext = [\".jpg\", \".png\"]\n  function isSupportPicExt(filename) {\n    for (let i = 0; i < ext.length; i++) {\n      if (filename.toLowerCase().includes(ext[i])) {\n        return true\n      }\n    }\n    return false\n  }\n\n  // const openPhoto = url => {\n  //   const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  //   if (newWindow) newWindow.opener = null\n  // }\n\n  return (\n    <Fragment>\n      {showSharePointFiles ? (\n        <div className=\"showSharePointFiles_section\">\n          <div className=\"showSharePointFiles_grid_header\">\n            <div>File Name</div>\n            <div>Last Editor</div>\n            <div>Last Edit Time</div>\n            <div>File Size</div>\n            <div>Download</div>\n            <div>File Type</div>\n            <div>Delete</div>\n          </div>\n\n          <div>\n            {sharePointFiles.length > 0\n              ? sharePointFiles.map(line =>\n                  line.filename === \"No files\" ? (\n                    <div className=\"sharePointFiles_no_files\">{line.filename}</div>\n                  ) : (\n                    <div key={line.unique_id} className=\"showSharePointFiles_grid_detail\">\n                      <div>{line.filename}</div>\n                      <div>{line.editor === \"SharePoint App\" ? line.last_editor : line.editor}</div>\n                      <div>{convertToLocal(line.modified)}</div>\n                      <div>{line.size}</div>\n                      <div>\n                        <i\n                          className=\"clickable fa fa-download\"\n                          onClick={() => {\n                            downloadSharePointFile(line.filename)\n                          }}\n                        ></i>\n                      </div>\n                      {isSupportPicExt(line.filename) ? (\n                        <div className=\"sharePointFiles_photoBlock\">\n                          <img src={\"/showPhoto?folder=\" + line.folder + \"&filename=\" + line.filename} alt=\"\" />\n                        </div>\n                      ) : (\n                        <div>\n                          <i className=\"fa fa-file fa-file-doc\"></i>\n                        </div>\n                      )}\n\n                      {editMode ? (\n                        <div>\n                          <button\n                            id=\"sharePointFiles_deleteButton\"\n                            onClick={() => {\n                              handleDeleteSPfile(line.unique_id)\n                              //props.deleteDefect(x.id)\n                            }}\n                          >\n                            &times;\n                          </button>\n                        </div>\n                      ) : (\n                        <div>&nbsp;</div>\n                      )}\n                    </div>\n                  )\n                )\n              : null}\n          </div>\n        </div>\n      ) : null}\n    </Fragment>\n  )\n}\nexport default ShowSharePointFiles\n","import React, { Fragment } from \"react\"\nimport { Spinner } from \"./Spinner\"\n\nconst ShowSpinner = props => {\n  const { position } = props\n\n  return (\n    <Fragment>\n      {position === 1 ? <Spinner area=\"getUserProfile\" spinnerMessage=\"Loading your profile, please wait... \" /> : null}\n      {position === 2 ? (\n        <div>\n          <Spinner area=\"printReport\" spinnerMessage=\"Preparing the report, please wait... \" />\n          <Spinner area=\"saveInspection\" spinnerMessage=\"Saving the changes, please wait... \" />\n          <Spinner area=\"deleteInspection\" spinnerMessage=\"Deleting, please wait... \" />\n          <Spinner area=\"createInspection\" spinnerMessage=\"Loading, please wait... \" />\n          <Spinner area=\"getMCtable\" spinnerMessage=\"Getting MC data, please wait... \" />\n        </div>\n      ) : null}\n      {position === 3 ? (\n        <div>\n          <Spinner area=\"sharePointFiles\" spinnerMessage=\"Loading SharePoint info, please wait... \" />\n          <Spinner area=\"downloadSharePointfiles\" spinnerMessage=\"Downloading SharePoint info, please wait... \" />\n          <Spinner area=\"sharePointUpload\" spinnerMessage=\"Uploading file(s) to SharePoint, please wait... \" />\n        </div>\n      ) : null}\n      {position === 10 ? <Spinner area=\"pastInspection\" spinnerMessage=\"Loading past inspections, please wait... \" /> : null}\n    </Fragment>\n  )\n}\nexport default ShowSpinner\n","import React, { useState, Fragment, useEffect, useRef } from \"react\"\n\nimport axios from \"axios\"\n//import ItemTable from \"./components/ItemTable\"\nimport ItemTotal from \"./components/ItemTotal\"\nimport DefectOptions from \"./components/DefectOptions\"\nimport DefectList from \"./components/DefectList\"\nimport ShowAlert from \"./components/ShowAlert\"\nimport CheckList from \"./components/CheckList\"\nimport UploadForm from \"./components/UploadForm\"\nimport SearchKey from \"./components/SearchKey\"\nimport MainMenu from \"./components/MainMenu\"\nimport SearchedMC from \"./components/SearchedMC\"\nimport SupplierInfo from \"./components/SupplierInfo\"\n// import PhotoBlock from \"./components/PhotoBlock\"\nimport MfrSelection from \"./components/MfrSelection\"\nimport Misc from \"./components/Misc\"\nimport Result from \"./components/Result\"\nimport ChangeTrack from \"./components/ChangeTrack\"\nimport SharePoint from \"./components/SharePoint\"\nimport ShowSharePointFiles from \"./components/ShowSharePointFiles\"\n\nimport { v4 as uuidv4 } from \"uuid\"\nimport { trackPromise } from \"react-promise-tracker\"\nimport ShowSpinner from \"./components/ShowSpinner\"\n\nconst App = () => {\n  //const initialFormState = { id: null, mc_no: \"\", item_no: \"\", order_qty: \"\", ship_qty: \"\" }\n  const initialInspectionID = { mc: \"\", iteration: \"Select\", type: \"Select\" }\n\n  // Setting state\n  const [items, setItems] = useState([])\n  const [showSearchedMC, setShowSearchedMC] = useState(false)\n  const [defects, setDefects] = useState([])\n  // set position 100 as impossible range as equivalent to empty\n  const [alert, setAlert] = useState({ position: 100 })\n  const [mcTable, setMCTable] = useState([])\n  const [checkList, setCheckList] = useState([])\n  const [inspectionDate, setInspectionDate] = useState(new Date())\n  const [inspectionID, setInspectionID] = useState(initialInspectionID)\n  const [uploads, setUploads] = useState([])\n  const [userProfile, setUserProfile] = useState([])\n  const [currentSU, setCurrentSU] = useState(\"\")\n  const [currentMF, setCurrentMF] = useState(\"\")\n  const [searchedMC, setSearchedMC] = useState([])\n\n  const [partyTable, setPartyTable] = useState([])\n  const [currentSUName, setCurrentSUName] = useState(\"\")\n  const [currentMFName, setCurrentMFName] = useState(\"\")\n  const [selectingSupplier, setSelectingSupplier] = useState(true)\n  const [mfList, setMfList] = useState([])\n  const [aqlTable, setAqlTable] = useState([])\n  const [editMode, setEditMode] = useState(false)\n  const [misc, setMisc] = useState({})\n  const [main, setMain] = useState({})\n  const [showFull, setShowFull] = useState(false)\n\n  const [visualResult, setVisualResult] = useState({})\n\n  const [updateHistory, setUpdateHistory] = useState([])\n  const [showHistory, setShowHistory] = useState(false)\n  const [sharePointFiles, setSharePointFiles] = useState([])\n  const [showSharePointFiles, setShowSharePointFiles] = useState(false)\n  const [checkListTemplate, setCheckListTemplate] = useState([])\n\n  const [defectLanguage, setDefectLanguage] = useState(\"en\")\n  const [defectList, setDefectList] = useState([])\n  const [criticalDefects, setCriticalDefects] = useState([])\n\n  const [sharePointPath, setSharePointPath] = useState()\n  const [mfrSearch, setMFRsearch] = useState(\"\")\n\n  const [packTypes, setPackTypes] = useState(\"\")\n\n  const [mqaMembers, setMQAmembers] = useState(\"\")\n  const [productCategories, setProductCategories] = useState(\"\")\n  const [inspType, setInspType] = useState(\"\")\n\n  const [ship, setShip] = useState([])\n  const [totalShip, setTotalShip] = useState(0)\n  const [totalInspect, setTotalInspect] = useState(0)\n  const [totalSample, setTotalSample] = useState(0)\n\n  const [poList, setPOList] = useState([])\n  const initLoad = useRef(false) // will check later if this can be removed\n\n  const currentSearchedItem = useRef(\"\")\n\n  const oldMC = useRef(false)\n\n  // Data\n\n  useEffect(() => {\n    let root = document.querySelector(\":root\")\n    const userAgent = navigator.userAgent.toLowerCase()\n    const isTablet = /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent)\n\n    // Remove padding of scroll width if it is tablet to make columns of ChangeTrack section aligned\n    if (isTablet) {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"7fr\")\n    } else {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"6.7fr\")\n    }\n\n    // check Safari browser\n    if (userAgent.includes(\"safari\") && userAgent.includes(\"macintosh\")) {\n      root.style.setProperty(\"--changeTrack_scroll_width\", \"7fr\")\n    }\n\n    trackPromise(\n      axios({\n        url: \"/api/getUserProfile\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        }\n        //data: JSON.stringify({})   seems like this line has to be removed to avoid error from Heroku as this line is passing empty parameter.\n      })\n        .then(response => response.data)\n        .then(response => {\n          setUserProfile(response[\"userProfile\"])\n          setMCTable(response[\"mcTable\"])\n          setPartyTable(response[\"partyTable\"])\n          setMfList(response[\"mfList\"])\n          setAqlTable(response[\"aqlTable\"])\n          setCheckListTemplate(response[\"checkListTemplate\"])\n          setSharePointPath(response[\"sharePointPath\"])\n          setMQAmembers(response[\"mqaMembers\"])\n          setPackTypes(response[\"packTypes\"])\n          setProductCategories(response[\"productCategories\"])\n          setInspType(response[\"inspType\"])\n        })\n        .catch(error => {\n          console.log(error)\n        }),\n      \"getUserProfile\"\n    )\n\n    fetch(\"/api/getDefectTable\", {\n      method: \"GET\"\n      // ,\n      // \"headers\": {\n      //   \"x-rapidapi-host\": \"fairestdb.p.rapidapi.com\",\n      //   \"x-rapidapi-key\": \"apikey\"\n      // }\n    })\n      .then(response => response.json())\n      .then(response => {\n        setDefectList(response)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n\n    fetch(\"/api/getCriticalDefects\", {\n      method: \"GET\"\n      // ,\n      // \"headers\": {\n      //   \"x-rapidapi-host\": \"fairestdb.p.rapidapi.com\",\n      //   \"x-rapidapi-key\": \"apikey\"\n      // }\n    })\n      .then(response => response.json())\n      .then(response => {\n        setCriticalDefects(response)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }, [])\n\n  // updateMiscResult\n\n  useEffect(() => {\n    var sampleThreshold = \"\"\n    var defectiveResult = \"\"\n    var visualResult = \"\"\n\n    var sampleThresholdMajor = 0\n    var sampleThresholdMinor = 0\n\n    var total_major = 0\n    var total_minor = 0\n    var total_critical = 0\n\n    for (var i = 0; i < defects.length; i += 1) {\n      if (defects[i].critical) {\n        total_critical = total_critical + parseInt(defects[i].major)\n      } else if (parseInt(defects[i].major) > 0) {\n        total_major = total_major + parseInt(defects[i].major)\n      }\n\n      if (parseInt(defects[i].minor) > 0) {\n        total_minor = total_minor + parseInt(defects[i].minor)\n      }\n    }\n\n    if (totalShip) {\n      const aql = aqlTable.filter(x => x.size_start <= totalShip && x.size_end >= totalShip)\n      sampleThreshold = aql[0][\"25accept\"].toString() + \" / \" + aql[0][\"40accept\"].toString()\n      sampleThresholdMajor = aql[0][\"25accept\"]\n      sampleThresholdMinor = aql[0][\"40accept\"]\n    }\n\n    // Check Inspection Result -  1) If Critical -> Failed,  2) Major + (Minor/4) > Threshold of Major -> Failed, 3) Packing Failed or Measurement Failed -> Failed\n\n    if (total_critical + total_major + total_minor > 0) {\n      defectiveResult = \" \" + total_critical.toString() + \" / \" + total_major.toString() + \" / \" + total_minor.toString()\n\n      if (total_major + Math.floor(total_minor / 4) > sampleThresholdMajor) {\n        visualResult = \"Failed\"\n      } else if (total_minor > sampleThresholdMinor) {\n        visualResult = \"Failed\"\n      }\n    }\n\n    if (total_critical > 0) {\n      visualResult = \"Failed\"\n    }\n\n    if (visualResult !== \"Failed\" && defectiveResult.length > 0) {\n      visualResult = \"Passed\"\n    }\n\n    setVisualResult({ visual_result: visualResult, defective_result: defectiveResult, sample_threshold: sampleThreshold })\n  }, [defects, aqlTable, totalShip])\n\n  // handle highlight\n\n  const handleHighlight = search => {\n    search = search.trim()\n    var x = document.getElementsByClassName(\"itemTotal_Detail\")\n    var len = x.length\n    var first_found = -1\n    var i, j, long, scroll_y\n\n    for (j = 0; j < len; j++) {\n      x[j].style.backgroundColor = \"#0746f54d\" /*back to original color*/\n    }\n\n    for (i = 0; i < len; i++) {\n      //const currentChild = x[i].firstElementChild.innerHTML\n      //get the 2nd child which is the item column\n      const currentChild = x[i].getElementsByTagName(\"div\")[1].innerHTML\n      if (currentChild.includes(search) && search !== \"\") {\n        x[i].style.backgroundColor = \"yellow\"\n        if (first_found === -1) {\n          first_found = i\n        }\n      }\n    }\n\n    if (first_found > 0) {\n      document.getElementById(\"scroller\").scrollTo(0, 0)\n      long = document.getElementById(\"scroller\").scrollHeight\n      scroll_y = (long / len) * first_found\n      document.getElementById(\"scroller\").scrollBy(0, scroll_y)\n    }\n\n    x = document.getElementsByClassName(\"itemTable_Detail\")\n    len = x.length\n    first_found = -1\n\n    for (j = 0; j < len; j++) {\n      x[j].style.backgroundColor = \"#0746f54d\" /*back to original color*/\n    }\n\n    for (i = 0; i < len; i++) {\n      // children[2] is the item_no\n      const currentChild = x[i].children[2].innerHTML\n      if (currentChild.includes(search) && search !== \"\") {\n        x[i].style.backgroundColor = \"yellow\"\n        if (first_found === -1) {\n          first_found = i\n        }\n      }\n    }\n\n    if (first_found > 0) {\n      document.getElementById(\"itemTableScroller\").scrollTo(0, 0)\n      long = document.getElementById(\"itemTableScroller\").scrollHeight\n      scroll_y = (long / len) * first_found\n      document.getElementById(\"itemTableScroller\").scrollBy(0, scroll_y)\n    }\n  }\n\n  // **** handleAddItems ***//\n\n  const handleAddItems = aItems => {\n    //console.log(\"adding item\", aItems)\n    oldMC.current = false\n\n    const oItems = [...items]\n    const nItems = oItems.concat(aItems)\n    setItems(nItems)\n\n    const nShipItems = ship.concat(aItems.map(x => ({ mc_no: x.mc_no, po_no: x.po_no, order_qty: x.order_qty, item_no: x.item_no, ship_qty: x.ship_qty })))\n    // reconstruct ship\n    const total_qty = nShipItems.reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0)\n    const aql = aqlTable.filter(x => x.size_start <= total_qty && x.size_end >= total_qty)\n    const nShip = nShipItems.map(x => ({ ...x, sample_qty: Math.round((x.ship_qty / total_qty) * aql[0][\"25sample\"]), inspect_qty: Math.round((x.ship_qty / total_qty) * aql[0][\"25sample\"]) }))\n    //console.log(\"handleAddItems setShip\")\n    setShip(nShip)\n\n    // reconstruct PO based on ship rec (existing and newly added)\n    let poList = []\n    let pos = nShip.map(x => x.po_no)\n    let uniquePO = pos.filter((v, i, a) => a.indexOf(v) === i)\n\n    uniquePO.forEach(function (u) {\n      const mc_no = nItems.filter(x => x.po_no === u)[0][\"mc_no\"]\n      const order_qty = nItems.filter(x => x.po_no === u).reduce((prev, curr) => prev + parseInt(curr.order_qty), 0)\n      const ship_qty = nShip.filter(x => x.po_no === u).reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0)\n      const customer = nItems.filter(x => x.po_no === u)[0][\"customer\"]\n      poList.push({ mc_no: mc_no, po_no: u, order_qty: order_qty, ship_qty: ship_qty, customer: customer })\n    })\n    setPOList(poList)\n  }\n\n  const handleDeleteShip = (mc_no, po_no, item_no) => {\n    handleHighlight(\"\")\n    let nShip = ship.filter(x => !(x.item_no === item_no && x.po_no === po_no))\n    const total_qty = nShip.reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0) // total new ship qty\n    const aql = aqlTable.filter(x => x.size_start <= total_qty && x.size_end >= total_qty)\n    nShip = nShip.map(x => ({ ...x, sample_qty: Math.round((x.ship_qty / total_qty) * aql[0][\"25sample\"]), inspect_qty: Math.round((x.ship_qty / total_qty) * aql[0][\"25sample\"]) }))\n    //console.log(\"handleDeleteShip setShip\")\n    setShip(nShip)\n\n    let nItems = [...items]\n    // reconstruct1 - reconstruct PO based on ship rec (existing and newly added)\n    let poList = []\n    let pos = nShip.map(x => x.po_no)\n    let uniquePO = pos.filter((v, i, a) => a.indexOf(v) === i)\n\n    uniquePO.forEach(function (u) {\n      const mc_no = nItems.filter(x => x.po_no === u)[0][\"mc_no\"]\n      const order_qty = nItems.filter(x => x.po_no === u).reduce((prev, curr) => prev + parseInt(curr.order_qty), 0)\n      const ship_qty = nShip.filter(x => x.po_no === u).reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0)\n      const customer = nItems.filter(x => x.po_no === u)[0][\"customer\"]\n      poList.push({ mc_no: mc_no, po_no: u, order_qty: order_qty, ship_qty: ship_qty, customer: customer })\n    })\n\n    // remove MCs in PO List that do not exists in Ship rec\n    const item1 = nItems.map(y => y.mc_no)\n    const uniqueItem1 = item1.filter((v, i, a) => a.indexOf(v) === i)\n    //console.log(\"uniqueItem1\", uniqueItem1)\n\n    const ship1 = nShip.map(y => y.mc_no)\n    const uniqueShip1 = ship1.filter((v, i, a) => a.indexOf(v) === i)\n    //console.log(\"uniqueShip1\", uniqueShip1)\n\n    if (uniqueItem1.length > uniqueShip1.length) {\n      setItems(x => x.filter(x => x.mc_no !== mc_no))\n\n      //console.log(\"delete MC in items\", mc_no)\n    }\n    setPOList(poList)\n  }\n\n  const handleDeletePO = (mc_no, po_no) => {\n    handleHighlight(\"\")\n    let nShip = [...ship]\n    nShip = nShip.filter(x => x.po_no !== po_no)\n\n    // recalculate sample added 4/6/2022\n    nShip = ship.filter(x => !(x.po_no === po_no))\n    const total_qty = nShip.reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0) // total new ship qty\n    const aql = aqlTable.filter(x => x.size_start <= total_qty && x.size_end >= total_qty)\n    nShip = nShip.map(x => ({ ...x, sample_qty: Math.round((x.ship_qty / total_qty) * aql[0][\"25sample\"]), inspect_qty: Math.round((x.ship_qty / total_qty) * aql[0][\"25sample\"]) }))\n    //console.log(\"handleDeleteShip setShip\")\n\n    setShip(nShip)\n    setPOList(x => x.filter(x => x.po_no !== po_no))\n\n    // remove MCs in PO List that do not exists in Ship rec\n    const item1 = items.map(y => y.mc_no)\n    const uniqueItem1 = item1.filter((v, i, a) => a.indexOf(v) === i)\n    //console.log(\"uniqueItem2\", uniqueItem1)\n\n    const ship1 = nShip.map(y => y.mc_no)\n    const uniqueShip1 = ship1.filter((v, i, a) => a.indexOf(v) === i)\n    //console.log(\"uniqueShip2\", uniqueShip1)\n\n    if (uniqueItem1.length > uniqueShip1.length) {\n      setItems(x => x.filter(x => x.mc_no !== mc_no))\n      //console.log(\"delete MC in items 2\", mc_no)\n    }\n  }\n\n  // update Total Ship/Inspect,  item, ship - not relevant\n  useEffect(() => {\n    let oList = [...ship]\n    const nShipQty = oList.reduce((prev, curr) => prev + parseInt(curr.ship_qty), 0)\n    const nInspectQty = oList.reduce((prev, curr) => prev + parseInt(curr.inspect_qty), 0)\n    setTotalShip(nShipQty)\n    setTotalInspect(nInspectQty)\n    if (nShipQty > 0) {\n      const aql = aqlTable.filter(x => x.size_start <= nShipQty && x.size_end >= nShipQty)\n      const nSampleQty = aql[0][\"25sample\"]\n      setTotalSample(nSampleQty)\n    } else setTotalSample(0)\n  }, [ship, aqlTable])\n\n  // update update Product Type and Fabric\n  // useEffect(() => {\n  //   let oItems = [...items]\n  //   let oShip = [...ship]\n  //   console.log(\"update update Product Type and Fabric\", oShip)\n  // }, [items, ship])\n\n  // reset inspection qty\n  const reset = () => {\n    setShip(prev => prev.map(x => ({ ...x, inspect_qty: x.sample_qty })))\n  }\n\n  /**** */\n\n  const handleSupplierInfo = (su, mf) => {\n    partyTable.map(x => (x.SU === su ? setCurrentSUName(x.SU_NAME) : null))\n    partyTable.map(x => (x.MF === mf ? setCurrentMFName(x.MF_NAME) : null))\n  }\n\n  // add a new MC to inspection\n  const addMC = mc_no => {\n    /*   */\n    const newMC = mcTable.filter(x => x.mc_no === mc_no)\n    handleAddItems(newMC)\n\n    //ship_window = newMC[0].ship_window\n    let ship_window\n    if (misc.ship_window === undefined || misc.ship_window.length === 0) {\n      //console.log(\"ship window is blank\")\n      ship_window = newMC[0].ship_window\n    } else {\n      //console.log(\"ship window is not blank\")\n      ship_window = misc.ship_window.concat(\", \").concat(newMC[0].ship_window)\n    }\n\n    //const fibre_content = newMC[0].fabric_note\n    const product_type = newMC[0].item_desc\n    console.log(\"product_type : \", newMC[0], product_type)\n\n    // in case new MC has no fibre content, keep the original one\n    let fibre_content = misc.fibre_content\n    for (let i = 0; i < newMC.length; i++) {\n      if (newMC[i].fabric_note.length > 0) {\n        fibre_content = newMC[i].fabric_note\n        break\n      }\n    }\n\n    const label = newMC[0].label\n\n    setMisc({ ...misc, ship_window, product_type, fibre_content, label })\n    handleSupplierInfo(currentSU, currentMF)\n    setShowFull(true)\n    setEditMode(true)\n    fillCheckList() // since it's empty\n  }\n\n  const addToDefectList = (product, defect_area, defect_detail, major, minor, defect_area_code, defect_detail_area, defect_language) => {\n    setDefects(prev => prev.concat({ id: uuidv4(), product, defect_area, defect_detail, major, minor, defect_area_code, defect_detail_area, defect_language, critical: isCriticalDefect(product, defect_detail_area) }))\n  }\n\n  const deleteDefect = id => {\n    // setEditing(false)\n    setDefects(defects.filter(defect => defect.id !== id))\n  }\n\n  const setDisplayAlert = alert => {\n    //{ message: \"hi\", position: 0, timeout: 3000, color: \"alert__green\" }\n    setAlert(alert)\n    setTimeout(function () {\n      setAlert({ position: 100 })\n    }, alert.timeout)\n  }\n\n  const handleCheckItemChange = (id, change) => {\n    const newCheckList = [...checkList]\n    const index = newCheckList.findIndex(r => r.id === id)\n    newCheckList[index] = change\n    setCheckList(newCheckList)\n    //setCheckList([...checkList], { id: change })\n  }\n\n  const handleSave = submitted => {\n    // Convert inspection date to time 00.00.00\n    const main = { su_no: currentSU, mf_no: currentMF, inspection_date: inspectionDate.toDateString(), submitted: submitted }\n    const _id = { mc: inspectionID.mc, iteration: inspectionID.iteration, type: inspectionID.type }\n    let newMisc = { ...misc }\n    newMisc = { ...newMisc, final_result: calculateFinalResult(), visual_result: visualResult, defectLanguage: defectLanguage, submitted: submitted }\n\n    trackPromise(\n      axios({\n        url: \"/api/save\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: _id, main: main, misc: newMisc, mf: currentMF, checkList: checkList, items: items, itemsTotal: ship, poList: poList, defects: defects, uploads: uploads, updateHistory: updateHistory })\n      })\n        .then(res => {\n          clearScreen()\n          setDisplayAlert({ message: \"Saved Successfully !\", position: 0, timeout: 1000, color: \"alert__green\" })\n        })\n        .catch(err => {\n          console.log(err.response.data)\n          setDisplayAlert({ message: \"There was an error in saving, please contact the admin !!\", position: 0, timeout: 2000, color: \"alert__red\" })\n        }),\n      \"saveInspection\"\n    )\n  }\n\n  const handleSearch = id => {\n    //console.log(\"entering api/search\")\n\n    trackPromise(\n      axios({\n        url: \"/api/search\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        },\n        data: JSON.stringify({ _id: id })\n      })\n        // .then(response => {\n        //   console.log(\"status\", response.status)\n        // })\n        .then(response => response.data)\n        .then(response => {\n          //  Below to check whehter MC is valid or obsolete MC\n          oldMC.current = false\n\n          const response_mf = response[\"main\"][\"mf_no\"]\n\n          if (response[\"items\"].length === 0 && response_mf === currentMF) {\n            // in case all were deleted, we still want to show\n            console.log(\"Empty inspection record with mf# :\", response_mf)\n          } else {\n            if (response_mf !== currentMF) {\n              setDisplayAlert({ message: \"This MC does not belong to this manufacturer!\", position: 0, timeout: 1500, color: \"alert__red\" })\n              return\n            }\n            if (mcTable.filter(x => x.mc_no === id.mc).length === 0) {\n              oldMC.current = true\n            }\n          }\n\n          setShowFull(true)\n          initLoad.current = true\n          setItems(response[\"items\"])\n          setShip(response[\"itemsTotal\"])\n          setPOList(response[\"poList\"])\n\n          localStorage.setItem(\"appItems\", JSON.stringify(response[\"items\"]))\n          localStorage.setItem(\"appShip\", JSON.stringify(response[\"itemsTotal\"]))\n\n          setInspectionDate(response[\"main\"].inspection_date ? new Date(response[\"main\"].inspection_date) : null)\n          setMain(response[\"main\"])\n          setMisc(response[\"misc\"] ? response[\"misc\"] : {})\n          if (response[\"misc\"][\"defectLanguage\"] === undefined) {\n            setDefectLanguage(\"en\")\n          } else {\n            setDefectLanguage(response[\"misc\"][\"defectLanguage\"])\n          }\n\n          setCheckList(response[\"checkList\"])\n\n          handleSupplierInfo(response[\"main\"].su_no, response[\"main\"].mf_no)\n\n          if (response[\"defects\"] === undefined) {\n            setDefects([])\n          } else {\n            //console.log(response[\"defects\"])\n            setDefects(response[\"defects\"])\n          }\n\n          if (response[\"uploads\"] === undefined) {\n            setUploads(\"\")\n          } else {\n            //console.log(response[\"uploads\"])\n            setUploads(response[\"uploads\"])\n          }\n          if (response[\"update_history\"] === undefined) {\n            setUpdateHistory([])\n          } else {\n            setUpdateHistory(response[\"update_history\"])\n          }\n          setSharePointFiles(false)\n          setShowSharePointFiles(false)\n          setShowHistory(false)\n        })\n        .catch(err => {\n          //console.log(\"err\", err.response.status)\n          if (err.response.status === 406) {\n            setDisplayAlert({ message: \"Not a valid MC for this manufacturer !\", position: 0, timeout: 2000, color: \"alert__red\" })\n          } else if (err.response.status === 501) {\n            window.location = \"/login/timeout\"\n          } else setDisplayAlert({ message: \"No such Inspection ID, please try again !\", position: 0, timeout: 2000, color: \"alert__red\" })\n        }),\n      \"searchKey\"\n    )\n  }\n\n  const handleDelete = id => {\n    var confirm = window.confirm(\"Are you sure you want to delete this inspection ? \")\n    if (confirm !== true) {\n      return\n    }\n    trackPromise(\n      axios({\n        url: \"/api/delete\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: id })\n      })\n        .then(response => (response.status === 200 ? (clearScreen(), setDisplayAlert({ message: \"Deleted successfully !\", position: 0, timeout: 1500, color: \"alert__green\" })) : null))\n        .catch(err => {\n          setDisplayAlert({ message: \"Error deleting the inspection ID !\", position: 0, timeout: 1500, color: \"alert__red\" })\n        }),\n      \"deleteInspection\"\n    )\n  }\n\n  const clearScreen = () => {\n    setItems([])\n    setShip([])\n    setPOList([])\n    setDefects([])\n    setCheckList([])\n    setSearchedMC([])\n    setUploads([])\n    setShowSearchedMC(false)\n    setMisc([])\n    setUpdateHistory([])\n    setShowFull(false)\n    setEditMode(false)\n    setShowHistory(false)\n    setSharePointFiles([])\n    setShowSharePointFiles(false)\n    setShowHistory(true)\n    currentSearchedItem.current = \"\"\n    document.getElementById(\"itemTable_MC\").value = \"\"\n    document.getElementById(\"itemTotal_searchString\").value = \"\"\n  }\n\n  // ** implement delay function\n  const delay = ms => new Promise(res => setTimeout(res, ms))\n\n  const handleSessionTimeOut = async () => {\n    setDisplayAlert({ message: \"Session timeout, please login again !\", position: 0, timeout: 3000, color: \"alert__red\" })\n    await delay(3000)\n    window.location = \"/login/timeout\"\n  }\n\n  const searchInspByMC = mc => {\n    setShowSearchedMC(true)\n\n    trackPromise(\n      //fetch(\"/api/searchInspByMC\", {\n      axios({\n        url: \"/api/searchInspByMC\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        },\n        data: JSON.stringify({ mc: mc, mfList: mfList })\n      })\n        .then(response => response.data)\n        .then(response => {\n          setSearchedMC(response)\n          setSharePointFiles(false)\n        })\n        .catch(err => {\n          //console.log('err', err)\n          err.response.status === 501 ? handleSessionTimeOut() : setDisplayAlert({ message: \"Something went wrong !\", position: 0, timeout: 2000, color: \"alert__red\" })\n        }),\n      \"mfrSelection\"\n    )\n  }\n\n  const downloadDoc = (_id, file_name) => event => {\n    //event.preventDefault()\n\n    fetch(\"/download/\" + _id, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/octet-stream\",\n        \"Content-Disposition\": \"attachment\"\n      }\n    })\n      .then(response => response.blob())\n      .then(blob => {\n        // Create blob link to download\n        const url = window.URL.createObjectURL(new Blob([blob]))\n        const link = document.createElement(\"a\")\n        link.href = url\n        link.setAttribute(\"download\", file_name)\n\n        // Append to html link element page\n        document.body.appendChild(link)\n\n        // Start download\n        link.click()\n\n        // Clean up and remove the link\n        link.parentNode.removeChild(link)\n      })\n  }\n\n  const downloadSharePointFile = file_name => {\n    //event.preventDefault()\n\n    const file_url = \"/sites/OSO/\".concat(sharePointPath, \"/\", \"SU\", currentSU, \"MF\", currentMF, \"/\", file_name)\n\n    trackPromise(\n      fetch(\"/downloadSharePointFile\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/octet-stream\",\n          \"Content-Disposition\": \"attachment\",\n          \"Cache-Control\": \"no-cache\",\n          file_url: file_url\n        }\n      })\n        .then(response => response.blob())\n        .then(blob => {\n          // Create blob link to download\n          const url = window.URL.createObjectURL(new Blob([blob]))\n          const link = document.createElement(\"a\")\n          link.href = url\n          link.setAttribute(\"download\", file_name)\n\n          // Append to html link element page\n          document.body.appendChild(link)\n\n          // Start download\n          link.click()\n\n          // Clean up and remove the link\n          link.parentNode.removeChild(link)\n        }),\n      \"downloadSharePointfiles\"\n    )\n  }\n\n  const printReport = (file_name, draft) => {\n    //event.preventDefault()\n    if (misc.qa_type === undefined) {\n      setDisplayAlert({ message: \"QA Type must be chosen !\", position: 0, timeout: 2000, color: \"alert__red\" })\n      return\n    }\n    if (misc.qa_type === \"MQA\" && (misc.mqa === undefined || misc.mqa === \"Select\")) {\n      setDisplayAlert({ message: \"MQA must be specified !\", position: 0, timeout: 2000, color: \"alert__red\" })\n      return\n    }\n\n    file_name = \"MMG Inspection Report - \" + inspectionID[\"mc\"] + \"-\" + inspectionID[\"iteration\"] + \"-\" + inspectionID[\"type\"] + (draft ? \" (Draft) \" : \"\") + \".xlsx\"\n\n    trackPromise(\n      fetch(\"/printreport\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/octet-stream\",\n          \"Content-Disposition\": \"attachment\",\n          \"Cache-Control\": \"no-cache\",\n          inspectionID: JSON.stringify({ inspectionID }),\n          localTime: JSON.stringify(convertToLocal(Date.now()))\n        }\n      })\n        .then(response => response.blob())\n        .then(blob => {\n          // Create blob link to download\n          const url = window.URL.createObjectURL(new Blob([blob]))\n          const link = document.createElement(\"a\")\n          link.href = url\n          link.setAttribute(\"download\", file_name)\n\n          // Append to html link element page\n          document.body.appendChild(link)\n\n          // Start download\n          link.click()\n\n          // Clean up and remove the link\n          link.parentNode.removeChild(link)\n        }),\n      \"printReport\"\n    )\n  }\n\n  const getSharePointFiles = () => {\n    trackPromise(\n      axios({\n        url: \"/api/getsharepointfiles\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        },\n        data: JSON.stringify({ folder: \"SU\" + currentSU + \"MF\" + currentMF, inspection_id: inspectionID.mc + \"-\" + inspectionID.iteration + \"-\" + inspectionID.type })\n      })\n        .then(response => response.data)\n        .then(response => {\n          setSharePointFiles(response)\n        })\n        .catch(err => {\n          if (err.response.status === 404) {\n            setDisplayAlert({ message: \"Folder on SharePoint was not created !\", position: 3, timeout: 2000, color: \"alert__red\" })\n          }\n        }),\n      \"sharePointFiles\"\n    )\n  }\n\n  const createsharePointPDF = () => {\n    var confirm = window.confirm(\"You're recommended to use Microsoft Lens to create PDF file.  For non-chart photos with lesser resolution (around 400px *400px), you can try this function but all photo files will be zipped !  Please use with care !\")\n    if (confirm !== true) {\n      return\n    }\n    const inspection_date = inspectionDate.getMonth() + 1 + \"/\" + inspectionDate.getDate() + \"/\" + inspectionDate.getFullYear()\n    trackPromise(\n      axios({\n        url: \"/api/createsharepointpdf\",\n        timeout: 1000 * 28, // Wait for 28 seconds\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\",\n          inspection_id: inspectionID.mc + \"-\" + inspectionID.iteration + \"-\" + inspectionID.type,\n          //relative_url: \"2022InspRpt/SU\" + currentSU + \"MF\" + currentMF\n          relative_url: sharePointPath.concat(\"/\", \"SU\", currentSU, \"MF\", currentMF),\n          inspection_date: inspection_date\n        },\n        data: JSON.stringify({ folder: \"SU\" + currentSU + \"MF\" + currentMF, inspection_id: inspectionID.mc + \"-\" + inspectionID.iteration + \"-\" + inspectionID.type })\n      })\n        .then(response => response.data)\n        .then(response => {\n          setSharePointFiles(response)\n          document.getElementById(\"sharePoint_refresh\").click()\n        })\n        .catch(err => {\n          const errMsg = err.message\n          if (errMsg.includes(\"timeout\")) {\n            setDisplayAlert({ message: \"Warning : Server timeout interruption and some files may be lost ! Please refresh SharePoint status to make sure all photos are there and reduce the size of your photos and resubmit as neccessary, or use Microsft Lens on your mobile device!\", position: 3, timeout: 9000, color: \"alert__red\" })\n          }\n          if (err.response.status === 404) {\n            setDisplayAlert({ message: \"PDF creation error !\", position: 3, timeout: 2000, color: \"alert__red\" })\n          } else if (err.response.status === 405) {\n            setDisplayAlert({ message: \"No photos to generate PDF !\", position: 3, timeout: 2000, color: \"alert__red\" })\n          }\n        }),\n      \"sharePointFiles\"\n    )\n  }\n\n  //encapsulate the props function as only message is different in this page\n  const displayAlert = message => {\n    setDisplayAlert({ message: message, position: 0, timeout: 3000, color: \"alert__red\" })\n  }\n\n  const checkDuplicateID = id => {\n    trackPromise(\n      axios({\n        url: \"/api/checkDuplicateID\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: id })\n      }).then(res => (res.status === 200 ? displayAlert(\"This key has been used by previous inspection ! Please check and or consider a new iteration!\") : addMC(id.mc))),\n      \"createInspection\"\n    )\n  }\n\n  const handleDeleteSPfile = id => {\n    var confirm = window.confirm(\"Are you sure you want to delete the SharePoint file ? \")\n    if (confirm !== true) {\n      return\n    }\n    trackPromise(\n      axios({\n        url: \"/api/deleteSPfile\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        data: JSON.stringify({ _id: id })\n      })\n        .then(response => (response.status === 200 ? (setDisplayAlert({ message: \"SharePoint file deleted successfully !\", position: 3, timeout: 3000, color: \"alert__green\" }), document.getElementById(\"sharePoint_refresh\").click()) : null))\n        .catch(err => {\n          setDisplayAlert({ message: \"Error deleting the SP file !\", position: 4, timeout: 1500, color: \"alert__red\" })\n        }),\n      \"deleteInspection\"\n    )\n  }\n\n  const getMCtable = (su, mf) => {\n    trackPromise(\n      axios({\n        url: \"/api/getMCtable\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        },\n        data: JSON.stringify({ su: su, mf: mf })\n      })\n        .then(response => response.data)\n        .then(response => {\n          setMCTable(response)\n        })\n        .catch(err => {\n          setDisplayAlert({ message: \"Error getting MC\", position: 4, timeout: 1500, color: \"alert__red\" })\n        }),\n      \"getMCtable\"\n    )\n  }\n\n  function isCriticalDefect(product, defect) {\n    for (var i = 0; i < criticalDefects.length; i += 1) {\n      if (criticalDefects[i].product === product && criticalDefects[i].defect_detail_code === defect) {\n        return true\n      }\n    }\n    return false\n  }\n\n  function calculateFinalResult() {\n    let final_result = \"\"\n    if (misc.measurement_result === \"Failed\" || misc.packing_result === \"Failed\" || visualResult.visual_result === \"Failed\") {\n      final_result = \"Failed\"\n    } else if (visualResult.visual_result === \"\") {\n      final_result = \"Passed\"\n    } else {\n      final_result = \"Passed\"\n    }\n    return final_result\n  }\n\n  // convert to local time\n  function convertToLocal(date) {\n    const t = new Date(date).toTimeString()\n    const d = new Date(date).toDateString()\n    var local = d + \" \" + t\n    var local_end = local.search(\"GMT+\") - 1\n    local = local.substring(0, local_end)\n    return local\n  }\n\n  const fillCheckList = () => {\n    // Populate values to the checklist template.\n    const newCheckList = [...checkListTemplate]\n    newCheckList.sort((a, b) => a.id - b.id) // must sort to present in order...\n    setCheckList(newCheckList)\n  }\n\n  return (\n    <Fragment>\n      {/* <UserProfile userProfile={userProfile} /> */}\n      <SupplierInfo currentSU={currentSU} currentMF={currentMF} currentSUName={currentSUName} currentMFName={currentMFName} setSelectingSupplier={setSelectingSupplier} setShowFull={setShowFull} setMFRsearch={setMFRsearch} />\n      <MfrSelection partyTable={partyTable} setCurrentSU={setCurrentSU} setCurrentMF={setCurrentMF} setCurrentSUName={setCurrentSUName} setCurrentMFName={setCurrentMFName} selectingSupplier={selectingSupplier} setSelectingSupplier={setSelectingSupplier} setMFRsearch={setMFRsearch} mfrSearch={mfrSearch} getMCtable={getMCtable} setEditMode={setEditMode} />\n\n      <ShowSpinner position={1} />\n      <MainMenu handleSave={handleSave} handleSearch={handleSearch} inspectionID={inspectionID} handleDelete={handleDelete} printReport={printReport} editMode={editMode} setEditMode={setEditMode} userProfile={userProfile} main={main} misc={misc} showFull={showFull} clearScreen={clearScreen} updateHistory={updateHistory} setDisplayAlert={setDisplayAlert} oldMC={oldMC} />\n\n      <div className=\"flex-row\">\n        <div className=\"flex-large\">\n          <Fragment>\n            {/* <h2>Search Inspection</h2> */}\n            <SearchKey checkDuplicateID={checkDuplicateID} mcTable={mcTable} setDisplayAlert={setDisplayAlert} inspectionID={inspectionID} setInspectionID={setInspectionID} clearScreen={clearScreen} searchInspByMC={searchInspByMC} currentSU={currentSU} currentMF={currentMF} editMode={editMode} inspType={inspType} showFull={showFull} />\n\n            {showSearchedMC ? <SearchedMC inspectionID={inspectionID} setInspectionID={setInspectionID} handleSearch={handleSearch} searchInspByMC={searchInspByMC} searchedMC={searchedMC} setShowSearchedMC={setShowSearchedMC} currentMF={currentMF} /> : null}\n          </Fragment>\n        </div>\n      </div>\n      {alert.position === 0 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n      <ShowSpinner position={2} />\n\n      {/* Result  */}\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large\">\n          <Fragment>\n            <Result setInspectionDate={setInspectionDate} inspectionDate={inspectionDate} setMisc={setMisc} misc={misc} editMode={editMode} isCriticalDefect={isCriticalDefect} aqlTable={aqlTable} visualResult={visualResult} calculateFinalResult={calculateFinalResult}></Result>\n          </Fragment>\n        </div>\n      </div>\n\n      {/* Misc section with inspection Date  */}\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large\">\n          <Fragment>\n            <Misc setInspectionDate={setInspectionDate} inspectionDate={inspectionDate} setMisc={setMisc} misc={misc} editMode={editMode} mqaMembers={mqaMembers} packTypes={packTypes} productCategories={productCategories} userProfile={userProfile} items={items}></Misc>\n          </Fragment>\n        </div>\n      </div>\n\n      {alert.position === 1 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large\">\n          <ItemTotal setItems={setItems} items={items} mcTable={mcTable} addMC={addMC} currentSU={currentSU} currentMF={currentMF} editMode={editMode} aqlTable={aqlTable} setDisplayAlert={setDisplayAlert} ship={ship} setShip={setShip} poList={poList} setPOList={setPOList} totalShip={totalShip} setTotalShip={setTotalShip} totalInspect={totalInspect} setTotalInspect={setTotalInspect} totalSample={totalSample} setTotalSample={setTotalSample} reset={reset} handleDeleteShip={handleDeleteShip} handleDeletePO={handleDeletePO} handleHighlight={handleHighlight} />\n        </div>\n      </div>\n      {alert.position === 5 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n      <div className=\"flex-row\">\n        <div className={\"flex-large \" + (showFull ? null : \"hideSection\")}>\n          <DefectOptions items={items} addToDefectList={addToDefectList} setDisplayAlert={setDisplayAlert} editMode={editMode} defects={defects} defectLanguage={defectLanguage} setDefectLanguage={setDefectLanguage} defectList={defectList} showFull={showFull} />\n        </div>\n      </div>\n      {alert.position === 2 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n      <div className=\"flex-row\">\n        <div className={\"flex-large \" + (showFull ? null : \"hideSection\")}>\n          <DefectList defects={defects} deleteDefect={deleteDefect} editMode={editMode} isCriticalDefect={isCriticalDefect} defectLanguage={defectLanguage} defectList={defectList} />\n        </div>\n      </div>\n      <div className=\"flex-row\">\n        <div className={\"flex-large \" + (showFull ? null : \"hideSection\")}>\n          <CheckList checkList={checkList} handleCheckItemChange={handleCheckItemChange} editMode={editMode} />\n        </div>\n      </div>\n      {alert.position === 3 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large \">\n          <SharePoint currentSU={currentSU} currentMF={currentMF} inspectionID={inspectionID} editMode={editMode} getSharePointFiles={getSharePointFiles} setShowSharePointFiles={setShowSharePointFiles} showSharePointFiles={showSharePointFiles} setSharePointFiles={setSharePointFiles} sharePointPath={sharePointPath} createsharePointPDF={createsharePointPDF} />\n          <ShowSpinner position={3} />\n        </div>\n      </div>\n\n      {alert.position === 4 ? (\n        <div className=\"flex-row\">\n          <div className=\"flex-large\">\n            <ShowAlert alert={alert} />\n          </div>\n        </div>\n      ) : null}\n\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large \">\n          <ShowSharePointFiles sharePointFiles={sharePointFiles} downloadSharePointFile={downloadSharePointFile} showSharePointFiles={showSharePointFiles} convertToLocal={convertToLocal} editMode={editMode} handleDeleteSPfile={handleDeleteSPfile} />\n        </div>\n      </div>\n\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        {/* <div className={\"flex-row  hideSection\"}> */}\n        <div className=\"flex-large \">\n          <UploadForm setDisplayAlert={setDisplayAlert} inspectionID={inspectionID} setUploads={setUploads} uploads={uploads} downloadDoc={downloadDoc} editMode={editMode} currentSU={currentSU} currentMF={currentMF} setShowSharePointFiles={setShowSharePointFiles} sharePointPath={sharePointPath} inspectionDate={inspectionDate} />\n        </div>\n\n        {/* <div className=\"flex-large\">\n          <PhotoBlock uploadTable={uploads} downloadDoc={downloadDoc} currentSU={currentSU} currentMF={currentMF} inspectionID={inspectionID} />\n        </div> */}\n      </div>\n\n      <div className={\"flex-row \" + (showFull ? null : \"hideSection\")}>\n        <div className=\"flex-large \">\n          <ChangeTrack updateHistory={updateHistory} showHistory={showHistory} setShowHistory={setShowHistory} convertToLocal={convertToLocal} />\n        </div>\n      </div>\n      <div>&nbsp;</div>\n      <div>&nbsp;</div>\n    </Fragment>\n  )\n}\nexport default App\n","import React from \"react\"\r\n\r\nconst Home = props => {\r\n  const { env } = props\r\n\r\n  return (\r\n    <div className=\"welcome\">\r\n      <div>\r\n        {/* <img src=\"static/img/frontpageMap.jpg\" aria-hidden alt=\"MMG Inspection Map\"  />                 */}\r\n        {env === \"DEV\" ? <iframe src=\"http://localhost:5000/map-marker\" title=\"map\" style={{ width: \"100%\", height: \"103%\", border: 0 }}></iframe> : <iframe src=\"https://mmgapp2.herokuapp.com/map-marker\" title=\"map\" style={{ width: \"100%\", height: \"103%\", border: 0 }}></iframe>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default Home\r\n","import { React, useState, useEffect, Fragment } from \"react\"\r\nimport axios from \"axios\"\r\n//import { Spinner } from \"./components/Spinner\"\r\nimport { trackPromise } from \"react-promise-tracker\"\r\nimport ShowSpinner from \"./components/ShowSpinner\"\r\nimport ShowAlert from \"./components/ShowAlert\"\r\n\r\nconst About = props => {\r\n  //const { setItems, items, setDisplayAlert, mcTable, addMC, editMode, currentSU, currentMF } = props\r\n\r\n  const [result, setResult] = useState([])\r\n  const [alert, setAlert] = useState({ position: 100 })\r\n\r\n  function sortInspectionDate(_result) {\r\n    _result.sort(function (a, b) {\r\n      // note : must change the string back to date object for comparison\r\n      if (Date.parse(a[\"main\"].inspection_date) > Date.parse(b[\"main\"].inspection_date)) return -1\r\n      else return 1\r\n    })\r\n\r\n    return _result\r\n  }\r\n\r\n  useEffect(() => {\r\n    trackPromise(\r\n      axios({\r\n        url: \"/api/pastXdaysResult\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n          api: \"yes\"\r\n        }\r\n        //data: JSON.stringify({})   seems like this line has to be removed to avoid error from Heroku as this line is passing empty parameter.\r\n      })\r\n        .then(response => response.data)\r\n        .then(response => {\r\n          const _result = sortInspectionDate(response)\r\n          setResult(_result)\r\n          //console.log ('x day results', result)\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        }),\r\n      \"pastInspection\"\r\n    )\r\n    return () => {\r\n      setResult({}) // This worked for me\r\n    }\r\n  }, [])\r\n\r\n  // convert to local time\r\n  function convertToLocalDate(date) {\r\n    //const t = new Date(date).toTimeString()\r\n    //return d + \" \" + t\r\n    const d = new Date(date).toDateString()\r\n    return d\r\n  }\r\n\r\n  // convert to local time\r\n  function convertToLocal(date) {\r\n    const t = new Date(date).toTimeString()\r\n    const d = new Date(date).toDateString()\r\n    var local = d + \" \" + t\r\n    var local_end = local.search(\"GMT+\") - 1\r\n    local = local.substring(0, local_end)\r\n    return local\r\n  }\r\n\r\n  const setDisplayAlert = alert => {\r\n    //{ message: \"hi\", position: 0, timeout: 3000, color: \"alert__green\" }\r\n    setAlert(alert)\r\n    setTimeout(function () {\r\n      setAlert({ position: 0 })\r\n    }, alert.timeout)\r\n  }\r\n\r\n  const printReport = (inspectionID, submitted, qa_type, mqa) => {\r\n    //event.preventDefault()\r\n    if (qa_type === undefined) {\r\n      setDisplayAlert({ message: \"QA Type must be chosen !\", position: 0, timeout: 2000, color: \"alert__red\" })\r\n      return\r\n    }\r\n    if (qa_type === \"MQA\" && (mqa === undefined || mqa === \"Select\")) {\r\n      setDisplayAlert({ message: \"MQA must be specified !\", position: 0, timeout: 2000, color: \"alert__red\" })\r\n      return\r\n    }\r\n\r\n    const file_name = \"MMG Inspection Report - \" + inspectionID[\"mc\"] + \"-\" + inspectionID[\"iteration\"] + \"-\" + inspectionID[\"type\"] + (!submitted ? \" (Draft) \" : \"\") + \".xlsx\"\r\n\r\n    trackPromise(\r\n      fetch(\"/printreport\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/octet-stream\",\r\n          \"Content-Disposition\": \"attachment\",\r\n          \"Cache-Control\": \"no-cache\",\r\n          inspectionID: JSON.stringify({ inspectionID }),\r\n          localTime: JSON.stringify(convertToLocal(Date.now()))\r\n        }\r\n      })\r\n        .then(response => response.blob())\r\n        .then(blob => {\r\n          // Create blob link to download\r\n          const url = window.URL.createObjectURL(new Blob([blob]))\r\n          const link = document.createElement(\"a\")\r\n          link.href = url\r\n          link.setAttribute(\"download\", file_name)\r\n\r\n          // Append to html link element page\r\n          document.body.appendChild(link)\r\n\r\n          // Start download\r\n          link.click()\r\n\r\n          // Clean up and remove the link\r\n          link.parentNode.removeChild(link)\r\n        }),\r\n      \"printReport\"\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"xDaysResult\">\r\n        {result.length > 0 ? (\r\n          <div className=\"xDaysResult_gridHeader\">\r\n            <div className=\"xDaysResult_gridHeaderItem\">Inspection Date</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Supplier</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Manufacturer</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Inspection ID</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Result</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Status</div>\r\n            <div className=\"xDaysResult_gridHeaderItem\">Download Report</div>\r\n          </div>\r\n        ) : null}\r\n\r\n        {alert.position === 0 ? (\r\n          <div className=\"flex-row\">\r\n            <div className=\"flex-large\">\r\n              <ShowAlert alert={alert} />\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n\r\n        {result.length > 0\r\n          ? result.map(item => (\r\n              <div key={item.id} className=\"xDaysResult_gridDetail\">\r\n                <div className=\"xDaysResult_gridItem\">{convertToLocalDate(item[\"main\"].inspection_date)}</div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"main\"].su_no}</div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"main\"].mf_no}</div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"_id\"].mc + \"-\" + item[\"_id\"].iteration + \"-\" + item[\"_id\"].type} </div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"misc\"].final_result}</div>\r\n                <div className=\"xDaysResult_gridItem\">{item[\"misc\"].submitted ? \"Released\" : \"Draft\"}</div>\r\n                <div className=\"xDaysResult_gridItem\">\r\n                  <i\r\n                    className=\"clickable fa fa-download\"\r\n                    onClick={() => {\r\n                      printReport({ mc: item[\"_id\"].mc, iteration: item[\"_id\"].iteration, type: item[\"_id\"].type }, item[\"misc\"].submitted, item[\"misc\"].qa_type, item[\"misc\"].mqa)\r\n                    }}\r\n                  ></i>\r\n                </div>\r\n              </div>\r\n            ))\r\n          : null}\r\n      </div>\r\n      {/* <Spinner area=\"pastInspection\" /> */}\r\n      <ShowSpinner position={10} />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default About\r\n","//import React, { useState, Fragment } from \"react\"\nimport React, { Fragment } from \"react\"\n\nconst MainMenu = props => {\n  const { userProfile } = props\n  return (\n    <Fragment>\n      <div className=\"userProfile\">\n        <div className=\"userProfile_title\">\n          <div>\n            <img src=\"static/img/macys-header.jpg\" aria-hidden alt=\"\" width=\"30\" height=\"30\" />\n          </div>\n          <div>MMG Inspection App</div>\n        </div>\n        <div className=\"userProfile_personal\">\n          <div className=\"userProfile_name\">{userProfile.first_name ? \"Hi, \" + userProfile.first_name : null} </div>\n          <div className=\"userProfile_photo\">{userProfile.email ? userProfile.email.includes(\"@macys.com\") ? <img src={\"/api/getPhoto\"} aria-hidden alt=\"Searching for photo...\" width=\"60\" height=\"60\" /> : <img src=\"static/img/anonymous.jpg\" aria-hidden alt=\"No factory photo !!\" width=\"60\" height=\"60\" /> : <div>Searching for photo...</div>}</div>\n        </div>\n      </div>\n    </Fragment>\n  )\n}\n\nexport default MainMenu\n","import { Route, Routes, HashRouter as Router, Link } from \"react-router-dom\"\nimport React, { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport AppInspection from \"./AppInspection\"\nimport Home from \"./Home\"\nimport XDaysResult from \"./XDaysResult\"\nimport UserProfile from \"./components/UserProfile\"\nimport { trackPromise } from \"react-promise-tracker\"\n\nconst logout = () => {\n  localStorage.clear()\n  window.location = \"/logout\"\n}\n\nconst gotoPowerBI = () => {\n  const url = \"https://app.powerbi.com/reportEmbed?reportId=f0a7cd56-e22b-490a-9ad7-012d4a0d5251&autoAuth=true&filterPanelEnabled=False&pageName=ReportSectionf1be12cf083e1c0eba15\"\n\n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  if (newWindow) newWindow.opener = null\n}\n\nconst App = () => {\n  const [userProfile, setUserProfile] = useState({})\n\n  useEffect(() => {\n    trackPromise(\n      axios({\n        url: \"/api/getUserProfile\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          api: \"yes\"\n        }\n        //data: JSON.stringify({})   seems like this line has to be removed to avoid error from Heroku as this line is passing empty parameter.\n      })\n        .then(response => response.data)\n        .then(response => {\n          setUserProfile(response[\"userProfile\"])\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    )\n  }, [])\n\n  return (\n    <div className=\"container app_container\">\n      <div className=\"flex-row\">\n        <div className=\"flex-large\">\n          <UserProfile userProfile={userProfile} />\n          <Router>\n            <nav>\n              <ul className=\"app_header\">\n                <li>\n                  <Link to=\"/\" className=\"link\">\n                    Home\n                  </Link>\n                </li>\n                <li>\n                  <Link to=\"/appInspection\" className=\"link\">\n                    Inspection\n                  </Link>\n                </li>\n\n                {userProfile.email !== undefined && userProfile.email.includes(\"macys.com\") ? (\n                  <li>\n                    <Link to=\"/xDaysResult\" className=\"link\">\n                      Past Inspection Results\n                    </Link>\n                  </li>\n                ) : null}\n\n                {userProfile.email !== undefined && userProfile.email.includes(\"macys.com\") ? (\n                  <li\n                    className=\"link\"\n                    onClick={() => {\n                      gotoPowerBI()\n                    }}\n                  >\n                    Power BI\n                  </li>\n                ) : null}\n\n                <button\n                  className=\"fa fa-sign-out\"\n                  onClick={() => {\n                    logout()\n                  }}\n                >\n                  Logout\n                </button>\n                {/* <div className=\"userProfile_photo\">{userProfile.email ? userProfile.email.includes(\"@macys.com\") ? <img src={\"/api/getPhoto\"} aria-hidden alt=\"Searching for photo...\" width=\"60\" height=\"60\" /> : <img src=\"static/img/anonymous.jpg\" aria-hidden alt=\"No factory photo !!\" width=\"60\" height=\"60\" /> : <div>Searching for photo...</div>} </div>*/}\n              </ul>\n            </nav>\n\n            <Routes>\n              <Route path=\"/\" element={<Home env={userProfile.environment} />} />\n              <Route path=\"/appInspection\" element={<AppInspection />} />\n              <Route path=\"/xDaysResult\" element={<XDaysResult />} />\n            </Routes>\n          </Router>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./css/main.css\"\nimport \"./css/index.css\"\nimport \"./css/defectList.css\"\nimport \"./css/defectOptions.css\"\nimport \"./css/checkList.css\"\nimport \"./css/uploadDoc.css\"\nimport \"./css/photoBlock.css\"\nimport \"./css/searchKey.css\"\nimport \"./css/appInspection.css\"\nimport \"./css/mainMenu.css\"\nimport \"./css/searchedMC.css\"\nimport \"./css/userProfile.css\"\nimport \"./css/supplierInfo.css\"\nimport \"./css/itemTable.css\"\nimport \"./css/itemTotal.css\"\nimport \"./css/misc.css\"\nimport \"./css/mfrSelection.css\"\nimport \"react-datepicker/dist/react-datepicker.css\"\nimport \"./css/result.css\"\nimport \"./css/changeTrack.css\"\nimport \"./css/sharePoint.css\"\nimport \"./css/showSharePointFiles.css\"\nimport \"./css/appInspection.css\"\nimport \"./css/app.css\"\nimport \"./css/xDaysResult.css\"\n\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}